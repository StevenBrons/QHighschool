(this.webpackJsonpqhighschool=this.webpackJsonpqhighschool||[]).push([[0],{379:function(e,t,a){e.exports=a(768)},478:function(e,t,a){},538:function(e,t){},540:function(e,t){},549:function(e,t){},551:function(e,t){},577:function(e,t){},579:function(e,t){},580:function(e,t){},586:function(e,t){},588:function(e,t){},606:function(e,t){},609:function(e,t){},625:function(e,t){},628:function(e,t){},764:function(e,t,a){},765:function(e,t,a){},766:function(e,t,a){},768:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),l=a.n(o),i=a(101),s=a(346),c=a(28),u=a(2),p={};var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_USERS":var a=e;for(var n in t.users)a[n]=Object(u.a)(Object(u.a)({},a[n]),t.users[n]);return a;case"CHANGE_USER":return Object(u.a)(Object(u.a)({},e),{},{[t.user.id]:Object(u.a)(Object(u.a)({},e[t.user.id]),t.user)});case"CHANGE_ENROLLMENTS":if("ADD"===t.action)return Object(u.a)(Object(u.a)({},e),{},{[t.userId]:Object(u.a)(Object(u.a)({},e[t.userId]),{},{enrollmentIds:(e[t.userId].enrollmentIds||[]).concat(t.groupId)})});if("REMOVE"===t.action){var r=e[t.userId].enrollmentIds.indexOf(t.groupId);return Object(u.a)(Object(u.a)({},e),{},{[t.userId]:Object(u.a)(Object(u.a)({},e[t.userId]),{},{enrollmentIds:[].concat(Object(c.a)(e[t.userId].enrollmentIds.slice(0,r)),Object(c.a)(e[t.userId].enrollmentIds.slice(r+1)))})})}return Object(u.a)(Object(u.a)({},e),{},{[t.userId]:Object(u.a)(Object(u.a)({},e[t.userId]),{},{enrollmentIds:t.enrollmentIds})});default:return e}},h={};var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_GROUPS":var a=Object(u.a)({},e);for(var n in t.groups)a[n]=Object(u.a)(Object(u.a)({},a[n]),t.groups[n]);return a;case"CHANGE_GROUP":return Object(u.a)(Object(u.a)({},e),{},{[t.group.id]:Object(u.a)(Object(u.a)({},e[t.group.id]),t.group)});case"CHANGE_PRESENCE_USER_STATUS":return Object(u.a)(Object(u.a)({},e),{},{[t.groupId]:Object(u.a)(Object(u.a)({},e[t.groupId]),{},{lessons:Object(u.a)(Object(u.a)({},e[t.groupId].lessons),{},{[t.lessonId]:Object(u.a)(Object(u.a)({},e[t.groupId].lessons[t.lessonId]),{},{userStatus:t.userStatus})})})});default:return e}},g={currentPeriod:1,enrollmentPeriod:1,schoolYear:"2020/2021",userId:null,enrollableGroups:null,subjects:null,groups:null,users:null,showMenu:!0,notifications:[],hasFetched:[]};var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SELF":return Object(u.a)(Object(u.a)({},e),{},{userId:t.user.id,role:t.user.role,notifications:[].concat(Object(c.a)(e.notifications),Object(c.a)(t.user.notifications)),users:Object(u.a)({[t.user.id]:t.user},e.users)});case"SET_SECURE_LOGIN":return Object(u.a)(Object(u.a)({},e),{},{secureLogin:t.secureLogin});case"ADD_NOTIFICATION":return Object(u.a)(Object(u.a)({},e),{},{notifications:[].concat(Object(c.a)(e.notifications),[t.notification])});case"REMOVE_NOTIFICATION":var a=e.notifications.indexOf(t.notification);return Object(u.a)(Object(u.a)({},e),{},{notifications:[].concat(Object(c.a)(e.notifications.slice(0,a)),Object(c.a)(e.notifications.slice(a+1)))});case"TOGGLE_MENU":return null!=t.menuState?Object(u.a)(Object(u.a)({},e),{},{showMenu:t.menuState}):Object(u.a)(Object(u.a)({},e),{},{showMenu:!e.showMenu});case"HAS_FETCHED":return Object(u.a)(Object(u.a)({},e),{},{hasFetched:[].concat(Object(c.a)(e.hasFetched),[{call:t.call,method:t.method,data:t.data}])});case"CHANGE_SUBJECTS":return Object(u.a)(Object(u.a)({},e),{},{subjects:Object(u.a)(Object(u.a)({},e.subjects),t.subjects)});default:return Object(u.a)(Object(u.a)({},e),{},{users:d(e.users,t),groups:m(e.groups,t)})}},f=a(7),v=a(8),y=a(10),E=a(9),j=a(843),O=a(45),x=a(15),k=a(367),C=Object(k.a)({breakpoints:{keys:["xs","sm","md","lg","xl"],values:{xs:0,sm:600,md:960,lg:1280,xl:1920}},direction:"ltr",mixins:{toolbar:{minHeight:56,"@media (min-width:0px) and (orientation: landscape)":{minHeight:48},"@media (min-width:600px)":{minHeight:64}}},overrides:{},palette:{common:{black:"#000",white:"#fff"},type:"light",primary:{main:"#1FB2FF",contrastText:"#fff",light:"rgb(10, 252, 254)",dark:"rgb(5, 140, 174)"},secondary:{main:"#c4112f",contrastText:"#fff",light:"#cf4058",dark:"#890b20"},error:{light:"#f89e4c",main:"#f78620",dark:"#ac5d16",contrastText:"#fff"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},contrastThreshold:3,tonalOffset:.2,text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:"#fff",default:"#fafafa"},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.08)",hoverOpacity:.08,selected:"rgba(0, 0, 0, 0.14)",disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)"}},props:{},shadows:["none","0px 1px 3px 0px rgba(0, 0, 0, 0.2),0px 1px 1px 0px rgba(0, 0, 0, 0.14),0px 2px 1px -1px rgba(0, 0, 0, 0.12)","0px 1px 5px 0px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 3px 1px -2px rgba(0, 0, 0, 0.12)","0px 1px 8px 0px rgba(0, 0, 0, 0.2),0px 3px 4px 0px rgba(0, 0, 0, 0.14),0px 3px 3px -2px rgba(0, 0, 0, 0.12)","0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0, 0, 0, 0.12)","0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 5px 8px 0px rgba(0, 0, 0, 0.14),0px 1px 14px 0px rgba(0, 0, 0, 0.12)","0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0, 0, 0, 0.12)","0px 4px 5px -2px rgba(0, 0, 0, 0.2),0px 7px 10px 1px rgba(0, 0, 0, 0.14),0px 2px 16px 1px rgba(0, 0, 0, 0.12)","0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0, 0, 0, 0.12)","0px 5px 6px -3px rgba(0, 0, 0, 0.2),0px 9px 12px 1px rgba(0, 0, 0, 0.14),0px 3px 16px 2px rgba(0, 0, 0, 0.12)","0px 6px 6px -3px rgba(0, 0, 0, 0.2),0px 10px 14px 1px rgba(0, 0, 0, 0.14),0px 4px 18px 3px rgba(0, 0, 0, 0.12)","0px 6px 7px -4px rgba(0, 0, 0, 0.2),0px 11px 15px 1px rgba(0, 0, 0, 0.14),0px 4px 20px 3px rgba(0, 0, 0, 0.12)","0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0, 0, 0, 0.12)","0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 13px 19px 2px rgba(0, 0, 0, 0.14),0px 5px 24px 4px rgba(0, 0, 0, 0.12)","0px 7px 9px -4px rgba(0, 0, 0, 0.2),0px 14px 21px 2px rgba(0, 0, 0, 0.14),0px 5px 26px 4px rgba(0, 0, 0, 0.12)","0px 8px 9px -5px rgba(0, 0, 0, 0.2),0px 15px 22px 2px rgba(0, 0, 0, 0.14),0px 6px 28px 5px rgba(0, 0, 0, 0.12)","0px 8px 10px -5px rgba(0, 0, 0, 0.2),0px 16px 24px 2px rgba(0, 0, 0, 0.14),0px 6px 30px 5px rgba(0, 0, 0, 0.12)","0px 8px 11px -5px rgba(0, 0, 0, 0.2),0px 17px 26px 2px rgba(0, 0, 0, 0.14),0px 6px 32px 5px rgba(0, 0, 0, 0.12)","0px 9px 11px -5px rgba(0, 0, 0, 0.2),0px 18px 28px 2px rgba(0, 0, 0, 0.14),0px 7px 34px 6px rgba(0, 0, 0, 0.12)","0px 9px 12px -6px rgba(0, 0, 0, 0.2),0px 19px 29px 2px rgba(0, 0, 0, 0.14),0px 7px 36px 6px rgba(0, 0, 0, 0.12)","0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 20px 31px 3px rgba(0, 0, 0, 0.14),0px 8px 38px 7px rgba(0, 0, 0, 0.12)","0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 21px 33px 3px rgba(0, 0, 0, 0.14),0px 8px 40px 7px rgba(0, 0, 0, 0.12)","0px 10px 14px -6px rgba(0, 0, 0, 0.2),0px 22px 35px 3px rgba(0, 0, 0, 0.14),0px 8px 42px 7px rgba(0, 0, 0, 0.12)","0px 11px 14px -7px rgba(0, 0, 0, 0.2),0px 23px 36px 3px rgba(0, 0, 0, 0.14),0px 9px 44px 8px rgba(0, 0, 0, 0.12)","0px 11px 15px -7px rgba(0, 0, 0, 0.2),0px 24px 38px 3px rgba(0, 0, 0, 0.14),0px 9px 46px 8px rgba(0, 0, 0, 0.12)"],typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500,h1:{fontFamily:'"Avenir-Black", "Roboto", "Helvetica", "Arial", sans-serif',letterSpacing:"0.01em"},display4:{fontSize:"7rem",fontWeight:300,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',letterSpacing:"-.04em",lineHeight:"1.14286em",marginLeft:"-.04em",color:"rgba(0, 0, 0, 0.54)"},display3:{fontSize:"3.5rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',letterSpacing:"-.02em",lineHeight:"1.30357em",marginLeft:"-.02em",color:"rgba(0, 0, 0, 0.54)"},display2:{fontSize:"2.8125rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.06667em",marginLeft:"-.02em",color:"rgba(0, 0, 0, 0.54)"},display1:{fontSize:"2.125rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.20588em",color:"rgba(0, 0, 0, 0.54)"},headline:{fontSize:"1.5rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.35417em",color:"rgba(0, 0, 0, 0.87)"},title:{fontSize:"1.3125rem",fontWeight:500,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.16667em",color:"rgba(0, 0, 0, 0.87)"},subheading:{fontSize:"1rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.5em",color:"rgba(0, 0, 0, 0.87)"},body2:{fontSize:"0.875rem",fontWeight:500,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.71429em",color:"rgba(0, 0, 0, 0.87)"},body1:{fontSize:"0.875rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.46429em",color:"rgba(0, 0, 0, 0.87)"},caption:{fontSize:"0.75rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.375em",color:"rgba(0, 0, 0, 0.54)"},button:{fontSize:"0.875rem",textTransform:"uppercase",fontWeight:500,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',color:"rgba(0, 0, 0, 0.87)"}},transitions:{easing:{easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration:{shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195}},spacing:8,zIndex:{mobileStepper:1e3,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500}}),I=a(20),S=a(35),w=a.n(S),N=a(102),P=a(78),A=a.n(P),D=a(61),G=a.n(D),M=a(351),L=a.n(M),T=a(34),F=a.n(T);function H(e,t){return function(a){var n=a.responseJSON;throw"user/self"!==e&&t({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"high",type:"bar",message:n&&n.error?n.error:"Er is iets mis gegaan",scope:"."}}),n}}function z(e,t,a,n,r,o){return _.apply(this,arguments)}function _(){return(_=Object(N.a)(w.a.mark((function e(t,a,n,r,o,l){var i,s,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i={call:t,method:a,data:n},s=0;s<o().hasFetched.length;s++)(c=o().hasFetched[s]).data===i.data&&c.call===i.call&&c.method===i.method&&console.error("Duplicate api call: ".concat(a," ").concat(t));return r(Object(u.a)(Object(u.a)({},i),{},{type:"HAS_FETCHED"})),e.abrupt("return",G.a.ajax({url:"/api/"+t,type:a,data:Object(u.a)(Object(u.a)({},n),{},{secureLogin:o().secureLogin}),dataType:"json"}).then((function(e){return"put"!==a&&"patch"!==a&&"delete"!==a||r({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"low",type:"bar",message:"Opgeslagen",scope:""}}),Array.isArray(e)&&!0!==l?L()(e,"id"):e})).catch(H(t,r)));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return function(e,t){z("subject/list","get",null,e,t).then((function(t){e({type:"CHANGE_SUBJECTS",subjects:t})})).catch((function(){}))}}function U(){return function(e,t){z("group/list","get",null,e,t).then((function(t){e({type:"CHANGE_GROUPS",groups:t})})).catch((function(){}))}}function B(){return function(e,t){z("user/groups","get",null,e,t).then((function(t){e({type:"CHANGE_GROUPS",groups:t})})).catch((function(){}))}}function R(e){/MSIE|Trident/.test(window.navigator.userAgent)&&e({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"high",type:"bar",message:"Deze website ondersteunt Internet Explorer niet. Gebruik een moderne browser zoals Firefox of Chrome",sticky:!0,scope:""}})}function W(){return function(e,t){z("user/enrollments","get",null,e,t).then((function(a){e({type:"CHANGE_GROUPS",groups:a}),e({type:"CHANGE_ENROLLMENTS",userId:t().userId,enrollmentIds:Object.keys(a)})})).catch((function(){}))}}function Y(e){return{type:"ADD_NOTIFICATION",notification:e}}function J(e){return{type:"REMOVE_NOTIFICATION",notification:e}}function Z(e){return{type:"TOGGLE_MENU",menuState:e}}function $(e){return{type:"SET_SECURE_LOGIN",secureLogin:e}}function q(e,t){return function(a,n){return z("subject","put",{name:e,description:t},a,n).then((function(){a({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"low",type:"bar",message:"Vak aangemaakt, refresh om te zien",scope:"beheer"}})}))}}function K(e,t){return function(a,n){return z("course","put",{name:e,subjectId:t},a,n).then((function(){a({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"low",type:"bar",message:"Module aangemaakt, refresh om te zien",scope:"beheer"}})}))}}function Q(e,t){return function(a,n){return z("group","put",{courseId:e,mainTeacherId:t},a,n).then((function(){a({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"low",type:"bar",message:"Groep aangemaakt, refresh om te zien",scope:"beheer"}})}))}}function X(e,t,a){var n=new Date;n.setTime(n.getTime()+60*a*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}function ee(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}function te(){X("beforeLoginPath",window.location.pathname+window.location.search,24),document.location.href="/auth/login?secure=true"}var ae=a(815),ne=a(217),re=a(86),oe=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.generateEmail.bind(this)(),this.interval=setInterval(this.generateEmail.bind(this),1500)}},{key:"generateEmail",value:function(){var e=this.state.school,t=this.state.schoolShort,a=this.state.studentNumber;switch(Math.floor(14*Math.random())){case 0:e="beekdallyceum",t="BD";break;case 1:e="candea",t="CC";break;case 2:e="quadraam",t="CB";break;case 3:e="lyceumelst",t="LE";break;case 4:e="liemerscollege",t="LC";break;case 5:e="lorentzlyceum",t="LL";break;case 6:e="maartenvanrossem",t="MvR";break;case 7:e="montessoriarnhem",t="MC";break;case 8:e="olympuscollege",t="OC";break;case 9:e="produsarnhem",t="PD";break;case 10:e="gymnasiumarnhem",t="SGA";break;case 11:e="symbion",t="SY";break;case 12:e="vmbo-venster",t="VE";break;case 13:default:e="hetwesteraam",t="HW"}for(var n=(a=Math.floor(999999*Math.random())+"").length;n<6;n++)a="0"+a;this.setState({school:e,schoolShort:t,studentNumber:a})}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"login",value:function(){document.location.href="/auth/login"}},{key:"generateColoredEmail",value:function(e,t,a){return r.a.createElement(re.a,{variant:"subtitle1",style:{fontFamily:"'Courier New', Courier, monospace",overflow:"hidden"}},r.a.createElement("span",{style:{color:C.palette.secondary.light,fontWeight:"bold"}},e),r.a.createElement("span",{style:{color:C.palette.secondary.dark,fontWeight:"bolder"}},t),r.a.createElement("span",{style:{fontWeight:"bold"}},"@ll."),r.a.createElement("span",{style:{color:C.palette.secondary.light,fontWeight:"bold"}},a),r.a.createElement("span",{style:{fontWeight:"bold"}},".nl"))}},{key:"render",value:function(){return null!=this.props.userId?(this.props.history.push("/"),this.props.toggleMenu(!0)):this.props.toggleMenu(!1),r.a.createElement(ne.a,{elevation:8,className:"Login",style:{minHeight:"330px"}},r.a.createElement("div",{style:{padding:"20px"}},r.a.createElement(re.a,{gutterBottom:!0,variant:"body1",color:"primary"},"Log in"),r.a.createElement(re.a,{variant:"subtitle1"},"Gebruik je school-email om in te loggen:"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("center",null,this.generateColoredEmail("schoolafkorting","leerlingnummer","school"),this.generateColoredEmail(this.state.schoolShort,this.state.studentNumber,this.state.school)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ae.a,{type:"submit",variant:"contained",size:"large",color:"primary",fullWidth:!0,onClick:this.login},"Login met je Microsoft school account")))}}]),a}(n.Component);var le=Object(I.h)(Object(x.b)((function(e){return{userId:e.userId}}),(function(e){return{login:function(t,a){e(Z(!0))},toggleMenu:function(t){e(Z(t))}}}))(oe)),ie=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props.className;return this.props.showMenu?e+=" menuShown":e+=" menuHidden",r.a.createElement("div",{className:"Page "+e},this.props.children)}}]),a}(n.Component);var se=Object(x.b)((function(e){return{showMenu:e.showMenu}}))(ie),ce=a(816),ue=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={isShowing:!1},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.timeout=setTimeout((function(){return e.setState({isShowing:!0})}),200)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){return this.state.isShowing?r.a.createElement(ce.a,this.props):null}}]),a}(n.Component),pe=a(844),de=a(817),he=a(846),me=a(818),ge=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).onChange=function(e){n.props.onChange(e.target.value)},n.state={error:!1,search:""},n}return Object(v.a)(a,[{key:"render",value:function(){var e,t,a,n=this,o=null==this.props.value?"":this.props.value,l=this.props.style||{},i=this.props.layout||{},s=this.props.label,c=!0,p=!1,d=!1,h=this.props.options,m=l.underline||!0,g=l.margin||"none",b=0,f=[];if(this.props.style){switch(this.props.style.type){case"headline":(l=Object(u.a)(Object(u.a)({},l),C.typography.headline)).color=C.palette.primary.main;break;case"title":(l=Object(u.a)(Object(u.a)({},l),C.typography.title)).color=C.palette.primary.main;break;case"caption":l.color=C.palette.text.secondary;break;default:l.color=C.palette.text.primary}switch(this.props.style.color){case"primary":l.color=C.palette.primary.main;break;case"primaryContrast":l.color=C.palette.primary.contrastText;break;case"secondary":l.color=C.palette.secondary.main;break;case"secondaryContrast":l.color=C.palette.secondary.contrastText;break;case"error":l.color=C.palette.error.main}}if("right"===i.alignment&&(l.float="right",l.textAlign="right",f.push("right")),"left"===i.alignment&&(l.float="left"),i.area&&(d=!0,p=!0),!this.props.default||!1!==this.props.editable||""!==o&&null!=o||(o=this.props.default),this.props.editable)c=!1,m=l.underline||!1,g=l.margin||"normal";else{if(null!=h&&null!=h[0]&&"string"!==typeof h[0]){var v=h.filter((function(e){return e.value===o}))[0];null!=v&&(o=v.label)}h=null}switch(null!=l.labelVisible&&!0!==l.labelVisible&&(s=null),h&&(e=h.map((function(e){return"string"!==typeof e?r.a.createElement(de.a,{key:e.value,value:e.value},e.label):r.a.createElement(de.a,{key:e,value:e},e)}))),l.unit&&(t=r.a.createElement(me.a,{position:"end"},l.unit)),g){case"dense":b=5;break;case"normal":b=12}return a=h&&h.length>10?r.a.createElement(he.a,{id:this.props.id,options:h,getOptionLabel:function(e){return e.label},style:Object(u.a)(Object(u.a)({flex:1},l),{},{margin:b}),renderInput:function(e){return r.a.createElement(pe.a,Object.assign({},e,{label:n.props.label,variant:"outlined"}))}}):r.a.createElement(pe.a,{id:this.props.id,value:o,margin:"none",disabled:c,fullWidth:d,multiline:p,className:f.join(" ")+" Field",label:s,select:!!h,style:Object(u.a)(Object(u.a)({flex:1},l),{},{margin:b}),onChange:this.onChange,error:this.state.error,InputProps:{disableUnderline:m,style:Object(u.a)(Object(u.a)({},l),{},{width:"100%"}),endAdornment:t||null,inputProps:{style:Object(u.a)(Object(u.a)({},l),{},{width:"100%"})}}},e),i.td?r.a.createElement("td",{style:l},a):a}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Object(u.a)(Object(u.a)({},t),{},{error:!!e.editable&&!a.validate(e.value,e.validate)})}},{key:"validate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[e];switch(t.type){case"phoneNumber":var n=/(^\+[0-9]{2}|^\+[0-9]{2}\(0\)|^\(\+[0-9]{2}\)\(0\)|^00[0-9]{2}|^0)([0-9]{9}$|[0-9\-\s]{10}$)/i;if(!n.test(e))return!1;break;case"email":var r=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/g;if(!r.test(e))return!1;break;case"integer":if(!/^\+?[1-9][\d]*$/i.test(e))return!1;break;case"float":if(isNaN(e))return!1;break;case"decimalGrade":var o=e.replace(/\./g,"_$comma$_").replace(/,/g,".").replace(/_\$comma\$_/g,",");if("ND"===o)return!0;if(isNaN(o))return!1}return!(t.min&&parseFloat(e)<t.min)&&(!(t.max&&parseFloat(e)>t.max)&&((!t.notEmpty||null!=e&&""!==e&&" "!==e&&-1!==a.indexOf(e))&&!(t.maxLength&&null!=e&&e.length>t.maxLength)))}}]),a}(r.a.Component),be=a(826),fe=a(149),ve=a.n(fe),ye=a(848),Ee=a(822),je=a(823),Oe=a(824),xe=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).getRemarkPage=function(){var e=n.props.group.remarks;return r.a.createElement(ye.a,{open:!0,keepMounted:!0},r.a.createElement(Ee.a,null,"Opmerkingen"),r.a.createElement(je.a,null,r.a.createElement(re.a,null,e)),r.a.createElement(Oe.a,null,r.a.createElement(ae.a,{color:"default"},"Annuleren"),r.a.createElement(ae.a,{onClick:function(){n.props.preventPopupClose(!0),n.setState({page:"hasChosenDay"})},color:"primary"},"Verder")))},n.state={},n}return Object(v.a)(a,[{key:"getDuplicatePage",value:function(){var e=this;return r.a.createElement(ye.a,{open:!0,keepMounted:!0},r.a.createElement(je.a,null,r.a.createElement(re.a,{color:"error",style:{fontSize:"16px"}},"Je hebt al een module gekozen voor "+this.props.group.day+"!"),"Je hebt je op deze dag al voor de module\xa0",r.a.createElement(re.a,{color:"primary",variant:"button"},this.props.chosenDayGroupName),"\xa0ingeschreven. Wil je je ook voor\xa0",r.a.createElement(re.a,{color:"primary",variant:"button"},this.props.group.courseName),"\xa0inschrijven?"),r.a.createElement(Oe.a,null,r.a.createElement(ae.a,{color:"primary",variant:"contained",onClick:function(){e.props.handlePopup(!0)}},"Toch inschrijven"),r.a.createElement(ae.a,{color:"default"},"Annuleren")))}},{key:"getCancelPage",value:function(){var e=this;return r.a.createElement(ye.a,{open:!0,keepMounted:!0},r.a.createElement(Ee.a,null,"Uitschrijven"),r.a.createElement(je.a,null,"Weet je zeker dat je wilt uitschrijven voor de module\xa0",r.a.createElement(re.a,{color:"primary",variant:"button"},this.props.group.courseName)," ","\xa0?"),r.a.createElement(Oe.a,null,r.a.createElement(ae.a,{color:"default"},"Annuleren"),r.a.createElement(ae.a,{onClick:function(){return e.props.handlePopup(!0)},color:"primary"},"Uitschrijven",r.a.createElement(ve.a,null))))}},{key:"getConfirmPage",value:function(){var e=this;return r.a.createElement(ye.a,{open:!0,keepMounted:!0},r.a.createElement(Ee.a,null,"Inschrijven"),r.a.createElement(je.a,null,"Weet je zeker dat je wilt inschrijven voor de module\xa0",r.a.createElement(re.a,{color:"primary",variant:"button"},this.props.group.courseName),"\xa0?"),r.a.createElement(Oe.a,null,r.a.createElement(ae.a,{color:"default"},"Annuleren"),r.a.createElement(ae.a,{onClick:function(){e.props.handlePopup(!0)},variant:"contained",color:"primary"},"Inschrijven")))}},{key:"render",value:function(){this.props.preventPopupClose(!1);var e=this.state.page;return"cancel"===e?this.getCancelPage():"remarks"===e&&null!=this.props.group.remarks&&this.props.group.remarks.length>1?this.getRemarkPage():"hasChosenDay"===e&&this.props.hasChosenDay?this.getDuplicatePage():this.getConfirmPage()}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Object(u.a)({page:e.hasChosen?"cancel":"remarks"},t)}}]),a}(n.Component),ke=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).preventPopupClose=function(e){n.preventClose=e},n.handlePopup=function(e){e&&n.props.toggleEnrollment(n.props.group),n.preventClose||n.setState({dialogOpen:!n.state.dialogOpen})},n.props.getEnrolLments(),n.state={dialogOpen:!1},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=this.state.dialogOpen?r.a.createElement(xe,{group:t.group,hasChosen:t.hasChosen,handlePopup:this.handlePopup,hasChosenDay:t.hasChosenDay,chosenDayGroupName:t.chosenDayGroupName,preventPopupClose:this.preventPopupClose}):null;return t.loading?r.a.createElement(ue,{size:30}):t.hasChosen?r.a.createElement(ae.a,{color:"primary",onClick:function(){return e.handlePopup(!1)},style:t.style},"Ingeschreven",r.a.createElement(ve.a,null),a):this.props.canChoose?r.a.createElement(ae.a,{color:"primary",variant:"contained",onClick:function(){return e.handlePopup(!1)},style:this.props.style},"Inschrijven"+(this.props.hasChosenDay?"*":""),a):t.group.period<this.props.enrollmentPeriod?r.a.createElement(ae.a,{disabled:!0,color:"primary",style:t.style},"Inschrijfperiode verlopen",a):r.a.createElement(ae.a,{disabled:!0,color:"primary",style:t.style},"Coming Soon",a)}}]),a}(n.Component);var Ce=Object(x.b)((function(e,t){if(null==e.users[e.userId].enrollmentIds)return{loading:!0};var a=-1;return e.users[e.userId].enrollmentIds.forEach((function(n){var r=e.groups[n];r.day===t.group.day&&r.period===t.group.period&&(a=r.courseName)})),{canChoose:t.group.enrollable,hasChosen:-1!==e.users[e.userId].enrollmentIds.indexOf(t.group.id),hasChosenDay:-1!==a,chosenDayGroupName:a,enrollmentPeriod:e.enrollmentPeriod}}),(function(e){return{toggleEnrollment:function(t){return e(function(e){return function(t,a){-1===a().users[a().userId].enrollmentIds.indexOf(e.id)?z("user/enrollments","put",{groupId:e.id},t,a).then((function(){t({type:"CHANGE_ENROLLMENTS",action:"ADD",userId:a().userId,groupId:e.id})})):z("user/enrollments","delete",{groupId:e.id},t,a).then((function(){t({type:"CHANGE_ENROLLMENTS",action:"REMOVE",userId:a().userId,groupId:e.id})}))}}(t))},getEnrolLments:function(){return e(W())}}}))(ke),Ie=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){if(!1!==this.props.active&&null==this.props.secureLogin){var e=r.a.createElement("div",null,r.a.createElement(ge,{value:"Log opnieuw in om toegang te krijgen",layout:{area:!0},style:{width:"auto"}}),r.a.createElement(ae.a,{color:"primary",variant:"contained",onClick:te},"Inloggen"));return this.props.dense?e:r.a.createElement(ne.a,{style:{padding:"20px",marginTop:"25px"}},e)}return this.props.children}}]),a}(n.Component);var Se=Object(x.b)((function(e){return{secureLogin:e.secureLogin}}),null)(Ie),we=a(825),Ne=a(849),Pe=[{label:"Gehaald",value:"passed"},{label:"Niet gehaald",value:"failed"},{label:"Niet deelgenomen",value:"ND"}],Ae=[{label:"Onvoldoende",value:"O"},{label:"Voldoende",value:"V"},{label:"Goed",value:"G"},{label:"Niet deelgenomen",value:"ND"}],De=[{label:"vink",value:"check",options:Pe},{label:"trapsgewijs",value:"stepwise",options:Ae},{label:"cijfer",value:"decimal",options:"decimal"}];function Ge(e){if("ND"===e.assesment||null==e.assesment)return"#673ab7";switch(e.type){case"stepwise":return"#3f51b5";case"check":return"#009688";case"decimal":return"#00bcd4";default:return"#673ab7"}}function Me(e){var t=e.assesment,a=e.type;if("ND"===(t+"").toUpperCase())return"ND";switch(a){case"decimal":return(parseFloat((t+"").replace(",",".")).toFixed(1)+"").replace(".",",");case"stepwise":return Ae.filter((function(e){e.label;return e.value===t}))[0].label;case"check":return Pe.filter((function(e){e.label;return e.value===t}))[0].label;default:return"---"}}var Le=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props.evaluation,t={underline:!1,flex:2},a={td:!0};return this.props.student&&(t.type="headline",t.color="primaryContrast",a.td=!1,a.alignment="right"),"decimal"===e.type?r.a.createElement(ge,{style:t,validate:{min:1,max:10,type:"decimalGrade",notEmpty:!0},layout:a,label:"Beoordeling",name:e.userId,value:e.assesment?e.assesment:"",editable:this.props.editable,onChange:this.props.onChange}):r.a.createElement(ge,{style:t,name:e.userId,label:"Beoordeling",layout:a,value:e.assesment?e.assesment:"",options:De.filter((function(t){return t.value===e.type}))[0].options,editable:this.props.editable,onChange:this.props.onChange})}}]),a}(n.Component),Te=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).onSortChange=function(e){n.setState({sortValue:e,sortDirection:"desc"===n.state.sortDirection&&n.state.sortValue===e?"asc":"desc"})},n.handleSingleChange=function(e){var t=n.props.evaluations.map((function(t){return t.userId===e.userId?e:Object(u.a)({},t)}));n.props.handleChange(t)},n.sortEvaluations=function(){var e=n.props.evaluations,t=n.state.sortValue,a="asc"===n.state.sortDirection?"asc":"desc";return"name"===t?e.sort((function(e,t){var n=t.displayName<e.displayName;return"asc"===a?n:-n})):"evaluations"===t&&e.sort((function(e,t){e=e.assesment;var n=(null===(t=t.assesment))-(null==e)||+(e>t)||-(e<t);return"asc"===a?n:-n})),e},n.state={sortValue:"",sortDirection:""},n}return Object(v.a)(a,[{key:"handleEvaluationTypeChange",value:function(e){for(var t=[],a=0;a<this.props.evaluations.length;a++)t.push(Object(u.a)(Object(u.a)({},this.props.evaluations[a]),{},{type:e})),this.props.handleChange(t)}},{key:"render",value:function(){var e=this,t=this.state.sortValue,a="asc"===this.state.sortDirection?"asc":"desc",n={marginTop:"10px",alignItems:"center",paddingRight:"15px",paddingLeft:"15px",display:"flex"},o=this.props.evaluations;if(0===o.length)return"Er zijn nog geen beoordelingen beschikbaar";var l=this.sortEvaluations().map((function(t){return r.a.createElement(ne.a,{style:n,key:t.userId,component:"tr"},r.a.createElement(ge,{style:{type:"title",color:"primary",flex:2},value:t.displayName,layout:{td:!0}}),r.a.createElement(Le,{editable:e.props.editable,evaluation:t,onChange:function(a){return e.handleSingleChange(Object(u.a)(Object(u.a)({},t),{},{assesment:a}))}}),r.a.createElement(ge,{style:{underline:!1,flex:5},layout:{area:!0,td:!0},label:"Uitleg",name:t.userId,value:t.explanation,editable:e.props.editable,onChange:function(a){return e.handleSingleChange(Object(u.a)(Object(u.a)({},t),{},{explanation:a}))}}))}));return r.a.createElement(Se,{active:this.props.editable},r.a.createElement("table",{style:{width:"100%"}},r.a.createElement("tbody",null,r.a.createElement(ne.a,{style:Object(u.a)(Object(u.a)({},n),{},{backgroundColor:"#e0e0e0"}),component:"tr"},r.a.createElement("td",{style:{paddingLeft:"15px"}},r.a.createElement(re.a,{type:"title",color:"primary",style:{padding:"5px 0"}},r.a.createElement(we.a,{title:"Sorteer",enterDelay:300,placement:"bottom-start"},r.a.createElement(Ne.a,{active:"evaluations"===t,onClick:function(){return e.onSortChange("evaluations")},direction:a,style:{color:"inherit",fontSize:"1.5rem"}},"Beoordelingen"))),r.a.createElement("div",null,r.a.createElement(we.a,{title:"Sorteer",enterDelay:300,placement:"bottom-start"},r.a.createElement(Ne.a,{active:"name"===t,onClick:function(){return e.onSortChange("name")},direction:a},"Naam")))),r.a.createElement("td",{style:{flex:"5"}}),r.a.createElement("td",null,r.a.createElement(ge,{label:"Beoordelingsformaat",style:{type:"caption",underline:!1,margin:"normal",labelVisible:!0},layout:{alignment:"right"},value:o[0].type,options:De,editable:this.props.editable,onChange:this.handleEvaluationTypeChange.bind(this)}))),l)))}}]),a}(n.Component),Fe=(a(478),function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={hover:!1},n}return Object(v.a)(a,[{key:"expand",value:function(){this.props.history.push("/groep/"+this.props.group.id)}},{key:"getBottomSection",value:function(e){return e?r.a.createElement("div",{className:"footer",style:{backgroundColor:Ge(this.props.group.evaluation)}},r.a.createElement(ge,{value:"Beoordeling",style:{type:"title",flex:2}}),r.a.createElement(Le,{evaluation:this.props.group.evaluation,student:!0})):r.a.createElement("div",{className:"footer"},r.a.createElement(ae.a,{color:"secondary",onClick:this.expand.bind(this)},"Bekijken"),"student"===this.props.role&&r.a.createElement(Ce,{group:this.props.group}))}},{key:"render",value:function(){var e=this,t=this.props.group,a=this.props.group.evaluation&&""!==this.props.group.evaluation.assesment&&null!==this.props.group.evaluation.assesment;return r.a.createElement("div",{className:"GroupCard"},r.a.createElement(ne.a,{elevation:this.state.hover?4:2,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})}},r.a.createElement(be.a,{color:"secondary",invisible:this.props.schoolYear===t.schoolYear,badgeContent:t.schoolYear},r.a.createElement("div",{className:"GroupCardInside"},r.a.createElement(re.a,{variant:"caption",color:"primary",style:{overflow:"hidden",maxHeight:"65px",cursor:"pointer"},onClick:function(){e.props.history.push("/groep/"+t.id)}},t.subjectName+" - #M"+(t.courseId+"").padStart(4,"0")),r.a.createElement(re.a,{variant:"h1",style:{overflow:"hidden",height:"64px",cursor:"pointer",textTransform:"uppercase",fontSize:"24px"},onClick:function(){e.props.history.push("/groep/"+t.id)}},t.courseName),r.a.createElement("div",null,r.a.createElement(re.a,{style:{display:"inline-block",fontWeight:"bold",float:"right"}},"Blok "+t.period+" - "+t.day),r.a.createElement(re.a,{style:{display:"inline-block",fontWeight:"bold"}},t.enrollableFor||"Iedereen")),a?r.a.createElement(re.a,{style:{maxHeight:"164px",overflow:"hidden"},gutterBottom:!0},r.a.createElement("b",null,"Uitleg beoordeling: "),t.evaluation.explanation):r.a.createElement(re.a,{style:{maxHeight:"164px",overflow:"hidden"},gutterBottom:!0},t.courseDescription),this.getBottomSection(a)))))}}]),a}(n.Component)),He=Object(I.h)(Fe),ze=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={hover:!1,style:{width:"100%",height:"auto",margin:"0px",padding:"10px"}},n}return Object(v.a)(a,[{key:"formatPhoneNumber",value:function(e){null==e&&(e="");var t=e.replace(/\D/g,"");if(10===t.length)return"6"===t[1]?t.substr(0,2)+" "+t.substr(2,8):t.substr(0,3)+" "+t.substr(3,7);var a=/(0031|31)0?(6)?([0-9]+)$/gm.exec(t);return a?a[2]?"+31 06 "+a[3]:"+31 "+a[3]:e}},{key:"expand",value:function(){this.props.history.push("/user/"+this.props.user.id)}},{key:"render",value:function(){var e=this,t=Object(u.a)({},this.props.user),a=Object(u.a)({},this.state.style);return r.a.createElement("tr",{key:t.id},r.a.createElement(ne.a,{elevation:this.state.hover?2:1,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})},component:"td",style:a},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(re.a,{variant:"button",color:"teacher"===t.role?"secondary":"primary",style:{flex:1}},t.firstName+" "+t.lastName),r.a.createElement(re.a,{variant:"subtitle1",style:{flex:1}},t.school),r.a.createElement(re.a,{variant:"body1",style:{flex:1}},t.level+" - "+t.year),r.a.createElement(re.a,{variant:"body1",style:{flex:1}},"teacher"===t.role?"docent":"leerling"),r.a.createElement(re.a,{variant:"body1",style:{flex:1}},t.profile)),"admin"===this.props.role&&r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(re.a,{variant:"body1",style:{flex:1}},t.email),r.a.createElement(re.a,{variant:"body1",style:{flex:1}},t.preferedEmail),r.a.createElement("div",{style:{flex:1}}),r.a.createElement(re.a,{variant:"body1",style:{flex:1}},this.formatPhoneNumber(t.phoneNumber)),r.a.createElement(re.a,{variant:"body1",style:{flex:1}},t.id)),this.props.children))}}]),a}(n.Component),_e=Object(I.h)(ze),Ve={width:"300px",height:"80px",padding:"20px",verticalAlign:"top",margin:"20px",display:"inline-block",cursor:"pointer"},Ue=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={hover:!1,style:Object(u.a)(Object(u.a)({},Ve),n.props.style)},n}return Object(v.a)(a,[{key:"expand",value:function(){this.props.history.push("/gebruiker/"+this.props.user.id)}},{key:"render",value:function(){var e=this,t=this.props.user;return r.a.createElement(ne.a,{elevation:this.state.hover?4:2,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})},style:this.state.style},r.a.createElement(re.a,{variant:"button",color:"teacher"===t.role?"secondary":"primary"},t.firstName+" "+t.lastName),r.a.createElement(re.a,{variant:"subtitle1"},("teacher"===t.role?"docent":"leerling")+"\t"+t.school))}}]),a}(n.Component),Be=Object(I.h)(Ue),Re=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this;if(null==this.props.user)return"page"===this.props.display?this.props.notExists?r.a.createElement("div",{className:"page"},"De opgevraagde gebruiker bestaat niet"):r.a.createElement("div",{className:"page"},r.a.createElement(ue,null)):this.props.notExists?null:r.a.createElement(ue,null);switch(this.props.display){case"name":return r.a.createElement(ge,{value:this.props.user.displayName,style:{type:"title",width:"auto"},layout:{td:!0}});case"row":return r.a.createElement(_e,this.props,this.props.actions&&this.props.actions.map((function(t){return r.a.createElement(ae.a,{onClick:function(){return t.onClick(e.props.userId)},variant:"contained",color:"primary",style:{marginRight:"10px"}},t.label)})));case"card":default:return r.a.createElement(Be,this.props)}}}]),a}(n.Component);var We=Object(I.h)(Object(x.b)((function(e,t){var a=t.match.params.userId||t.userId,n=t.display||"page",r=!1,o=null;return null==a&&(a=e.userId),null==e.users||null==e.users[a]?null!=a&&-1===e.hasFetched.indexOf("User.get("+a+")")||(r=!0):o=e.users[a],{role:e.role,user:o,notExists:r,display:n,userId:a,ownProfile:""+a===""+e.userId}}),(function(e){return{setSecureLogin:function(t){return e($(t))}}}))(Re)),Ye=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).createRow=function(t){var a=F()(e.props.lessons,(function(a,n){var r=A()(e.props.presence,(function(e){return e.lessonId===a.id&&e.userId===t}));return 1===r.length?e.createPresenceComponent(r[0],n):e.createPresenceComponent({id:Math.floor(1e5*-Math.random()),lessonId:a.id,userId:t,status:"present"},n)}));return r.a.createElement(ne.a,{component:"tr",elevation:1,key:"p"+t},r.a.createElement(We,{key:t,userId:t,display:"name"}),a)},e.createLessonHeader=function(t){var a=F()(e.props.lessons,(function(e){return r.a.createElement(ge,{value:"Les "+e.numberInBlock,key:e.id,style:{type:"title"},layout:{td:!0,area:!0}})}));return r.a.createElement(ne.a,{component:"tr",elevation:2,key:"l"+t,style:{backgroundColor:"#e0e0e0"}},r.a.createElement(ge,{value:"",layout:{td:!0,area:!0}}),a)},e}return Object(v.a)(a,[{key:"createPresenceComponent",value:function(e,t){var a=this,n=[{label:"Actief",value:"present"},{label:"Niet actief",value:"absent"}];return this.props.editable||"absent"!==e.userStatus||(n[0].label="Afgemeld",n[1].label="Afgemeld"),r.a.createElement(ge,{key:t,value:e.status,options:n,label:"absent"===e.userStatus?"afgemeld":void 0,layout:{td:!0,area:!0},editable:this.props.editable,onChange:function(t){a.props.handleChange(Object(u.a)(Object(u.a)({},e),{},{status:t}))}})}},{key:"render",value:function(){var e=this.props.participantIds.map(this.createRow);return e.unshift(this.createLessonHeader()),r.a.createElement("table",null,r.a.createElement("tbody",null,e))}}]),a}(n.Component),Je=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){n.props.handleChange(Object(u.a)(Object(u.a)({},n.props.lesson),{},{[e]:t}))},n.state={hover:!1,style:{width:"100%",height:"auto",marginTop:"10px",marginBottom:"10px",padding:"2px",display:"flex",alignItems:"start",position:"relative"}},n}return Object(v.a)(a,[{key:"getWeekdayString",value:function(e){return["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"][e]}},{key:"getOptOutButton",value:function(){var e=this;return"absent"===this.props.lesson.userStatus?r.a.createElement("div",{style:{flex:1}},r.a.createElement(ae.a,{style:{width:"70px",float:"right"},size:"small",mini:!0,color:"primary",onClick:function(){return e.props.setPresenceUserStatus(e.props.lesson.id,"present",e.props.lesson.courseGroupId)}},"Aanmelden")):r.a.createElement("div",{style:{flex:1}},r.a.createElement(ae.a,{style:{width:"70px",float:"right"},size:"small",mini:!0,color:"secondary",onClick:function(){return e.props.setPresenceUserStatus(e.props.lesson.id,"absent",e.props.lesson.courseGroupId)}},"Afmelden"))}},{key:"render",value:function(){var e=this,t=this.props.lesson;return-1===t.id?r.a.createElement(ne.a,{elevation:this.state.hover?2:1,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})},component:"tr",style:{backgroundColor:"#e0e0e0"}},r.a.createElement("td",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(ge,{style:{fontWeight:"bold"},value:"Lesnummer"}),r.a.createElement(ge,{style:{fontWeight:"bold"},value:"Soort les"})),r.a.createElement(ge,{style:{flex:4,fontWeight:"bold"},value:"Onderwerp",layout:{td:!0}}),r.a.createElement(ge,{style:{flex:8,fontWeight:"bold"},value:"Activiteiten",layout:{td:!0}}),r.a.createElement("td",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(ge,{style:{fontWeight:"bold"},value:"Datum",layout:{alignment:"right"}}),r.a.createElement(ge,{style:{fontWeight:"bold"},value:"Aanwezigheid",layout:{alignment:"right"}}))):r.a.createElement(ne.a,{elevation:this.state.hover?2:1,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})},component:"tr"},r.a.createElement("td",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(ge,{color:"primary",layout:{area:!0},style:{fontWeight:"bold"},value:"Les "+t.numberInBlock}),r.a.createElement(ge,{label:"Soort les",layout:{area:!0},value:t.kind,editable:this.props.editable,onChange:function(t){return e.handleChange("kind",t)}})),r.a.createElement(ge,{label:"Onderwerp",style:{flex:4},value:t.subject,editable:this.props.editable,onChange:function(t){return e.handleChange("subject",t)},layout:{td:!0,area:!0}}),r.a.createElement(ge,{label:"Activiteiten",style:{flex:8},value:t.activities,editable:this.props.editable,onChange:function(t){return e.handleChange("activities",t)},layout:{td:!0,area:!0}}),r.a.createElement("td",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(ge,{layout:{alignment:"right"},value:this.getWeekdayString(new Date(t.date).getDay())+" "+new Date(t.date).getDate()+"-"+(new Date(t.date).getMonth()+1)+"-"+new Date(t.date).getFullYear()}),r.a.createElement(ge,{label:"Aanwezigheid",style:{labelVisible:!0},layout:{alignment:"right"},value:t.presence,editable:this.props.editable,onChange:function(t){return e.handleChange("presence",t)},options:[{label:"Noodzakelijk",value:"required"},{label:"Eigen keuze",value:"optional"},{label:"Geen bijeenkomst",value:"unrequired"}]}),this.props.userIsMemberOfGroup&&"student"===this.props.role?this.getOptOutButton():null))}}]),a}(n.Component);var Ze=Object(x.b)(null,(function(e){return{setPresenceUserStatus:function(t,a,n){return e(function(e,t,a){return function(n,r){n({type:"CHANGE_PRESENCE_USER_STATUS",lessonId:e,userStatus:t,groupId:a}),z("group/userStatus","patch",{lessonId:e,userStatus:t},n,r)}}(t,a,n))}}}))(Je),$e=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).onSortChange=function(e){n.setState({sortValue:e,sortDirection:"desc"===n.state.sortDirection&&n.state.sortValue===e?"asc":"desc"})},n.getHeader=function(){var e=Object(u.a)({},n.state.style);return r.a.createElement("tr",{key:"header"},r.a.createElement(ne.a,{elevation:n.state.hover?2:1,onMouseEnter:function(){return n.setState({hover:!0})},onMouseLeave:function(){return n.setState({hover:!1})},component:"td",style:e},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},n.headerTitle("button","name","Naam"),n.headerTitle("subtitle1","school","School"),n.headerTitle("body1","levelAndYear","Niveau - Leerjaar"),n.headerTitle("body1","role","Rol"),n.headerTitle("body1","profile","Profiel")),"admin"===n.props.role&&r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},n.headerTitle("body1","email","Office Email"),n.headerTitle("body1","preferedEmail","Voorkeurs email"),r.a.createElement("div",{style:{flex:1}}),n.headerTitle("body1","phoneNumber","Telefoonnummer"),n.headerTitle("body1","id","Gebruikers ID"))))},n.sortIds=function(){var e=n.state.sortValue,t=n.state.sortDirection,a=n.props.users,r=n.props.userIds;return""===e||r.sort((function(n,r){switch(e){case"name":n=(a[n].firstName+a[n].lastName).toLowerCase(),r=(a[r].firstName+a[r].lastName).toLowerCase();break;case"levelAndYear":n=(a[n].level+a[n].year).toString(),r=(a[r].level+a[r].year).toString();break;default:n=a[n][e],r=a[r][e]}var o=(null==r)-(null==n)||+(n>r)||-(n<r);return"asc"===t?o:-o})),r},n.state={hover:!1,style:{width:"100%",height:"auto",margin:"0px",padding:"10px",backgroundColor:"#e0e0e0"},sortValue:"",sortDirection:""},n}return Object(v.a)(a,[{key:"headerTitle",value:function(e,t,a){var n=this,o=this.state.sortValue,l="asc"===this.state.sortDirection?"asc":"desc";return r.a.createElement(re.a,{variant:e,color:"button"===e?"primary":"initial",style:{flex:1}},r.a.createElement(we.a,{title:"Sorteer",enterDelay:300,placement:"bottom-start"},r.a.createElement(Ne.a,{active:o===t,direction:l,onClick:function(){return n.onSortChange(t)},style:{color:"inherit"}},a)))}},{key:"render",value:function(){var e=this,t=this.getHeader(),a=this.sortIds().map((function(t){return r.a.createElement(We,{key:t,userId:t,display:"row",actions:e.props.actions})}));return r.a.createElement("table",{style:{width:"100%"}},r.a.createElement("tbody",null,t,a))}}]),a}(n.Component);var qe=Object(x.b)((function(e,t){return{users:e.users,role:e.role}}))($e),Ke=a(828),Qe=a(845),Xe=a(829),et=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e="Weet je zeker dat u de pagina wilt verlaten? Er zijn nog niet-opgeslagen gegevens!";return this.props.giveWarning?window.onbeforeunload=function(t){return t.returnValue=e,e}:window.onbeforeunload=null,r.a.createElement(I.a,{when:this.props.giveWarning,message:function(t){return e}})}}]),a}(n.Component),tt=a(827),at=a(820),nt=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).handleClickAway=function(){n.setState({anchorEl:null})},n.showTeacherCard=function(e){n.setState({anchorEl:e.currentTarget})},n.state={},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props.editable,t=this.props.role,a=this.props.onChange,n=this.props.group,o="#M"+(this.props.group.courseId+"").padStart(4,"0");return r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(ge,{value:n.courseName,onChange:function(e){return a("courseName",e)},editable:e,style:{flex:"5",type:"headline"},validate:{maxLength:50}}),r.a.createElement(ge,{value:n.subjectId,onChange:function(e){return a("subjectId",e)},layout:{alignment:"right"},style:{type:"headline"},editable:e,options:F()(this.props.subjects,(function(e){return{value:e.id,label:e.name}}))}),!e&&r.a.createElement(ae.a,{color:"secondary",style:{position:"absolute",display:"block",top:"30px",right:"-15px",zIndex:"100"},onClick:this.showTeacherCard},r.a.createElement("div",null,n.teacherName))),r.a.createElement("div",{style:{display:"flex"},className:"ColumnFlexDirectionOnMobile"},r.a.createElement("div",{style:{width:"30%",paddingRight:"15px"}},r.a.createElement("div",null,r.a.createElement(ge,{value:n.period,onChange:function(e){return a("period",e)},editable:e&&"admin"===t,style:{width:"100px",type:"caption"},options:[{label:"Blok 1",value:1},{label:"Blok 2",value:2},{label:"Blok 3",value:3},{label:"Blok 4",value:4}]}),r.a.createElement(ge,{value:n.day,onChange:function(e){return a("day",e)},editable:e&&"admin"===t,style:{width:"150px",type:"caption"},options:["onbekend","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag","zondag"]})),r.a.createElement(ge,{value:n.schoolYear,editable:e&&"admin"===t,onChange:function(e){return a("schoolYear",e)},options:["2018/2019","2019/2020","2020/2021","2021/2022"],style:{width:"100%",type:"caption"}}),r.a.createElement(tt.a,{style:{margin:"15px"}}),r.a.createElement(ge,{value:n.enrollableFor,label:"Doelgroep",onChange:function(e){return a("enrollableFor",e)},style:{width:"100%",labelVisible:!0,type:"caption"},default:"Iedereen",editable:e}),r.a.createElement(ge,{value:n.studyTime,label:"Studietijd",onChange:function(e){return a("studyTime",e)},default:"onbekend",editable:e,style:{labelVisible:!0,unit:"uur",width:"40%",type:"caption"},validate:{type:"integer"}}),r.a.createElement("div",{style:{width:"20px",display:"inline-block"}}),r.a.createElement(ge,{value:o,label:"Modulecode",style:{labelVisible:!0,width:"40%",type:"caption"}})),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(ge,{value:n.courseDescription,validate:{maxLength:440},label:"Omschrijving",style:{labelVisible:!0},onChange:function(e){return a("courseDescription",e)},layout:{area:!0},editable:e}),r.a.createElement(ge,{value:n.remarks,label:"Opmerkingen",onChange:function(e){return a("remarks",e)},style:{labelVisible:!0},default:"Geen voorkennis vereist",layout:{area:!0},editable:e}))),r.a.createElement("br",null),r.a.createElement(at.a,{open:!!this.state.anchorEl,onClose:this.handleClickAway,anchorEl:this.state.anchorEl,anchorOrigin:{horizontal:"left",vertical:"top"}},r.a.createElement(We,{key:n.teacherId,userId:n.teacherId,display:"card",style:{margin:"0px"}})))}}]),a}(n.Component),rt=a(37),ot=a.n(rt),lt=a(5),it={colorPrimary:{backgroundColor:C.palette.primary.main},colorSecondary:{backgroundColor:"#ff8c00"},colorError:{backgroundColor:C.palette.error.main}},st=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){for(var e=this.props.notifications,t=this.props.classes,a="primary",n=e.length>0?e[0].message:"",o=0;o<e.length;o++)if("medium"===e[o].priority||"high"===e[o].priority){a="secondary",n=e[o].message;for(var l=o;l<e.length;l++)if("high"===e[l].priority){a="error",n=e[l].message;break}break}return r.a.createElement(we.a,{title:n},r.a.createElement(be.a,{badgeContent:e.length,classes:t,color:a},this.props.children))}}]),a}(n.Component);var ct=Object(lt.a)(it)(Object(x.b)((function(e,t){return{notifications:e.notifications.filter((function(e){try{return"badge"===e.type&&RegExp(e.scope).test(t.scope)}catch(a){return!0}}))}}),null)(st)),ut=a(821),pt=a(772),dt=a(775),ht=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).selectUser=function(e,t){n.setState({input:t,open:!1,userId:e}),n.props.onChange(e,t)},n.getFittingUsers=function(){var e=new RegExp(n.state.input.toLowerCase()),t=0;return A()(n.props.users,(function(a){var n=e.test(a.displayName.toLowerCase());return n&&t++,n&&t<6})).map((function(e){return r.a.createElement(de.a,{key:e.id+e.displayName,onClick:function(){return n.selectUser(e.id,e.displayName)}},e.displayName)}))},n.handleInput=function(e){n.state.userId&&n.props.onChange(null,null),n.setState({input:e,open:!0,userId:null})},n.myref=n.state={input:"",userId:null,open:!1,id:"SelectUser"+Math.floor(1e3*Math.random())},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllUsers()}},{key:"render",value:function(){var e=this;return r.a.createElement(dt.a,{onClickAway:function(){return e.setState({open:!1})}},r.a.createElement("span",null,r.a.createElement(ge,{label:"Gebruiker",value:this.state.input,editable:!0,onChange:this.handleInput,style:{margin:"normal"},id:this.state.id}),r.a.createElement(pt.a,{open:null==this.state.aliasId&&this.state.open,disablePortal:!0,anchorEl:document.getElementById(this.state.id),style:{position:"fixed",zIndex:"10000"}},r.a.createElement(ne.a,null,r.a.createElement(ut.a,null,this.getFittingUsers())))))}}]),a}(n.Component);var mt=Object(x.b)((function(e){return{users:e.users}}),(function(e){return{getAllUsers:function(){return e((function(e,t){z("user/list","get",null,e,t).then((function(t){e({type:"CHANGE_USERS",users:t})})).catch((function(){}))}))}}}))(ht),gt=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;switch(Object(f.a)(this,a),(n=t.call(this,e)).acceptEnrollment=function(e){n.props.addParticipant(e,n.props.groupId,"student")},n.addNewParticipant=function(e){var t=n.state.newParticipant;n.props.addParticipant(t.userId,n.props.groupId,t.participatingRole),n.setState((function(e){return Object(u.a)(Object(u.a)({},e),{},{newParticipant:{participatingRole:e.newParticipant.participatingRole,userId:null}})}))},n.handleNewParticipantRoleChange=function(e){n.setState((function(t){return Object(u.a)(Object(u.a)({},t),{},{newParticipant:{participatingRole:e,userId:t.newParticipant.userId}})}))},n.handleNewParticipantIdChange=function(e){n.setState((function(t){return Object(u.a)(Object(u.a)({},t),{},{newParticipant:{userId:e,participatingRole:t.newParticipant.participatingRole}})}))},n.handleExternalGroupChange=function(e){n.state.editable||JSON.stringify(e)===JSON.stringify(n.state.group)||n.setState({group:e})},n.handleChange=function(e,t){n.setState({group:Object(u.a)(Object(u.a)({},n.state.group),{},{[e]:t})})},n.handleLessonChange=function(e){var t=n.state.group.lessons||n.props.group.lessons;n.setState({group:Object(u.a)(Object(u.a)({},n.state.group),{},{lessons:Object(u.a)(Object(u.a)({},t),{},{[e.id]:e})})})},n.handleEvaluationChange=function(e){n.setState({group:Object(u.a)(Object(u.a)({},n.state.group),{},{evaluations:e})})},n.handlePresenceChange=function(e){var t=n.state.group.presence||n.props.group.presence;console.log(t),n.setState({group:Object(u.a)(Object(u.a)({},n.state.group),{},{presence:Object(u.a)(Object(u.a)({},t),{},{[e.id]:e})})})},n.setEditable=function(){n.setState({editable:!0})},n.cancel=function(){n.setState({editable:!1,group:n.props.group})},n.save=function(){n.props.setGroup(n.state.group),n.setState({editable:!1})},n.handleTab=function(e,t){n.props.history.push({search:"tab="+n.state.tabs[t]})},n.openCertificate=function(){var e=n.props.group.id,t=n.props.userId;window.open("/certificaat/gebruiker/"+t.toString()+"/groep/"+e.toString(),"_blank")},n.state={editable:!1,group:n.props.group,newParticipant:{participatingRole:"student",userId:null}},n.props.role){case"student":n.props.userIsMemberOfGroup?n.state.tabs=["Lessen","Deelnemers"]:n.state.tabs=["Lessen"];break;case"teacher":n.props.userIsMemberOfGroup?n.state.tabs=["Lessen","Inschrijvingen","Deelnemers","Actief","Beoordeling"]:n.state.tabs=["Inschrijvingen","Deelnemers","Lessen"];break;case"admin":case"grade_admin":n.state.tabs=["Inschrijvingen","Lessen","Deelnemers","Actief","Beoordeling"]}return n}return Object(v.a)(a,[{key:"getCurrentTab",value:function(e){var t=this,a=this.state.group,n=this.props.group.enrollmentIds,o=this.state.group.lessons,l=this.state.group.participantIds,i=this.state.group.evaluations,s=this.state.group.presence,c=this.state.newParticipant;switch(e){case"Inschrijvingen":return null==n?r.a.createElement(ue,null):0===n.length?"Er zijn geen inschrijvingen":r.a.createElement(qe,{userIds:n,actions:"admin"===this.props.role&&this.state.editable?[{label:"Goedkeuren",onClick:this.acceptEnrollment}]:[]});case"Lessen":return null==o?r.a.createElement(ue,null):0===o.length?"Er zijn nog geen lessen bekend":r.a.createElement("table",{style:{width:"100%"}},r.a.createElement("tbody",null,F()(Object(u.a)({0:{id:-1}},o),(function(e){return r.a.createElement(Ze,{lesson:e,key:e.id,role:t.props.role,userIsMemberOfGroup:t.props.userIsMemberOfGroup,editable:t.state.editable,handleChange:t.handleLessonChange})}))));case"Deelnemers":if(null==l)return r.a.createElement(ue,null);var p=!l.includes(c.userId)&&!(null!=n&&n.includes(c.userId))&&c.userId,d=p?"":c.userId?"Deze gebruiker heeft zich al ingeschreven of is al een deelnemer":"Vul een deelnemer in";return r.a.createElement("div",null,"admin"===this.props.role&&this.state.editable&&r.a.createElement("div",null,r.a.createElement(re.a,{variant:"button",color:"primary",style:{margin:"18px 12px"}},"Nieuwe deelnemer:"),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"inline-flex"}},r.a.createElement(mt,{onChange:this.handleNewParticipantIdChange,value:c.userId}),r.a.createElement(ge,{editable:!0,label:"Rol",value:c.participatingRole,options:[{value:"student",label:"Leerling"},{value:"teacher",label:"Expert"}],onChange:this.handleNewParticipantRoleChange}),r.a.createElement(we.a,{title:d,placement:"bottom-start"},r.a.createElement("div",null,r.a.createElement(ae.a,{variant:"contained",disabled:!p,color:"primary",style:{marginTop:"22px"},onClick:this.addNewParticipant},"Voeg toe")))),r.a.createElement(tt.a,null),r.a.createElement("br",null)),0===l.length?"Er zijn nog geen deelnemers toegevoegd":r.a.createElement(qe,{userIds:l}));case"Actief":return null==l||null==o||null==s?r.a.createElement(ue,null):r.a.createElement(Ye,{participantIds:l,lessons:o,presence:s,editable:this.state.editable,handleChange:this.handlePresenceChange});case"Beoordeling":return null==l||null==i?r.a.createElement(ue,null):r.a.createElement(Te,{evaluations:i,groupId:a.id,editable:this.state.editable,handleChange:this.handleEvaluationChange});default:return null}}},{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(){this.getData(),this.handleExternalGroupChange(this.props.group)}},{key:"getData",value:function(){var e=this.state.group,t=this.state.group.enrollmentIds,a=this.state.group.lessons,n=this.state.group.participantIds,r=this.state.group.evaluations,o=this.state.group.presence;switch(this.state.currentTab){case"Inschrijvingen":null==t&&this.props.getGroupEnrollments(e.id);break;case"Lessen":null==a&&this.props.getGroupLessons(e.id);break;case"Deelnemers":null==n&&this.props.getGroupParticipants(e.id);break;case"Actief":null==n&&this.props.getGroupParticipants(e.id),null==a&&this.props.getGroupLessons(e.id),null==o&&this.props.getGroupPresence(e.id);break;case"Beoordeling":null==r&&this.props.getGroupEvaluations(e.id),null==n&&this.props.getGroupParticipants(e.id)}}},{key:"render",value:function(){var e=this.state.editable,t=this.props.role,a=this.state.group;return r.a.createElement(se,null,r.a.createElement(nt,Object.assign({},this.props,{editable:e,group:a,onChange:this.handleChange})),r.a.createElement(tt.a,null),r.a.createElement("div",{style:{display:"flex"}},"student"===t&&r.a.createElement(Ce,{group:a,style:{margin:"20px"}}),("teacher"===t||"admin"===t)&&!e&&r.a.createElement(ae.a,{color:"secondary",variant:"contained",style:{margin:"20px"},onClick:this.setEditable},"Bewerken"),e&&r.a.createElement(ae.a,{color:"secondary",variant:"contained",style:{margin:"20px"},onClick:this.save},"Opslaan"),e&&r.a.createElement(ae.a,{color:"default",style:{margin:"20px"},onClick:this.cancel},"Annuleren"),r.a.createElement("div",{style:{flex:"2"}}),function(e){if(null!=e){var t=e.assesment+"";switch(e.type){case"decimal":return parseFloat(t.replace(/,/g,"."))>=6;case"stepwise":return"G"===t||"V"===t;case"check":return"passed"===t;default:return!1}}return!1}(a.evaluation)&&r.a.createElement(ae.a,{color:"primary",variant:"contained",style:{margin:"20px"},onClick:this.openCertificate},"student"===t?"Certificaat":"Certificaten")),r.a.createElement(Ke.a,{position:"static",color:"default"},r.a.createElement(Qe.a,{value:this.state.tabs.indexOf(this.state.currentTab),onChange:this.handleTab,indicatorColor:"primary",textColor:"primary",variant:"fullWidth",centered:!0},this.state.tabs.map((function(e){return r.a.createElement(Xe.a,{key:e,label:r.a.createElement(ct,{scope:"groep/"+(a.id||"")+"?tab="+e,style:{paddingLeft:"100px"}},e)})})))),r.a.createElement("br",null),r.a.createElement("div",{style:{width:"98%",margin:"auto"}},this.getCurrentTab(this.state.currentTab)),r.a.createElement(et,{giveWarning:this.state.editable}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=ot.a.parse(e.location.search);return Object(u.a)(Object(u.a)({},t),{},{group:Object(u.a)(Object(u.a)({},e.group),t.group),currentTab:a.tab?a.tab:t.tabs[0]})}}]),a}(n.Component),bt=Object(I.h)(gt),ft=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this.props;null==e.subjects&&e.getSubjects(),null!=e.group||e.notExists||e.getGroup(e.groupId)}},{key:"render",value:function(){if(null==this.props.group)return"page"===this.props.display&&this.props.notExists?r.a.createElement(se,null,"De opgevraagde groep bestaat niet"):this.props.notExists?null:r.a.createElement(ue,null);switch(this.props.display){case"page":return r.a.createElement(bt,this.props);case"card":default:return r.a.createElement(He,this.props)}}}]),a}(n.Component);var vt=Object(I.h)(Object(x.b)((function(e,t){var a=(t.match.params.groupId||t.groupId)+"",n=t.display||"page",r=!1,o=null,l=-1!==e.users[e.userId].participatingGroupIds.indexOf(a);return null==e.groups||null==e.groups[a]?null!=a&&-1===e.hasFetched.indexOf("Group.get("+a+")")||(r=!0):o=e.groups[a],{group:o,notExists:r,display:n,role:e.role,groupId:a,subjects:e.subjects,userId:e.userId,userIsMemberOfGroup:l,schoolYear:e.schoolYear}}),(function(e){return{setGroup:function(t){return e(function(e){return function(t,a){function n(e){return{courseId:e.courseId,subjectId:e.subjectId,name:e.courseName,description:e.courseDescription,studyTime:e.studyTime,remarks:e.remarks}}function r(e){return{courseId:e.courseId,groupId:e.id,day:e.day,schoolYear:e.schoolYear,enrollableFor:e.enrollableFor,period:e.period}}var o=n(a().groups[e.id]),l=n(e),i=r(a().groups[e.id]),s=r(e),c=a().groups[e.id].lessons,u=e.lessons,p=a().groups[e.id].presence,d=e.presence,h=a().groups[e.id].evaluations,m=e.evaluations;if(JSON.stringify(o)!==JSON.stringify(l)&&z("course","patch",l,t,a),JSON.stringify(i)!==JSON.stringify(s)&&z("group","patch",s,t,a),JSON.stringify(p)!==JSON.stringify(d)){var g=A()(d,(function(e){return JSON.stringify(e)!==JSON.stringify(p[e.id])}));z("group/presence","patch",{presence:JSON.stringify(F()(g,(function(e){return e}))),groupId:e.id},t,a)}if(null!=u&&JSON.stringify(c)!==JSON.stringify(u)&&z("group/lessons","patch",{lessons:JSON.stringify(F()(u,(function(e){return e})))},t,a),JSON.stringify(h)!==JSON.stringify(m)){for(var b=[],f=0;f<m.length;f++){var v=m[f];JSON.stringify(h[f])!==JSON.stringify(v)&&b.push(v)}z("group/evaluations","patch",{evaluations:JSON.stringify(b),groupId:e.id},t,a)}t({type:"CHANGE_GROUP",group:e})}}(t))},getGroup:function(t){return e(function(e){return function(t,a){z("group","post",{groupId:e},t,a).then((function(a){t({type:"CHANGE_GROUPS",groups:{[e]:a}})})).catch((function(){}))}}(t))},getGroupEnrollments:function(t){return e(function(e){return function(t,a){z("group/enrollments","post",{groupId:e},t,a).then((function(a){t({type:"CHANGE_GROUP",group:{id:e,enrollmentIds:Object.keys(a).map((function(e){return parseInt(e,10)}))}}),t({type:"CHANGE_USERS",users:a})})).catch((function(){}))}}(t))},getGroupLessons:function(t){return e(function(e){return function(t,a){z("group/lessons","post",{groupId:e},t,a).then((function(a){t({type:"CHANGE_GROUP",group:{id:e,lessons:a}})}))}}(t))},getGroupParticipants:function(t){return e(function(e){return function(t,a){z("group/participants","post",{groupId:e},t,a).then((function(a){t({type:"CHANGE_GROUP",group:{id:e,participantIds:Object.keys(a).map((function(e){return parseInt(e,10)}))}}),t({type:"CHANGE_USERS",users:a})}))}}(t))},getGroupEvaluations:function(t){return e(function(e){return function(t,a){z("group/evaluations","post",{groupId:e},t,a,!0).then((function(a){t({type:"CHANGE_GROUP",group:{id:e,evaluations:a}})}))}}(t))},getGroupPresence:function(t){return e(function(e){return function(t,a){z("group/presence","post",{groupId:e},t,a).then((function(a){t({type:"CHANGE_GROUP",group:{id:e,presence:a}})}))}}(t))},getSubjects:function(){return e(V())},addParticipant:function(t,a,n){return e(function(e,t,a){return function(n,r){return z("group/participants","patch",{userId:e,groupId:t,participatingRole:a},n,r).then((function(){var a=r().groups[t].enrollmentIds.indexOf(e);n({type:"CHANGE_GROUP",group:{id:t,enrollmentIds:[].concat(Object(c.a)(r().groups[t].enrollmentIds.slice(0,a)),Object(c.a)(r().groups[t].enrollmentIds.slice(a+1)))}}),n({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"low",type:"bar",message:"Deelnemer toegevoegd, refresh om te zien",scope:"*"}})}))}}(t,a,n))},addNotification:function(t){return e(Y(t))}}}))(ft)),yt=a(831),Et=a(774),jt=a(771),Ot=a(830),xt=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).handleSortChange=function(e){n.props.history.push({search:"vak=".concat(e,"&blok=").concat(n.state.period,"&leerjaar=").concat(n.state.schoolYear)})},n.handlePeriodChange=function(e){n.props.history.push({search:"vak=".concat(n.state.subject,"&blok=").concat(e,"&leerjaar=").concat(n.state.schoolYear)})},n.handleYearChange=function(e){n.props.history.push({search:"vak=".concat(n.state.subject,"&blok=").concat(n.state.period,"&leerjaar=").concat(e)})},n.state={period:e.currentPeriod,leerjaar:e.schoolYear,subject:null},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.props.getSubjects(),this.props.getGroups()}},{key:"getGroupsPerSubject",value:function(e){return A()(this.props.groups,(function(t){return e===t.subjectName}))}},{key:"getMenuItem",value:function(e,t){var a=this,n=this.state.subject===t?"primary":"initial";return r.a.createElement(jt.a,{button:!0,onClick:function(){return a.handleSortChange(t)},key:e},r.a.createElement(Ot.a,null,r.a.createElement(re.a,{variant:"button",color:n,style:{minWidth:"150px"}},e)))}},{key:"getMenuItems",value:function(){var e=this,t=this.props.role,a=F()(this.props.subjects,(function(e){return e}));"admin"!==t&&(a=a.filter((function(e){return"@"!==e.name[0]})));var n=a.map((function(t){return e.getMenuItem(t.name,t.name)}));return"student"===t&&n.unshift(this.getMenuItem("Ingeschreven","enrolled")),n}},{key:"render",value:function(){var e,t=this;return"enrolled"===this.state.subject?null==this.props.enrolledGroupsIds?(e=r.a.createElement(ue,null),this.props.getEnrolLments()):(e=this.props.enrolledGroupsIds.map((function(e){return r.a.createElement(vt,{key:e,groupId:e,display:"card"})})),0===this.props.enrolledGroupsIds.length&&(e=r.a.createElement("div",{style:{margin:"15px"}},"Je hebt je nog niet ingeschreven."))):(null!=this.props.subjects&&null!=this.props.groups&&this.props.enrolledGroups!==[]||(e=r.a.createElement(ue,null)),e=this.getGroupsPerSubject(this.state.subject).filter((function(e){return null!=e})).filter((function(e){return"all"===t.state.period||e.period+""===t.state.period})).filter((function(e){return"all"===t.state.schoolYear||e.schoolYear+""===t.state.schoolYear})).sort((function(e,t){return e.period-t.period})).map((function(e){return r.a.createElement(vt,{key:e.id,groupId:e.id,display:"card"})}))),r.a.createElement(se,null,r.a.createElement(ne.a,{style:{position:"relative"}},r.a.createElement(yt.a,{style:{display:"flex"}},r.a.createElement(re.a,{variant:"subtitle1",color:"textSecondary",style:{flex:"2 1 auto"}},"Schrijf je in voor modules"),r.a.createElement(ge,{label:"blok",value:this.state.period,editable:!0,style:{flex:"none"},options:[{label:"Alle",value:"all"},{label:"Blok 1",value:"1"},{label:"Blok 2",value:"2"},{label:"Blok 3",value:"3"},{label:"Blok 4",value:"4"}],onChange:this.handlePeriodChange}),r.a.createElement(ge,{label:"leerjaar",style:{flex:"none"},value:this.state.schoolYear,editable:!0,options:[{label:"Alle",value:"all"},{label:"2016/2017",value:"2016/2017"},{label:"2017/2018",value:"2017/2018"},{label:"2018/2019",value:"2018/2019"},{label:"2019/2020",value:"2019/2020"},{label:"2020/2021",value:"2020/2021"},{label:"2021/2022",value:"2021/2022"}],onChange:this.handleYearChange}))),r.a.createElement("div",{style:{display:"flex"},className:"ColumnFlexDirectionOnMobile"},r.a.createElement(ne.a,null,r.a.createElement(Et.a,{component:"nav",style:{flex:1}},this.getMenuItems())),r.a.createElement("div",{style:{padding:"12px"}},e)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=ot.a.parse(e.location.search),n=a.blok,r=a.vak,o=a.leerjaar;return r||null==e.subjects||(r=e.subjects[Object.keys(e.subjects)[0]].name),n||(n=e.enrollmentPeriod+""),o||(o=e.schoolYear),Object(u.a)(Object(u.a)({},t),{},{period:n,subject:r,schoolYear:o})}}]),a}(n.Component);var kt=Object(x.b)((function(e){return{role:e.role,enrollmentPeriod:e.enrollmentPeriod,enrollableGroups:e.enrollableGroups,groups:e.groups,subjects:e.subjects,schoolYear:e.schoolYear,enrolledGroupsIds:e.users[e.userId].enrollmentIds}}),(function(e){return{getSubjects:function(){return e(V())},getGroups:function(){return e(U())},getEnrolLments:function(){return e(W())}}}))(xt),Ct=a(832),It=a(833),St=a(834),wt=a(835),Nt=a(836),Pt=a(819),At=a(837),Dt=a(355),Gt=a.n(Dt),Mt={users:"Hoofdrol",evaluations:"Groepcode",enrollments:"Inschrijfperiode",courseIds:"Niet splitsen"},Lt=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).handleShowData=function(){n.setState({hasFetched:!0});var e=Mt[n.state.data];n.fetchData(n.state.data).then((function(t){return n.setState({splitOn:e,tables:n.splitTable(t,e),tableSortColumns:Array(t.length)})}))},n.handleFilterChange=function(e){n.props.history.push({search:"data="+e})},n.handleSplitChange=function(e){var t=n.state.tables,a=[n.state.tables[0][0]].concat(Object(c.a)(t.map((function(e){return e.slice(1,e.length)})).flat(1)));n.setState({splitOn:e,tables:n.splitTable(a,e)})},n.sort=function(e){var t=n.state.tables[e],a=n.state.tableSortColumns[e],r=n.state.tableSortDirections[e];t=[t[0]].concat(t.slice(1,t.length).sort((function(e,t){e=e[a];var n=(null==(t=t[a]))-(null==e)||+(e>t)||-(e<t);return"asc"===r?n:-n}))),n.setState((function(a){return{tables:[].concat(Object(c.a)(a.tables.slice(0,e)),[t],Object(c.a)(a.tables.slice(e+1)))}}))},n.handleSortChange=function(e,t){var a=n.state;n.setState({tableSortColumns:Object(u.a)(Object(u.a)({},a.tableSortColumns),{},{[e]:t}),tableSortDirections:Object(u.a)(Object(u.a)({},a.tableSortDirections),{},{[e]:"desc"===a.tableSortDirections[e]&&a.tableSortColumns[e]===t?"asc":"desc"})},(function(){return n.sort(e)}))},n.splitTable=function(e,t){var a=e[0].findIndex((function(e){return e===t}));if(a<0)return[e];for(var n=[[e[0],e[1]]],r=function(t){var r=n.findIndex((function(n){return n[1][a]===e[t][a]}));r<0&&(n.push([e[0]]),r=n.length-1),n[r].push(e[t])},o=2;o<e.length;o++)r(o);return n},n.fetchData=function(e){return G.a.ajax({url:"api/function/data",type:"post",data:{table:e,secureLogin:n.props.secureLogin},dataType:"json"})},n.downloadTables=function(){for(var e=n.state.tables,t=new Gt.a.Workbook,a=e[0][0].findIndex((function(e){return e===n.state.splitOn})),r=0;r<e.length;r++){var o=n.getValidWorksheetName(e[r][1][a]),l=t.addWorksheet(o);l.addRows(e[r]);for(var i=1;i<=e[r][0].length;i++)l.getColumn(i).width=e[r][0][i-1].length<10?10:e[r][0][i-1].length+2}var s={users:"Gebruikers ",enrollments:"Inschrijvingen ",evaluations:"Beoordelingen ",courseIds:"Modulecodes "}[n.state.data]+""+(new Date).toLocaleDateString()+".xlsx";n.downloadWorkbook(t,s)},n.getValidWorksheetName=function(e){(e+="").length>31&&(e=e.substring(0,30),console.log("Worksheet name length cannot exceed 31 characters. Name has been shortened."));var t=/(\\|\/|\*|\?|:|\[|\])/g;return t.test(e)&&(e=e.replace(t,"_"),console.log("Worksheet name cannot include one of the following chracters: \\, /, *, ?, :, [, ]. \n Illegal characters have been changed to _ ")),null!=e&&""!==e||(e="_leeg_"),e},n.downloadWorkbook=function(e,t){e.xlsx.writeBuffer({base64:!0}).then((function(e){var a=document.createElement("a"),n=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=URL.createObjectURL(n);a.href=r,a.download=t,document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(r)}),0)})).catch((function(e){console.log("Something went wrong with downloading the excel file: "+e.message)}))},n.forceCellWidth=function(e){switch(e){case"Vaknaam":case"Weergavenaam":return"200px";case"Modulenaam":return"300px";case"Uitleg beoordeling":return"200px";default:return"auto"}},n.state={tables:null,tableSortColumns:{},tableSortDirections:{},data:"enrollments",hasFetched:!1,splitOn:"Niet splitsen"},n}return Object(v.a)(a,[{key:"render",value:function(){var e,t=this;return e=null==this.state.tables?this.state.hasFetched?r.a.createElement(ue,{style:{marginTop:"100px"}}):r.a.createElement(re.a,{variant:"body1",style:{marginTop:"100px"}},'Klik op "Laad gegevens" om de gegevens te tonen'):this.state.tables.map((function(e,a){return r.a.createElement(Ct.a,{key:a,style:{marginTop:"100px"}},r.a.createElement(It.a,null,r.a.createElement(St.a,{key:0,style:{height:"auto"}},e[0].map((function(e,n){return r.a.createElement(wt.a,{key:n,style:{color:"black",backgroundColor:"#e0e0e0",fontSize:13,top:0}},r.a.createElement(we.a,{title:"Sorteer",enterDelay:300,placement:"bottom-start"},r.a.createElement(Ne.a,{active:t.state.tableSortColumns[a]===n,direction:t.state.tableSortDirections[a],onClick:function(e){return t.handleSortChange(a,n)},style:{zIndex:0}},r.a.createElement("span",{style:{width:t.forceCellWidth(e)}},e))))})))),r.a.createElement(Nt.a,null,e.filter((function(e,t){return t>0})).map((function(e,t){return r.a.createElement(St.a,{key:t+1,style:{height:"auto"}},e.map((function(e,t){return r.a.createElement(wt.a,{key:t},e)})))}))))})),r.a.createElement(se,null,r.a.createElement(Se,null,r.a.createElement(ne.a,{elevation:2,style:{zIndex:1,position:"absolute",width:"85%"}},r.a.createElement(yt.a,{style:{display:"flex"}},r.a.createElement(re.a,{variant:"subtitle1",color:"textSecondary",style:{flex:"6"}},"Gegevens"),r.a.createElement(ge,{label:"Gegevens van",value:this.state.data,editable:!0,options:[{label:"Beoordelingen",value:"evaluations"},{label:"Gebruikers",value:"users"},{label:"Inschrijvingen",value:"enrollments"},{label:"Module codes",value:"courseIds"}],style:{flex:"3"},onChange:this.handleFilterChange}),r.a.createElement(ae.a,{variant:"outlined",onClick:this.handleShowData,style:{flex:"1"}},"Laad gegevens"),r.a.createElement(ge,{value:this.state.splitOn,label:"Splits op",options:this.state.tables?[].concat(Object(c.a)(this.state.tables[0][0]),["Niet splitsen"]):["Niet splitsen"],editable:this.state.hasFetched,onChange:this.handleSplitChange,style:{margin:"normal",flex:"3"}}),r.a.createElement(Pt.a,{onClick:this.downloadTables},r.a.createElement(At.a,null)))),e))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=ot.a.parse(e.location.search);return Object(u.a)(Object(u.a)({},t),{data:a.data?a.data:"enrollments"})}}]),a}(n.Component);var Tt=Object(I.h)(Object(x.b)((function(e){return{secureLogin:e.secureLogin}}),null)(Lt)),Ft=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).handleFilterChange=function(e){n.props.history.push({search:"week="+e}),n.fetchSchedules(e)},n.state={schedules:null},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.fetchSchedules(this.state.week)}},{key:"fetchSchedules",value:function(e){var t=this;return G.a.ajax({url:"api/function/taxi",type:"post",data:{week:e},dataType:"json"}).then((function(e){return t.setState({schedules:e})}))}},{key:"render",value:function(){var e;return e=null==this.state.schedules?r.a.createElement(ue,null):this.state.schedules.map((function(e,t){return r.a.createElement("div",{style:{width:"80%",margin:"auto"},className:"taxiScheduleHolder",key:t,dangerouslySetInnerHTML:{__html:e}})})),r.a.createElement(se,null,r.a.createElement(ne.a,{elevation:2,style:{position:"relative"}},r.a.createElement(yt.a,{style:{display:"flex"}},r.a.createElement(re.a,{variant:"subtitle1",color:"textSecondary",style:{flex:"2 1 auto"}},"Taxischema"),r.a.createElement(ge,{label:"week",value:this.state.week,editable:!0,options:[0,1,2,3,4,5,6,7,8].map((function(e){return{label:0===e?"Basisrooster":"Week "+e,value:e+""}})),onChange:this.handleFilterChange}))),e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=ot.a.parse(e.location.search);return Object(u.a)(Object(u.a)({},t),{week:a.week?a.week:"0"})}}]),a}(n.Component),Ht=a(356),zt=a.n(Ht),_t=a(151),Vt=a.n(_t),Ut=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).logoClick=function(){e.props.history.push("/")},e}return Object(v.a)(a,[{key:"render",value:function(){return r.a.createElement(Ke.a,{className:"Header"},r.a.createElement(yt.a,null,r.a.createElement(Pt.a,{color:"inherit","aria-label":"Menu",onClick:this.props.toggleMenu,style:{position:"absolute"}},r.a.createElement(zt.a,null)),r.a.createElement("img",{src:"/images/logo_qhighschool_white.svg",alt:"QHighschool Logo",style:{height:"60%",margin:"auto",maxHeight:"40px",cursor:"pointer"},onClick:this.logoClick}),r.a.createElement(Et.a,{color:"inherit",style:{right:20,position:"absolute"},onClick:this.handleClick},r.a.createElement(Vt.a,{style:{transform:"scale(1.5)",marginRight:"10px",float:"left"}}),r.a.createElement("span",{className:"HiddenOnMobile"},this.props.displayName))))}}]),a}(n.Component);var Bt=Object(I.h)(Object(x.b)((function(e){return null!=e.userId?{displayName:e.users[e.userId].displayName,userId:e.userId}:{displayName:"",userId:e.userId}}),(function(e){return{toggleMenu:function(){return e(Z())}}}))(Ut)),Rt=a(838),Wt=a(776),Yt=a(357),Jt=a.n(Yt),Zt=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).removeNotification=function(t){e.props.removeNotification(e.props.notifications[t])},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.props.notifications.map((function(t,a){var n;switch(t.priority){case"high":n=C.palette.error.main;break;case"medium":n="#ff8c00";break;case"low":default:n=C.palette.primary.main}return r.a.createElement(Rt.a,{key:a,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:!0,style:{position:"relative"},TransitionProps:{direction:"left"}},r.a.createElement(Wt.a,{style:{background:n,marginBottom:"4px"},message:r.a.createElement("span",{id:"message-id"},t.message),action:t.sticky?[]:[r.a.createElement(Pt.a,{key:"close",onClick:function(){e.removeNotification(a)}},r.a.createElement(Jt.a,null))]}))}));return r.a.createElement("div",{style:{position:"fixed",bottom:0,right:0,width:"auto",zIndex:10}},t)}}]),a}(n.Component);var $t=Object(I.h)(Object(x.b)((function(e,t){return{notifications:e.notifications.filter((function(e){try{return"bar"===e.type&&new RegExp(e.scope).test(t.location.pathname)}catch(a){return!0}}))}}),(function(e){return{removeNotification:function(t){return e(J(t))}}}))(Zt)),qt=a(839),Kt=a(360),Qt=a.n(Kt),Xt=a(358),ea=a.n(Xt),ta=a(359),aa=a.n(ta),na=a(362),ra=a.n(na),oa=a(363),la=a.n(oa),ia=a(364),sa=a.n(ia),ca=a(361),ua=a.n(ca),pa=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;switch(Object(f.a)(this,a),(n=t.call(this,e)).state={},n.props.role){case"student":n.state.pages=["aanbod","portfolio","profiel","loguit"];break;case"teacher":n.state.pages=["aanbod","groepen","profiel","loguit"];break;case"admin":n.state.pages=["groepen","aanbod","profiel","gegevens","taxi","beheer","loguit"];break;case"grade_admin":n.state.pages=["aanbod","groepen","gegevens","taxi","profiel","loguit"];break;default:n.state.pages=["aanbod","profiel","loguit"]}return n}return Object(v.a)(a,[{key:"logout",value:function(){return G.a.ajax({url:"/auth/logout",type:"get",dataType:"json"}).then((function(){document.location.reload()}))}},{key:"onClick",value:function(e){"loguit"===e?this.logout():this.props.history.push("/"+e)}},{key:"getIcon",value:function(e,t){var a="black";switch(C.palette[t]&&(a=C.palette[t].main),e){case"Assignment":return r.a.createElement(ea.a,{style:{color:a}});case"Group":return r.a.createElement(aa.a,{style:{color:a}});case"Assessment":return r.a.createElement(Qt.a,{style:{color:a}});case"Person":return r.a.createElement(Vt.a,{style:{color:a}});case"ViewColumn":return r.a.createElement(ua.a,{style:{color:a}});case"Exit":return r.a.createElement(ra.a,{color:"secondary"});case"Taxi":return r.a.createElement(la.a,{style:{color:a}});case"Beheer":return r.a.createElement(sa.a,{style:{color:a}});default:return null}}},{key:"getItem",value:function(e,t){var a=this,n="/"+e.id===this.props.location.pathname,o={};e.bottom&&(o.position="absolute",o.bottom="0px");var l=n?"primary":"inherit",i=r.a.createElement(qt.a,null,r.a.createElement(ct,{scope:e.id},this.getIcon(e.icon,l)));return r.a.createElement(jt.a,{key:t,button:!0,onClick:function(){return a.onClick(e.id)},style:o},i,r.a.createElement(re.a,{variant:"button",color:l,className:"HiddenOnMobile"},e.title))}},{key:"render",value:function(){var e=this,t=[{id:"aanbod",title:"Aanbod",icon:"Assignment"},{id:"groepen",title:"Mijn groepen",icon:"Group"},{id:"portfolio",title:"Portfolio",icon:"Assessment"},{id:"gegevens",title:"Gegevens",icon:"ViewColumn"},{id:"taxi",title:"Taxi",icon:"Taxi"},{id:"beheer",title:"Beheer",icon:"Beheer"}].filter((function(t){return-1!==e.state.pages.indexOf(t.id)})).map(this.getItem.bind(this)),a=[{id:"profiel",title:"Profiel",icon:"Person"},{id:"loguit",title:"Log uit",icon:"Exit"}].filter((function(t){return-1!==e.state.pages.indexOf(t.id)})).map(this.getItem.bind(this));return r.a.createElement(ne.a,{elevation:8,className:"Menu"},r.a.createElement(Et.a,{component:"nav",style:{height:"100%"}},t,r.a.createElement("div",{style:{position:"absolute",bottom:"20px",width:"100%"}},a)))}}]),a}(n.Component);var da=Object(I.h)(Object(x.b)((function(e){return null!=e.userId?{displayName:e.users[e.userId].displayName,userId:e.userId,role:e.role}:{displayName:"",userId:e.userId,role:e.role}}),null)(pa)),ha=a(365),ma=a.n(ha),ga=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).handlePeriodChange=function(e){n.props.history.push({search:"blok=".concat(e,"&leerjaar=").concat(n.state.leerjaar)})},n.handleYearChange=function(e){n.props.history.push({search:"blok=".concat(n.state.period,"&leerjaar=").concat(e)})},n.openCertificate=function(){window.open("/certificaat/gebruiker/"+n.props.userId.toString(),"_blank")},n.state={period:e.currentPeriod+"",leerjaar:"student"===e.role?"all":e.schoolYear},n}return Object(v.a)(a,[{key:"orderGroups",value:function(e,t){var a={};return ma()(e,(function(e){a[t(e)]||(a[t(e)]=[]),a[t(e)].push(e)})),F()(a,this.getOrder)}},{key:"getOrder",value:function(e,t){return e=F()(e,(function(e){return r.a.createElement(vt,{key:e.id,groupId:e.id,display:"card"})})),r.a.createElement("div",{key:t,style:{padding:"10px"}},r.a.createElement(ge,{value:t,style:{type:"headline",color:"secondary"},layout:{area:!0}}),e,r.a.createElement(tt.a,{style:{marginTop:"20px"}}))}},{key:"render",value:function(){var e=this;"student"===this.props.role&&[{label:"Alle",value:"all"},{label:"Blok 1",value:"period1"},{label:"Blok 2",value:"period2"},{label:"Blok 3",value:"period3"},{label:"Blok 4",value:"period4"}].splice(1,0,{label:"Ingeschreven",value:"enrolled"}),this.props.groups||this.props.getParticipatingGroups(),this.props.enrollmentIds||this.props.getEnrolLments();var t,a=this.props.enrollmentIds||[];if("enrolled"!==this.state.filter&&(a=this.props.participatingGroupIds.filter((function(e){return-1===a.indexOf(e)})).concat(a)),null==this.props.groups||0===Object.keys(this.props.groups).length)t=r.a.createElement(ue,null);else{var n=a.map((function(t){return e.props.groups[t]})).filter((function(e){return null!=e})).filter((function(t){return"all"===e.state.period||t.period+""===e.state.period})).filter((function(t){return"all"===e.state.schoolYear||t.schoolYear+""===e.state.schoolYear}));t=this.orderGroups(n,(function(e){return e.subjectName}))}return r.a.createElement(se,null,r.a.createElement(ne.a,{elevation:2,style:{position:"relative"}},r.a.createElement(yt.a,{style:{display:"flex"}},r.a.createElement(re.a,{variant:"subtitle1",color:"textSecondary",style:{flex:"2 1 auto"}},"student"===this.props.role?"Portfolio":"Mijn groepen"),r.a.createElement(ge,{label:"blok",value:this.state.period,editable:!0,style:{flex:"none"},options:[{label:"Alle",value:"all"},{label:"Blok 1",value:"1"},{label:"Blok 2",value:"2"},{label:"Blok 3",value:"3"},{label:"Blok 4",value:"4"}],onChange:this.handlePeriodChange}),r.a.createElement(ge,{label:"leerjaar",style:{flex:"none"},value:this.state.schoolYear,editable:!0,options:[{label:"Alle",value:"all"},{label:"2016/2017",value:"2016/2017"},{label:"2017/2018",value:"2017/2018"},{label:"2018/2019",value:"2018/2019"},{label:"2019/2020",value:"2019/2020"},{label:"2020/2021",value:"2020/2021"},{label:"2021/2022",value:"2021/2022"}],onChange:this.handleYearChange}))),t)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=ot.a.parse(e.location.search),n=a.blok,r=a.leerjaar;return n||(n="student"===e.role?"all":e.currentPeriod+""),r||(r="student"===e.role?"all":e.schoolYear),Object(u.a)(Object(u.a)({},t),{},{period:n,schoolYear:r})}}]),a}(n.Component);var ba=Object(x.b)((function(e){return{groups:e.groups,participatingGroupIds:e.users[e.userId].participatingGroupIds,enrollmentIds:e.users[e.userId].enrollmentIds,role:e.role,schoolYear:e.schoolYear,currentPeriod:e.currentPeriod,userId:e.userId}}),(function(e){return{getSubjects:function(){return e(V())},getGroups:function(){return e(U())},getEnrolLments:function(){return e(W())},getParticipatingGroups:function(){return e(B())}}}))(ga),fa=["alias","vak","module","groep"],va=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).mapPageToListItem=function(e){return r.a.createElement(jt.a,{button:!0,onClick:function(){return n.handlePageChange(e)},key:e},r.a.createElement(Ot.a,null,r.a.createElement(re.a,{variant:"button",color:e===n.state.page?"primary":"initial",style:{minWidth:"150px"}},e.charAt(0).toUpperCase()+e.slice(1))))},n.handlePageChange=function(e){n.props.history.push({search:"page="+e})},n.getContent=function(){switch(n.state.page){case"alias":return r.a.createElement(ya,{dispatch:n.props.dispatch});case"vak":return r.a.createElement(Ea,{addSubject:n.props.addSubject});case"module":return r.a.createElement(ja,{addCourse:n.props.addCourse,subjects:n.props.subjects});case"groep":return r.a.createElement(Oa,{addGroup:n.props.addGroup,courses:n.state.courses})}},n.state={courses:[]},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;G.a.ajax({url:"api/course/list",type:"get",data:{},dataType:"json"}).then((function(t){e.setState({courses:t})})),this.props.getSubjects()}},{key:"render",value:function(){return r.a.createElement(se,null,r.a.createElement(Se,null,r.a.createElement(ne.a,{elevation:2,style:{position:"relative"}},r.a.createElement(yt.a,{style:{display:"flex"}},r.a.createElement(re.a,{variant:"subtitle1",color:"textSecondary",style:{flex:"2 1 auto"}},"Beheer"))),r.a.createElement("div",{style:{display:"flex"},className:"ColumnFlexDirectionOnMobile"},r.a.createElement(ne.a,{elevation:2},r.a.createElement(Et.a,{component:"nav",style:{flex:1}},fa.map(this.mapPageToListItem))),r.a.createElement("div",{style:{padding:"12px"}},this.getContent()))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=ot.a.parse(e.location.search);return Object(u.a)(Object(u.a)({},t),{page:a.page?a.page:fa[0]})}}]),a}(n.Component),ya=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={aliasId:null},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{margin:"10px 0"}},r.a.createElement(mt,{onChange:function(t){return e.setState({aliasId:t})}}),r.a.createElement("br",null),r.a.createElement(ae.a,{variant:"contained",color:"primary",disabled:null==this.state.aliasId,onClick:function(){return e.props.dispatch((t=e.state.aliasId,function(e,a){z("function/alias","post",{userId:t},e,a).then((function(){document.location.reload()}))}));var t}},"Login in met alias"))}}]),a}(n.Component),Ea=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={name:"",description:""},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.state;return r.a.createElement("div",null,r.a.createElement(ge,{label:"Naam",value:t.name,onChange:function(t){return e.setState({name:t})},editable:!0,validate:{maxLength:50}}),r.a.createElement("br",null),r.a.createElement(ge,{label:"Omschrijving",value:t.description,onChange:function(t){return e.setState({description:t})},editable:!0,validate:{maxLength:440},layout:{area:!0}}),r.a.createElement(ae.a,{variant:"contained",color:"primary",style:{height:"37px",margin:"12px"},onClick:function(){e.props.addSubject(t.name,t.description).then(te)}},"Voeg toe"))}}]),a}(n.Component),ja=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={name:"",subjectId:""},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.state;return r.a.createElement("div",null,r.a.createElement(ge,{label:"Naam",value:t.name,onChange:function(t){return e.setState({name:t})},editable:!0,validate:{maxLength:50},style:{flex:"1"}}),r.a.createElement("br",null),r.a.createElement(ge,{value:t.subjectId,subjectId:!0,label:"Vak",onChange:function(t){return e.setState({subjectId:t})},editable:!0,options:F()(this.props.subjects,(function(e){return{value:e.id,label:e.name}})),style:{minWidth:"200px"}}),r.a.createElement("br",null),r.a.createElement(ae.a,{variant:"contained",color:"primary",style:{height:"37px",margin:"12px"},onClick:function(){e.props.addCourse(t.name,t.subjectId).then(te)}},"Voeg toe"))}}]),a}(n.Component),Oa=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={courseId:null,teacherId:null},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.state;return r.a.createElement("div",null,r.a.createElement(ge,{value:t.courseId,label:"Module",onChange:function(t){return e.setState({courseId:t})},editable:!0,search:!0,options:this.props.courses.map((function(e){return{label:e.name,value:e.id}})),style:{minWidth:"200px"}}),r.a.createElement("br",null),r.a.createElement(mt,{value:t.teacherId,onChange:function(t){return e.setState({teacherId:t})}}),r.a.createElement("br",null),r.a.createElement(ae.a,{variant:"contained",color:"primary",style:{height:"37px",margin:"12px"},onClick:function(){e.props.addGroup(t.courseId,t.teacherId).then(te)}},"Voeg toe"))}}]),a}(n.Component);var xa=Object(x.b)((function(e){return{subjects:e.subjects,groups:e.groups}}),(function(e){return{addSubject:function(){var t=Object(N.a)(w.a.mark((function t(a,n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(q(a,n)));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),addCourse:function(){var t=Object(N.a)(w.a.mark((function t(a,n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(K(a,n)));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),addGroup:function(){var t=Object(N.a)(w.a.mark((function t(a,n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(Q(a,n)));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),addNotification:function(t){return e(Y(t))},getSubjects:function(){return e(V())},dispatch:e}}))(va),ka=a(842),Ca=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.user;return r.a.createElement("div",null,r.a.createElement(re.a,{variant:"h6",color:"secondary"},"Persoonlijke gegevens"),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement(ge,{value:"Naam",layout:{td:!0},style:{margin:"none"}}),r.a.createElement(ge,{value:t.displayName,style:{margin:"none"},editable:e.editableAdmin,onChange:function(t){return e.onChange("displayName",t)},layout:{td:!0,area:!0}})),r.a.createElement("tr",null,r.a.createElement(ge,{value:"Voorkeursemail",layout:{td:!0},style:{margin:"none"}}),r.a.createElement(ge,{validate:{type:"email"},value:t.preferedEmail,style:{margin:"none"},editable:e.editableUser,onChange:function(t){return e.onChange("preferedEmail",t)},layout:{td:!0,area:!0}})),r.a.createElement("tr",null,r.a.createElement(ge,{value:"Telefoonnummer",layout:{td:!0},style:{margin:"none"}}),r.a.createElement(ge,{validate:{type:"phoneNumber"},value:"06 "+(t.phoneNumber?t.phoneNumber.replace(/^06[ ]*/,""):""),layout:{td:!0,area:!0},style:{margin:"none"},editable:e.editableUser,onChange:function(t){return e.onChange("phoneNumber",t.slice(0,11))}})))))}}]),a}(n.Component),Ia=a(152),Sa={role:{student:{level:["Praktijkschool","ISK","n.v.t.","Jan Ligthart","OPUS","MAVO","VMBO","HAVO","VWO"]},teacher:{level:["-"],profile:["n.v.t."],year:["n.v.t."]},admin:{level:["-"],profile:["n.v.t."],year:["n.v.t."]},grade_admin:{level:["-"],profile:["n.v.t."],year:["n.v.t."]}},school:{"Beekdal Lyceum":{level:["HAVO","VWO","-"],schoolLocation:["Bernhardlaan 49, Arnhem"]},"Candea College":{level:["VMBO","MAVO","HAVO","VWO","-"],schoolLocation:["Eltensestraat 8, Duiven","Saturnus 1, Duiven"]},"Centraal Bureau":{level:["n.v.t.","-"],schoolLocation:["Saturnus 5, Duiven"],profile:["n.v.t."],year:["n.v.t."]},"Lyceum Elst":{level:["MAVO","HAVO","VWO","-"],schoolLocation:["Auditorium 3, Elst"]},"Liemers College":{level:["VMBO","MAVO","HAVO","VWO","-"],schoolLocation:["Dijksestraat 12, Didam","Stationspoort 36, Zevenaar","Heerenm\xe4ten 6, Zevenaar","Zonegge 07-09, Zevenaar"]},"Lorentz Lyceum":{level:["HAVO","VWO","OPUS","n.v.t.","-"],schoolLocation:["Parnassusstraat 20, Arnhem","Groningensingel 1245, Arnhem"]},"Maarten van Rossem":{level:["VMBO","-"],schoolLocation:["Groningensingel 1235, Arnhem"]},"Montessori College Arnhem":{level:["MAVO","HAVO","VWO","-"],schoolLocation:["Utrechtseweg 174, Arnhem"]},"Olympus College":{level:["ISK","Jan Ligthart","MAVO","HAVO","VWO","-"],schoolLocation:["Olympus 11, Arnhem"]},"Produs Praktijkonderwijs":{level:["Praktijkschool","-"],schoolLocation:["Leidenweg 60, Arnhem"]},"Stedelijk Gymnasium Arnhem":{level:["VWO","-"],schoolLocation:["Thorbeckestraat 17, Arnhem"]},Symbion:{level:["Praktijkschool","-"],schoolLocation:["Hoge Witteveld 2, Didam"]},"Vmbo 't Venster":{level:["ISK","VMBO","MAVO","-"],schoolLocation:["Thomas a Kempislaan 82, Arnhem"]},"Het Westeraam":{level:["VMBO","-"],schoolLocation:["Auditorium 6, Elst"]}},level:{"-":{},Praktijkschool:{year:["1","2","3","4","5","6"],profile:["n.v.t."]},ISK:{year:["n.v.t."],profile:["n.v.t."]},VMBO:{year:["1","2","3","4"],profile:["Bouwen, wonen en interieur","Dienstverlening en producten","Economie en ondernemen","Groen","Horeca, bakkerij en recreatie","Maritiem en techniek","Media, vormgeving en ICT","Mobiliteit en transport","Produceren, installeren en energie","Zorg en welzijn","n.v.t."]},MAVO:{year:["1","2","3","4"],profile:["Economie","Landbouw (Groen)","Techniek","Zorg en welzijn","n.v.t."]},HAVO:{year:["1","2","3","4","5"],profile:["Cultuur en Maatschappij","Economie en Maatschappij","Natuur en Gezondheid","Natuur en Techniek","Natuur en Techniek & Natuur en Gezondheid","Cultuur en Maatschappij & Economie en Maatschappij","n.v.t."]},VWO:{year:["1","2","3","4","5","6"],profile:["Cultuur en Maatschappij","Economie en Maatschappij","Natuur en Gezondheid","Natuur en Techniek","Natuur en Techniek & Natuur en Gezondheid","Cultuur en Maatschappij & Economie en Maatschappij","n.v.t."]},"Jan Ligthart":{year:["1"],profile:["n.v.t."]},OPUS:{year:["1","2","3","4","5","6"],profile:["Cultuur en Maatschappij","Economie en Maatschappij","Natuur en Gezondheid","Natuur en Techniek","Natuur en Techniek & Natuur en Gezondheid","Cultuur en Maatschappij & Economie en Maatschappij","n.v.t."]},"n.v.t.":{year:["n.v.t."],profile:["n.v.t."]}},profile:{"Bouwen, wonen en interieur":{},"Dienstverlening en producten":{},"Economie en ondernemen":{},Groen:{},"Horeca, bakkerij en recreatie":{},"Maritiem en techniek":{},"Media, vormgeving en ICT":{},"Mobiliteit en transport":{},"Produceren, installeren en energie":{},Economie:{},"Landbouw (Groen)":{},Techniek:{},"Zorg en welzijn":{},"Cultuur en Maatschappij":{year:["4","5","6"]},"Economie en Maatschappij":{year:["4","5","6"]},"Natuur en Gezondheid":{year:["4","5","6"]},"Natuur en Techniek":{year:["4","5","6"]},"Natuur en Techniek & Natuur en Gezondheid":{year:["4","5","6"]},"Cultuur en Maatschappij & Economie en Maatschappij":{year:["4","5","6"]},"n.v.t.":{}},schoolLocation:{"Parnassusstraat 20, Arnhem":{},"Leidenweg 60, Arnhem":{},"Hoge Witteveld 2, Didam":{},"Thomas a Kempislaan 82, Arnhem":{},"Groningensingel 1235, Arnhem":{},"Auditorium 6, Elst":{},"Dijksestraat 12, Didam":{},"Stationspoort 36, Zevenaar":{},"Heerenm\xe4ten 6, Zevenaar":{},"Zonegge 07-09, Zevenaar":{},"Eltensestraat 8, Duiven":{level:["VMBO","MAVO"]},"Saturnus 1, Duiven":{level:["HAVO","VWO"]},"Thorbeckestraat 17, Arnhem":{},"Auditorium 3, Elst":{},"Utrechtseweg 174, Arnhem":{},"Olympus 11, Arnhem":{},"Groningensingel 1245, Arnhem":{},"Bernhardlaan 49, Arnhem":{},"Saturnus 5, Duiven":{}},year:{"n.v.t.":{},1:{profile:["n.v.t."]},2:{profile:["n.v.t."]},3:{},4:{},5:{},6:{}}};function wa(e){return e.reduce((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{[t]:{}})}),{})}for(var Na in Sa)for(var Pa in Sa[Na])for(var Aa in Sa[Na][Pa])Sa[Na][Pa][Aa]=wa(Sa[Na][Pa][Aa]);var Da=function(e){var t={};for(var a in e)t[a]=wa(Object.keys(e[a]));return t}(Sa);for(var Ga in Sa)for(var Ma in Sa[Ga])Sa[Ga][Ma]=Object(u.a)(Object(u.a)({},Da),Sa[Ga][Ma]);var La=Sa,Ta=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).reducedChoices=null,e.reduceChoices=function(){for(var t=Object(u.a)({},e.props.user),a=Object(Ia.cloneDeep)(La),n=0;n<5;n++){for(var r in La){var o=a[r][t[r]];if(null!=o)for(var l in o)a[l]=e.intersection(a[l],o[l])}for(var i in La)1===Object.keys(a[i]).length&&(t[i]=Object.keys(a[i])[0])}e.reducedChoices=a},e.intersection=function(e,t){return Object.keys(e).concat(Object.keys(t)).sort().reduce((function(t,a,n,r){return n&&r[n-1]===a?Object(u.a)(Object(u.a)({},t),{},{[a]:e[a]}):t}),{})},e.getField=function(t){var a=e.props.user[t],n=Object.keys(e.reducedChoices[t]),o=e.props.editableUser;return null!=n&&0!==n.length||(console.error(e.props.user),console.error("INVALID EDUCATION DATA STATE ON FIELD "+t),n=Object.keys(La[t])),1===n.length&&(a=n[0],o=!1),-1===n.indexOf(a)&&(a=""),"school"===t&&(o=e.props.editableAdmin),r.a.createElement(ge,{value:a,editable:o,onChange:function(a){return e.props.onChange(t,a)},layout:{td:!0,area:!0},validate:{notEmpty:!0},style:{margin:"none"},options:n})},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props;return this.reduceChoices(),r.a.createElement("div",null,r.a.createElement(re.a,{variant:"h6",color:"secondary"},"School gegevens"),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement(ge,{value:"School",layout:{td:!0},style:{margin:"none"}}),this.getField("school")),r.a.createElement("tr",null,r.a.createElement(ge,{value:"Hoofdrol",layout:{td:!0},style:{margin:"none"}}),r.a.createElement(ge,{value:e.user.role,style:{margin:"none"},editable:e.editableAdmin,layout:{td:!0,area:!0},onChange:function(t){return e.onChange("role",t)},options:[{label:"Administrator",value:"admin"},{label:"Leerling",value:"student"},{label:"Expert",value:"teacher"},{label:"Contactpersoon",value:"grade_admin"}]})),r.a.createElement("tr",null,r.a.createElement(ge,{value:"Schoolemail",layout:{td:!0},style:{margin:"none"}}),r.a.createElement(ge,{value:e.user.email,style:{margin:"none"},layout:{td:!0,area:!0}})))),r.a.createElement(tt.a,null),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement(ge,{value:"Opleidingsniveau",layout:{td:!0},style:{margin:"none"}}),this.getField("level")),r.a.createElement("tr",null,r.a.createElement(ge,{value:"Schoollocatie",layout:{td:!0},style:{margin:"none"}}),this.getField("schoolLocation")),r.a.createElement("tr",null,r.a.createElement(ge,{value:"Leerjaar",layout:{td:!0},style:{margin:"none"}}),this.getField("year")),r.a.createElement("tr",null,r.a.createElement(ge,{value:"Profiel",layout:{td:!0},style:{margin:"none"}}),this.getField("profile")))))}}]),a}(n.Component),Fa=a(840),Ha=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).toggleDialog=function(){n.setState({isDialogOpen:!n.state.isDialogOpen})},n.onChange=function(e,t){var a=Object(u.a)(Object(u.a)({},n.props.state),{},{[e]:t});a.newSubjectId&&a.newSubjectProfile&&(a.isValid=!0),n.setState(a)},n.updateExamSubjects=function(){n.props.onChange("examSubjects",JSON.stringify([].concat(Object(c.a)(n.props.examSubjects),[{id:n.state.newSubjectId,inProfile:"T"===n.state.newSubjectProfile}]))),n.setState({isDialogOpen:!1,newSubjectId:null,newSubjectProfile:null,isValid:!1})},n.getExamSubjectListItem=function(e){var t=e.id,a=e.name,n=e.inProfile;return r.a.createElement("tr",{key:t,className:"examSubjectListItem"},r.a.createElement("th",null,a),r.a.createElement("td",null,n?"(in profiel deel)":"(in vrije deel)"))},n.state={isDialogOpen:!1,newSubjectId:null,newSubjectProfile:null,isValid:!1},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.props.getSubjects()}},{key:"render",value:function(){var e=this,t=this.props,a=t.examSubjects.filter((function(e){var a=e.id;return t.subjects[a]})).map((function(e){var a=e.id;return{id:a,inProfile:e.inProfile,name:t.subjects[a].name}})).map(this.getExamSubjectListItem),n=Object(Ia.map)(t.subjects,(function(e){return Object(u.a)({},e)})).filter((function(e){return e.canDoExam})).filter((function(e){var a=e.id;return 0===t.examSubjects.filter((function(e){return e.id+""===a+""})).length})).map((function(e){var t=e.id;return{label:e.name,value:t}}));return r.a.createElement("div",null,r.a.createElement(re.a,{variant:"h6",color:"secondary"},"Examen vakken"),r.a.createElement(re.a,null,"In deze vakken wil ik bij de Q-Highschool examen doen:"),r.a.createElement("table",null,r.a.createElement("tbody",null,a)),this.props.editableUser&&r.a.createElement(ae.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(Fa.a,null),onClick:this.toggleDialog},"Nieuw examenvak"),r.a.createElement(ye.a,{onClose:this.toggleDialog,"aria-labelledby":"customized-dialog-title",open:this.state.isDialogOpen},r.a.createElement(Ee.a,{id:"customized-dialog-title",onClose:this.toggleDialog},"Nieuw examenvak"),r.a.createElement(je.a,{dividers:!0},r.a.createElement(re.a,{gutterBottom:!0},"In welk vak wil je examen doen?"),r.a.createElement(ge,{editable:!0,label:"Nieuw examenvak",value:this.state.newSubjectId,options:n,style:{margin:"dense"},layout:{area:!0},onChange:function(t){return e.onChange("newSubjectId",t)}}),r.a.createElement(re.a,{gutterBottom:!0},"Volg je dit vak binnen je profiel of in het vrije deel?"),r.a.createElement(ge,{editable:!0,value:this.state.newSubjectProfile,options:[{label:"In profiel",value:"T"},{label:"In vrije deel",value:"F"}],style:{margin:"dense"},layout:{area:!0},onChange:function(t){return e.onChange("newSubjectProfile",t)}})),r.a.createElement(Oe.a,null,r.a.createElement(ae.a,{onClick:this.toggleDialog},"Annuleren"),r.a.createElement(ae.a,{autoFocus:!0,onClick:this.updateExamSubjects,color:"primary",disabled:this.state.isValid},"Opslaan"))))}}]),a}(n.Component);var za=Object(x.b)((function(e,t){return Object(u.a)({subjects:e.subjects||[],examSubjects:(t.user.examSubjects||"").length>2?JSON.parse(t.user.examSubjects):[]},t)}),(function(e){return{getSubjects:function(){return e(V())}}}))(Ha),_a=a(841),Va=a(847),Ua=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props;return r.a.createElement("div",null,e.isAdmin&&r.a.createElement("div",null,r.a.createElement(re.a,{variant:"h6",color:"secondary"},"Verzoek profiel update"),r.a.createElement(_a.a,{control:r.a.createElement(Va.a,{checked:e.user.needsProfileUpdate,disabled:!e.editableUser,color:"primary",onChange:function(t){var a=t.target.checked;return e.onChange("needsProfileUpdate",a)}}),label:"Deze leerling moet zijn gegevens bijwerken"})))}}]),a}(n.Component),Ba=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={},n}return Object(v.a)(a,[{key:"render",value:function(){return this.props.children}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=ot.a.parse(e.location.search);if(null!=a.secureLogin&&e.setSecureLogin(a.secureLogin),"login"===a.from&&null!=e.user&&"student"!==e.role){var n=ee("beforeLoginPath");e.history.push(n)}return t}}]),a}(n.Component);var Ra=Object(I.h)(Object(x.b)(null,(function(e){return{setSecureLogin:function(t){return e($(t))}}}))(Ba)),Wa=(a(764),a(765),function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props.onSave,t=this.props.hasChanged,a=this.props.editIfSecure,n=this.props.isSecure,o=t||a&&!n;return r.a.createElement("div",null,this.props.children,o&&r.a.createElement(ne.a,{className:"SaveBanner"},a&&!n&&r.a.createElement(Se,{dense:!0},r.a.createElement("br",null)),t&&r.a.createElement("div",null,r.a.createElement(ae.a,{color:"primary",variant:"outlined",onClick:e},"Opslaan"),r.a.createElement(ae.a,{color:"default",onClick:e},"Annuleren")),r.a.createElement(et,{giveWarning:t})))}}]),a}(n.Component)),Ya=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).onChange=function(e,t){n.setState({user:Object(u.a)(Object(u.a)({},n.state.user),{},{[e]:t})})},n.state={user:{}},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.state.user,a=JSON.stringify(this.props.user)!==JSON.stringify(t),n=Object(u.a)(Object(u.a)({},this.props),{},{user:t});return null==t||t==={}?r.a.createElement(Ra,null,r.a.createElement(se,null,r.a.createElement(ue,null))):r.a.createElement(Ra,null,r.a.createElement(se,{className:"Profile"},r.a.createElement(Wa,{hasChanged:a||t.needsProfileUpdate&&"student"===t.role,onSave:function(){if(e.props.editableAdmin)e.props.saveFull(t);else{var a=Object(u.a)(Object(u.a)({},t),{},{needsProfileUpdate:!1});e.props.save(a),e.setState({user:a})}},editIfSecure:this.props.isAdmin,isSecure:this.props.isSecure},r.a.createElement(re.a,{variant:"h4",color:"primary"},t.displayName),r.a.createElement(tt.a,null),t.needsProfileUpdate&&r.a.createElement("div",{className:"NeedsProfileUpdate"},r.a.createElement(ka.a,{color:"secondary"}),r.a.createElement(re.a,{variant:"button",color:"secondary"},"Controleer de onderstaande gegevens")),r.a.createElement("div",null,r.a.createElement(Ca,Object.assign({},n,{onChange:this.onChange})),r.a.createElement(Ta,Object.assign({},n,{onChange:this.onChange})),this.props.isStudent&&r.a.createElement(za,Object.assign({},n,{onChange:this.onChange})),r.a.createElement(Ua,Object.assign({},n,{onChange:this.onChange})),r.a.createElement("div",{style:{height:"300px"}})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=ot.a.parse(e.location.search);if(null!=a.secureLogin&&"undefined"!==a.secureLogin&&e.setSecureLogin(a.secureLogin),"login"===a.from&&null!=e.user&&"student"!==e.role){var n=ee("beforeLoginPath");e.history.push(n)}return{orgUser:e.user,user:Object(u.a)(Object(u.a)({},e.user),t.user)}}}]),a}(n.Component);var Ja=Object(I.h)(Object(x.b)((function(e,t){var a="admin"===e.role,n="student"===e.role,r=null!=e.secureLogin;return{isAdmin:a,isSecure:r,isStudent:n,isOwn:!0,user:e.users[e.userId],editableUser:!a||r&&a,editableAdmin:r&&a}}),(function(e){return{setSecureLogin:function(t){return e($(t))},save:function(t){return e(function(e){return function(t,a){t({type:"CHANGE_USER",user:e}),z("user","patch",e,t,a)}}(t))},saveFull:function(t){return e(function(e){return function(t,a){t({type:"CHANGE_USER",user:e}),z("user/full","patch",e,t,a)}}(t))}}}))(Ya)),Za=a(366),$a=a.n(Za),qa=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={generatedPdf:!1,images:{background:"jpg",course_header:"png",portfolio_header:"png",signature:"png",quadraam_logo:"png"}},Object.keys(n.state.images).forEach((function(e){var t=new Image;t.src="/images/certificate/"+e+"."+n.state.images[e],t.onload=function(){n.state.images[e]=t}})),n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.props.getSubjects()}},{key:"makeBase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $a.a({orientation:"p",unit:"mm",format:"a4",putOnlyUsedFonts:!0,floatPrecision:16});return e.hasOwnProperty("page_count")?(e.addPage(),e.page_count++):e.page_count=1,e.setFontSize(12),e.setFont("helvetica","normal"),e.addImage(this.state.images.background,"jpg",0,0,210,300),e.addImage(this.state.images.signature,"png",45,190,120,47),e.addImage(this.state.images.quadraam_logo,"png",70,240,70,20),e}},{key:"addModule",value:function(e,t){if(this.props.groups)if(this.props.groups.hasOwnProperty(e+""))if(this.props.groups[e].hasOwnProperty("evaluation")){var a=this.props.groups[e];t.addImage(this.state.images.course_header,"png",20,0,150,41),t.text("Hierbij verklaart Quadraam dat",105,60,{align:"center"}),t.setFontStyle("bold"),t.setFontSize(25),t.text(a.evaluation.displayName,105,70,{align:"center",maxWidth:175}),t.setFontSize(12),t.setFontStyle("normal"),t.text("de Q-Highschool module",105,87,{align:"center"}),t.setFontStyle("bold"),t.setFontSize(28),t.text(a.courseName,105,100,{align:"center",maxWidth:175}),t.setFontSize(12),t.setFontStyle("normal"),t.text("van ".concat(a.studyTime," studie-uren en onderdeel van het parcours ").concat(a.subjectName," successvol heeft afgesloten met de beoordeling"),105,125,{align:"center",maxWidth:120}),t.setFontStyle("bold"),t.setFontSize(28),t.text(Me(a.evaluation),105,145,{align:"center"}),t.setFontSize(12),t.setFontStyle("normal");var n=a.evaluation.hasOwnProperty("date")?a.evaluation.date.toString():a.schoolYear.toString();t.text(n,105,168,{align:"center"})}else console.log("That module has no evaluation!");else console.log("That group id cannot be found!");else console.log("No groups found")}},{key:"portfolioBasePage",value:function(e,t){e.text("Hierbij verklaart Quadraam dat",80,50),e.setFontSize(25),e.setFontStyle("bold"),e.text(this.props.user.displayName,107,60,{align:"center"}),e.setFontSize(12),e.setFontStyle("normal"),e.text("binnen het parcours ".concat(this.props.subjects[t].name," de volgende Q-highschoolmodules heeft afgerond:"),105,70,{align:"center",maxWidth:100}),e.addImage(this.state.images.portfolio_header,"png",20,0,150,41),this.addPortfolioTableHeader(e,100)}},{key:"addPortfolioTableHeader",value:function(e,t){e.setFontStyle("bold"),e.text("Naam module",20,t),e.text("Studietijd",130,t),e.text("Schooljaar",170,t),e.setFontStyle("normal")}},{key:"addPortfolio",value:function(e,t){var a=this;if(this.props.groups){var n=0,r=0;e.setFontStyle("normal"),Object.keys(this.props.groups).forEach((function(o){var l=a.props.groups[o],i={},s=1===r?5:9;if(l.subjectId+""===t+""&&l.hasOwnProperty("evaluation")&&l.hasOwnProperty("courseName")&&(i.name=l.courseName.toString(),l.evaluation.hasOwnProperty("assesment")&&l.evaluation.assesment.length>0&&"ND"!==(l.evaluation.assesment+"").toUpperCase())){i.grade=Me(l.evaluation),n%s===0&&(0===r?a.portfolioBasePage(e,t):(a.makeBase(e),a.addPortfolioTableHeader(e,60),e.addImage(a.state.images.portfolio_header,"png",20,0,150,41)),n=0,r+=1);var c=1===r?113:75;l.hasOwnProperty("studyTime")?i.time=l.studyTime.toString():i.time="-",l.evaluation.hasOwnProperty("date")?i.date=l.evaluation.date.toString():i.date=l.hasOwnProperty("schoolYear")?l.schoolYear:"Niet bekend.";var u=13*n+c;e.text(i.name,20,u,{maxWidth:70}),e.setTextColor("#F0831F"),e.setFontStyle("bold"),e.text(i.grade,90,u),e.setFontStyle("normal"),e.setTextColor("#000000"),e.text(i.time+" uur",130,u),e.text(i.date,170,u),n+=1}}))}}},{key:"fixPageCount",value:function(e){e.hasOwnProperty("page_count")&&e.page_count%2!==0&&(e.addPage(),e.page_count++)}},{key:"doGenerate",value:function(){if(!this.state.generatedPdf)if(this.props.groups)if(this.props.enrollmentIds){var e=this.makeBase(),t=this.props.match.params.hasOwnProperty("groupId")&&null!==this.props.match.params.groupId,a=this.props.match.params.groupId,n=this.props.match.params.subjectId;t?this.addModule(a,e):(this.addPortfolio(e,n),this.fixPageCount(e)),t?e.save("Certificaat Q-Highschool.pdf"):e.save("Parcoursoverzicht ".concat(this.props.subjects[n].name," ").concat(this.props.user.displayName,".pdf"));var r=this.state;r.generatedPdf=!0,this.setState(r)}else this.props.getEnrollments();else this.props.getParticipatingGroups()}},{key:"render",value:function(){return this.doGenerate(),this.state.generatedPdf?r.a.createElement(se,null,r.a.createElement("p",null,"Certificaat is klaar!")):r.a.createElement(se,null,r.a.createElement("p",null,"Een moment geduld a.u.b. "),r.a.createElement(ue,null))}}]),a}(n.Component);var Ka=Object(I.h)(Object(x.b)((function(e){return{groups:e.groups,participatingGroupIds:e.users[e.userId].participatingGroupIds,enrollmentIds:e.users[e.userId].enrollmentIds,role:e.role,schoolYear:e.schoolYear,currentPeriod:e.currentPeriod,userId:e.userId,user:e.users[e.userId],subjects:e.subjects}}),(function(e){return{getSubjects:function(){return e(V())},getEnrollments:function(){return e(W())},getParticipatingGroups:function(){return e(B())}}}))(qa)),Qa=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.props.getSelf()}},{key:"componentDidUpdate",value:function(){null!=this.props.user&&this.props.user.needsProfileUpdate&&"student"===this.props.role&&"/profiel"!==this.props.location.pathname&&this.props.history.push("/profiel")}},{key:"handleShowMenu",value:function(){var e=this.state.showMenu;this.setState({showMenu:!e})}},{key:"getStartPage",value:function(e){switch(e){case"student":return"/aanbod";case"grade_admin":return"/gegevens";default:return"/groepen"}}},{key:"render",value:function(){if(!this.props.role&&"/login"!==this.props.location.pathname)return r.a.createElement("div",null);var e=this.getStartPage(this.props.role);return r.a.createElement("div",{className:"App"},r.a.createElement($t,null),this.props.showMenu&&r.a.createElement(da,null),r.a.createElement(Bt,null),r.a.createElement(I.e,null,r.a.createElement(I.c,{path:"/login",component:le}),r.a.createElement(I.c,{path:"/aanbod",component:kt}),r.a.createElement(I.c,{path:"/groep/:groupId",component:vt}),r.a.createElement(I.c,{path:"/gebruiker/:userId",component:We}),r.a.createElement(I.c,{path:"/profiel/",component:Ja}),r.a.createElement(I.c,{path:"/portfolio/",component:ba}),r.a.createElement(I.c,{path:"/groepen/",component:ba}),r.a.createElement(I.c,{path:"/gegevens/",component:Tt}),r.a.createElement(I.c,{path:"/taxi/",component:Ft}),r.a.createElement(I.c,{path:"/beheer/",component:xa}),r.a.createElement(I.c,{path:"/certificaat/gebruiker/:userId/groep/:groupId",component:Ka}),r.a.createElement(I.c,{path:"/certificaat/gebruiker/:userId/parcours/:subjectId",component:Ka}),r.a.createElement(I.b,{push:!0,to:e})))}}]),a}(n.Component);var Xa=Object(I.h)(Object(x.b)((function(e){return{showMenu:e.showMenu,userId:e.userId,role:e.role,user:e.userId?e.users[e.userId]:null}}),(function(e){return{getSelf:function(){return e((function(e,t){var a={id:-96,priority:"low",type:"bar",message:"Bezig met laden",scope:"."};e(Y(a)),z("user/self","get",null,e,t).then((function(t){R(e),e({type:"SET_SELF",user:t}),e(J(a))})).catch((function(t){R(e),e(J(a)),null!=t&&"Authentication Error"===t.error?"/login"!==window.location.pathname&&(X("beforeLoginPath",window.location.pathname+window.location.search,24),document.location.href="/login"):(e(Z(!1)),e(Y({id:-1,priority:"high",type:"bar",message:"Kan geen verbinding met de server maken"})))}))}))},addNotification:function(t){return e(Y(t))}}}))(Qa)),en=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return r.a.createElement(x.a,{store:this.props.store},r.a.createElement(j.a,{theme:C},r.a.createElement(O.a,null,r.a.createElement(Xa,null))))}}]),a}(n.Component);a(766);a(767);var tn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.c,an=Object(i.d)(b,tn(Object(i.a)(s.a)));l.a.render(r.a.createElement(en,{store:an}),document.getElementById("root"))}},[[379,1,2]]]);
//# sourceMappingURL=main.2e923a92.chunk.js.map