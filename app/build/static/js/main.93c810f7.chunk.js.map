{"version":3,"sources":["store/usersReducer.js","store/groupsReducer.js","store/mainReducer.js","lib/MuiTheme.js","store/actions.js","pages/Login.js","pages/Page.js","components/Progress.js","components/Field.js","pages/group/EnrollmentPopup.js","pages/group/ChooseButton.js","components/EnsureSecureLogin.js","pages/group/Evaluation.js","pages/group/GroupCard.js","pages/user/UserRow.js","pages/user/UserCard.js","pages/user/User.js","pages/group/PresenceTable.js","pages/group/Lesson.js","pages/user/UserList.js","components/PageLeaveWarning.js","pages/group/GroupData.js","components/NotificationBadge.js","components/SelectUser.js","pages/group/GroupPage.js","pages/group/Group.js","pages/CourseSelect.js","pages/DataPage.js","pages/Taxi.js","components/Header.js","components/NotificationBar.js","components/Menu.js","pages/Portfolio.js","pages/ControlPanel.js","pages/profile/PersonalData.js","pages/profile/educationConstraints.js","pages/profile/EducationData.js","pages/profile/ExamSubjects.js","pages/profile/Other.js","lib/LoginProvider.js","components/Saveable.js","pages/profile/Profile.js","pages/Certificate.js","App.js","lib/GlobalProvider.js","index.js"],"names":["DEFAULT_USERS","usersReducer","users","action","type","newUsers","x","user","id","userId","enrollmentIds","concat","groupId","index","indexOf","slice","DEFAULT_GROUPS","groups","newGroups","key","group","lessons","lessonId","userStatus","DEFAULT_STATE","enrollableGroups","currentPeriod","enrollmentPeriod","schoolYear","subjects","showMenu","notifications","hasFetched","mainReducer","state","role","secureLogin","notification","menuState","call","method","data","groupsReducer","theme","createMuiTheme","apiErrorHandler","endpoint","dispatch","error","responseJSON","Math","random","priority","message","scope","fetchData","getState","forceArray","a","f","i","length","o","console","$","ajax","url","dataType","then","list","Array","isArray","keyBy","catch","getSubjects","getGroups","getParticipatingGroups","testIE","test","window","navigator","userAgent","sticky","getEnrolLments","enrollments","Object","keys","addNotification","removeNotification","toggleMenu","setSecureLogin","addSubject","name","description","addCourse","subjectId","addGroup","courseId","mainTeacherId","setCookie","cname","cvalue","exhours","d","Date","setTime","getTime","expires","toUTCString","document","cookie","getCookie","ca","decodeURIComponent","split","c","charAt","substring","relogSecure","location","pathname","search","href","Login","props","this","generateEmail","bind","interval","setInterval","school","schoolShort","studentNumber","floor","setState","clearInterval","Typography","variant","style","fontFamily","overflow","color","palette","secondary","light","fontWeight","dark","history","push","Paper","elevation","className","minHeight","padding","gutterBottom","generateColoredEmail","Button","size","fullWidth","onClick","login","Component","withRouter","connect","email","password","Page","children","Progress","isShowing","timeout","setTimeout","clearTimeout","CircularProgress","Field","onChange","event","target","value","menuItems","endAdornment","layout","label","disabled","multiline","options","disableUnderline","underline","margin","marginPx","classNames","typography","headline","primary","main","title","text","contrastText","alignment","float","textAlign","area","default","editable","filter","opt","labelVisible","map","option","MenuItem","unit","InputAdornment","position","field","TextField","join","select","flex","InputProps","width","inputProps","td","nextProps","prevState","validate","rules","re","re2","isNaN","replace","min","parseFloat","max","notEmpty","maxLength","React","EnrollmentPopup","getRemarkPage","remarks","Dialog","open","keepMounted","DialogTitle","DialogContent","DialogActions","preventPopupClose","page","fontSize","day","chosenDayGroupName","courseName","handlePopup","getCancelPage","hasChosenDay","getDuplicatePage","getConfirmPage","prevProps","hasChosen","ChooseButton","preventClose","doEnroll","toggleEnrollment","dialogOpen","dialog","loading","canChoose","period","ownProps","forEach","enrollable","EnsureSecureLogin","active","content","dense","marginTop","CHECK_FORMATS","STEPWISE_FORMATS","EVALUATION_FORMATS","getEvaluationColor","ev","assesment","translateAssessment","evaluation","Evaluation","e","student","EvaluationTab","onSortChange","sortValue","sortDirection","handleSingleChange","newEv","newEvaluations","evaluations","handleChange","sortEvaluations","sort","b","cmp","displayName","newValue","alignItems","paddingRight","paddingLeft","display","evComps","component","explanation","backgroundColor","Tooltip","enterDelay","placement","TableSortLabel","direction","handleEvaluationTypeChange","GroupCard","hover","hasEvaluation","expand","onMouseEnter","onMouseLeave","Badge","invisible","badgeContent","maxHeight","cursor","subjectName","padStart","height","textTransform","enrollableFor","courseDescription","getBottomSection","number","numberWithoutCharacters","substr","match","exec","justifyContent","firstName","lastName","level","year","profile","preferedEmail","formatPhoneNumber","phoneNumber","CARD_STYLE","verticalAlign","User","notExists","UserRow","actions","marginRight","UserCard","params","ownProfile","PresenceTable","createRow","participantId","lesson","p","presence","createPresenceComponent","status","createLessonHeader","numberInBlock","undefined","rows","participantIds","unshift","Lesson","marginBottom","mini","setPresenceUserStatus","courseGroupId","flexDirection","kind","subject","activities","getWeekdayString","date","getDay","getDate","getMonth","getFullYear","userIsMemberOfGroup","getOptOutButton","UserList","getHeader","headerTitle","sortIds","userIds","toLowerCase","toString","header","PageLeaveWarning","giveWarning","onbeforeunload","returnValue","when","GroupData","handleClickAway","anchorEl","showTeacherCard","currentTarget","top","right","zIndex","teacherName","Divider","studyTime","Popover","onClose","anchorOrigin","horizontal","vertical","teacherId","colorPrimary","colorSecondary","colorError","NotificationBadge","classes","tooltipMessage","j","withStyles","not","RegExp","err","SelectUser","selectUser","input","getFittingUsers","regExp","count","v","handleInput","myref","getAllUsers","ClickAwayListener","onClickAway","Popper","aliasId","disablePortal","getElementById","MenuList","GroupPage","acceptEnrollment","addParticipant","addNewParticipant","newParticipant","participatingRole","handleNewParticipantRoleChange","handleNewParticipantIdChange","handleExternalGroupChange","newGroup","JSON","stringify","handleLessonChange","handleEvaluationChange","handlePresenceChange","presenceObj","log","setEditable","cancel","save","setGroup","handleTab","newTab","tabs","openCertificate","currentTab","0","canAddNewParticipant","includes","cantAddReason","getData","getGroupEnrollments","getGroupLessons","getGroupParticipants","getGroupPresence","getGroupEvaluations","isCertificateWorthy","AppBar","Tabs","indicatorColor","textColor","centered","tab","Tab","getCurrentTab","values","queryString","parse","Group","getGroup","participatingGroupIds","getCourse","getCourseGroup","oldCourse","newCourse","oldCourseGroup","newCourseGroup","oldLessons","newLessons","oldPresence","newPresence","oldEvaluations","changedPresenceObjs","changedEvaluations","parseInt","participants","CourseSelect","handleSortChange","handlePeriodChange","handleYearChange","leerjaar","ListItem","button","ListItemText","minWidth","subjectsComponents","getMenuItem","enrolledGroupsIds","enrolledGroups","getGroupsPerSubject","Toolbar","List","getMenuItems","blok","vak","splitOnDefault","courseIds","DataPage","handleShowData","splitOn","tables","splitTable","tableSortColumns","handleFilterChange","handleSplitChange","oldTables","newTables","arr","flat","tableIndex","table","column","order","tableSortDirections","columnIndex","splitValue","splitIndex","findIndex","halfSplitTable","downloadTables","workbook","Excel","Workbook","sheetName","getValidWorksheetName","sheet","addWorksheet","addRows","getColumn","filename","toLocaleDateString","downloadWorkbook","illegalCharacters","fileName","xlsx","writeBuffer","base64","xls64","createElement","Blob","URL","createObjectURL","download","body","appendChild","click","removeChild","revokeObjectURL","forceCellWidth","cellName","Table","TableHead","TableRow","TableCell","TableBody","_","row","rowIndex","cell","IconButton","VerticalAlignBottom","Taxi","fetchSchedules","schedules","week","s","dangerouslySetInnerHTML","__html","n","Header","logoClick","aria-label","src","alt","handleClick","transform","NotificationBar","Snackbar","TransitionProps","SnackbarContent","background","bottom","Menu","pages","reload","logout","iconName","isCurrentPage","icon","ListItemIcon","getIcon","visiblePages","getItem","visibleProfile","Portfolio","compareFunction","orders","getOrder","splice","groupIds","orderGroups","ControlPanel","mapPageToListItem","pageName","handlePageChange","toUpperCase","getContent","courses","Alias","Subject","Course","course","PersonalData","u","editableAdmin","editableUser","possibleValues","schoolLocation","arrToObj","reduce","acc","cur","constraint","oneDeepPossibleValues","obj","y","oneDeep","EducationData","reducedChoices","reduceChoices","autoFilledUser","CONS","cloneDeep","userValue","intersection","o1","o2","r","aa","getField","ExamSubjects","toggleDialog","isDialogOpen","newState","newSubjectId","newSubjectProfile","isValid","updateExamSubjects","examSubjects","inProfile","getExamSubjectListItem","examSubjectComponents","availableSubjects","canDoExam","startIcon","Add","aria-labelledby","dividers","autoFocus","Remarks","isAdmin","FormControlLabel","control","Checkbox","checked","needsProfileUpdate","LoginProvider","from","beforeLoginPath","Saveable","onSave","hasChanged","editIfSecure","isSecure","showBanner","Profile","saveFull","U","PriorityHigh","isStudent","orgUser","isOwn","setUser","setFullUser","Certificate","generatedPdf","images","course_header","portfolio_header","signature","quadraam_logo","imageData","Image","onload","pdf","jspdf","orientation","format","putOnlyUsedFonts","floatPrecision","hasOwnProperty","addPage","page_count","setFontSize","setFont","addImage","align","setFontStyle","maxWidth","addPortfolioTableHeader","heightOffset","val","maxLines","grade","portfolioBasePage","makeBase","topHeight","time","setTextColor","isModuleCertificate","addModule","addPortfolio","fixPageCount","getEnrollments","doGenerate","App","getSelf","startPage","getStartPage","path","to","GlobalProvider","store","require","compose","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","reduxCompose","createStore","reducer","applyMiddleware","thunk","ReactDOM","render"],"mappings":"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","file":"static/js/main.93c810f7.chunk.js","sourcesContent":["const DEFAULT_USERS = {\n}\n\nfunction usersReducer(users = DEFAULT_USERS, action) {\n\tswitch (action.type) {\n\t\tcase \"CHANGE_USERS\":\n\t\t\tconst newUsers = users;\n\t\t\tfor (const x in action.users) {\n\t\t\t\tnewUsers[x] = { ...newUsers[x], ...action.users[x] }\n\t\t\t}\n\t\t\treturn newUsers;\n\t\tcase \"CHANGE_USER\":\n\t\t\treturn {\n\t\t\t\t...users,\n\t\t\t\t[action.user.id]: {\n\t\t\t\t\t...users[action.user.id],\n\t\t\t\t\t...action.user\n\t\t\t\t}\n\t\t\t};\n\t\tcase \"CHANGE_ENROLLMENTS\":\n\t\t\tif (action.action === \"ADD\") {\n\t\t\t\treturn {\n\t\t\t\t\t...users,\n\t\t\t\t\t[action.userId]: {\n\t\t\t\t\t\t...users[action.userId],\n\t\t\t\t\t\tenrollmentIds: (users[action.userId].enrollmentIds || []).concat(action.groupId)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (action.action === \"REMOVE\") {\n\t\t\t\tconst index = users[action.userId].enrollmentIds.indexOf(action.groupId);\n\t\t\t\treturn {\n\t\t\t\t\t...users,\n\t\t\t\t\t[action.userId]: {\n\t\t\t\t\t\t...users[action.userId],\n\t\t\t\t\t\tenrollmentIds: [\n\t\t\t\t\t\t\t...users[action.userId].enrollmentIds.slice(0, index),\n\t\t\t\t\t\t\t...users[action.userId].enrollmentIds.slice(index + 1),\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...users,\n\t\t\t\t[action.userId]: {\n\t\t\t\t\t...users[action.userId],\n\t\t\t\t\tenrollmentIds: action.enrollmentIds,\n\t\t\t\t}\n\t\t\t}\n\t\tdefault:\n\t\t\treturn users;\n\t}\n}\n\n\nexport default usersReducer;","const DEFAULT_GROUPS = {\n}\n\nfunction usersReducer(groups = DEFAULT_GROUPS, action) {\n\tswitch (action.type) {\n\t\tcase \"CHANGE_GROUPS\":\n\t\t\tlet newGroups = { ...groups };\n\t\t\tfor (const key in action.groups) {\n\t\t\t\tnewGroups[key] = { ...newGroups[key], ...action.groups[key] };\n\t\t\t}\n\t\t\treturn newGroups;\n\t\tcase \"CHANGE_GROUP\":\n\t\t\treturn {\n\t\t\t\t...groups,\n\t\t\t\t[action.group.id]: {\n\t\t\t\t\t...groups[action.group.id],\n\t\t\t\t\t...action.group\n\t\t\t\t}\n\t\t\t};\n\t\tcase \"CHANGE_PRESENCE_USER_STATUS\":\n\t\t\treturn {\n\t\t\t\t...groups,\n\t\t\t\t[action.groupId]: {\n\t\t\t\t\t...groups[action.groupId],\n\t\t\t\t\tlessons: {\n\t\t\t\t\t\t...groups[action.groupId].lessons,\n\t\t\t\t\t\t[action.lessonId]: {\n\t\t\t\t\t\t\t...groups[action.groupId].lessons[action.lessonId],\n\t\t\t\t\t\t\tuserStatus: action.userStatus,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\tdefault:\n\t\t\treturn groups;\n\t}\n}\n\n\nexport default usersReducer;","import usersReducer from \"./usersReducer\";\nimport groupsReducer from \"./groupsReducer\";\n\nconst DEFAULT_STATE = {\n  userId: null,\n  enrollableGroups: null,\n  currentPeriod: 3,\n  enrollmentPeriod: 4,\n  schoolYear: \"2019/2020\",\n  subjects: null,\n  groups: null,\n  users: null,\n  showMenu: true,\n  notifications: [],\n  hasFetched: []\n};\n\nfunction mainReducer(state = DEFAULT_STATE, action) {\n  switch (action.type) {\n    case \"SET_SELF\":\n      return {\n        ...state,\n        userId: action.user.id,\n        role: action.user.role,\n        notifications: [...state.notifications, ...action.user.notifications],\n        users: {\n          [action.user.id]: action.user,\n          ...state.users\n        }\n      };\n    case \"SET_SECURE_LOGIN\":\n      return {\n        ...state,\n        secureLogin: action.secureLogin\n      };\n    case \"ADD_NOTIFICATION\":\n      return {\n        ...state,\n        notifications: [...state.notifications, action.notification]\n      };\n    case \"REMOVE_NOTIFICATION\":\n      const index = state.notifications.indexOf(action.notification);\n      return {\n        ...state,\n        notifications: [\n          ...state.notifications.slice(0, index),\n          ...state.notifications.slice(index + 1)\n        ]\n      };\n    case \"TOGGLE_MENU\":\n      if (action.menuState != null) {\n        return { ...state, showMenu: action.menuState };\n      } else {\n        return { ...state, showMenu: !state.showMenu };\n      }\n    case \"HAS_FETCHED\":\n      return {\n        ...state,\n        hasFetched: [\n          ...state.hasFetched,\n          { call: action.call, method: action.method, data: action.data }\n        ]\n      };\n    case \"CHANGE_SUBJECTS\":\n      return { ...state, subjects: { ...state.subjects, ...action.subjects } };\n    default:\n      return {\n        ...state,\n        users: usersReducer(state.users, action),\n        groups: groupsReducer(state.groups, action)\n      };\n  }\n}\n\nexport default mainReducer;\n","import { createMuiTheme } from '@material-ui/core/styles';\n\n// const theme = createMuiTheme({\n// \tpalette: {\n// \t\tprimary: {\n// \t\t\t// light: '#5472d3',\n// \t\t\tmain: '#0d47a1',\n// \t\t\t// dark: '#002171',\n// \t\t\tcontrastText: '#fff',\n// \t\t},\n// \t\tsecondary: {\n// \t\t\t// light: '#60ad5e',\n// \t\t\tmain: '#2e7d32',\n// \t\t\t// dark: '#005005',\n// \t\t\tcontrastText: '#ffffff',\n// \t\t},\n// \t},\n// });\n\nconst theme = createMuiTheme({\n\t\"breakpoints\": {\n\t\t\"keys\": [\n\t\t\t\"xs\",\n\t\t\t\"sm\",\n\t\t\t\"md\",\n\t\t\t\"lg\",\n\t\t\t\"xl\"\n\t\t],\n\t\t\"values\": {\n\t\t\t\"xs\": 0,\n\t\t\t\"sm\": 600,\n\t\t\t\"md\": 960,\n\t\t\t\"lg\": 1280,\n\t\t\t\"xl\": 1920\n\t\t}\n\t},\n\t\"direction\": \"ltr\",\n\t\"mixins\": {\n\t\t\"toolbar\": {\n\t\t\t\"minHeight\": 56,\n\t\t\t\"@media (min-width:0px) and (orientation: landscape)\": {\n\t\t\t\t\"minHeight\": 48\n\t\t\t},\n\t\t\t\"@media (min-width:600px)\": {\n\t\t\t\t\"minHeight\": 64\n\t\t\t}\n\t\t}\n\t},\n\t\"overrides\": {},\n\t\"palette\": {\n\t\t\"common\": {\n\t\t\t\"black\": \"#000\",\n\t\t\t\"white\": \"#fff\"\n\t\t},\n\t\t\"type\": \"light\",\n\t\t\"primary\": {\n\t\t\t\"main\": \"#1FB2FF\", /* 'Blauw' */\n\t\t\t\"contrastText\": \"#fff\",\n\t\t\t\"light\": \"rgb(10, 252, 254)\", /* 'Digitaal blauw' */\n\t\t\t\"dark\": \"rgb(5, 140, 174)\"\n\t\t},\n\t\t// \"secondary\": {\n\t\t// \t\"main\": \"#C3386B\",\n\t\t// \t\"contrastText\": \"#ffffff\",\n\t\t// \t\"light\": \"rgb(207, 95, 136)\",\n\t\t// \t\"dark\": \"rgb(136, 39, 74)\"\n\t\t// },\n\t\t\"secondary\": {\n\t\t\t\"main\": \"#c4112f\",\n\t\t\t\"contrastText\": \"#fff\",\n\t\t\t\"light\": \"#cf4058\",\n\t\t\t\"dark\": \"#890b20\"\n\t\t},\n\t\t\"error\": {\n\t\t\t\"light\": \"#f89e4c\",\n\t\t\t\"main\": \"#f78620\",\n\t\t\t\"dark\": \"#ac5d16\",\n\t\t\t\"contrastText\": \"#fff\"\n\t\t},\n\t\t\"grey\": {\n\t\t\t\"50\": \"#fafafa\",\n\t\t\t\"100\": \"#f5f5f5\",\n\t\t\t\"200\": \"#eeeeee\",\n\t\t\t\"300\": \"#e0e0e0\",\n\t\t\t\"400\": \"#bdbdbd\",\n\t\t\t\"500\": \"#9e9e9e\",\n\t\t\t\"600\": \"#757575\",\n\t\t\t\"700\": \"#616161\",\n\t\t\t\"800\": \"#424242\",\n\t\t\t\"900\": \"#212121\",\n\t\t\t\"A100\": \"#d5d5d5\",\n\t\t\t\"A200\": \"#aaaaaa\",\n\t\t\t\"A400\": \"#303030\",\n\t\t\t\"A700\": \"#616161\"\n\t\t},\n\t\t\"contrastThreshold\": 3,\n\t\t\"tonalOffset\": 0.2,\n\t\t\"text\": {\n\t\t\t\"primary\": \"rgba(0, 0, 0, 0.87)\",\n\t\t\t\"secondary\": \"rgba(0, 0, 0, 0.54)\",\n\t\t\t\"disabled\": \"rgba(0, 0, 0, 0.38)\",\n\t\t\t\"hint\": \"rgba(0, 0, 0, 0.38)\"\n\t\t},\n\t\t\"divider\": \"rgba(0, 0, 0, 0.12)\",\n\t\t\"background\": {\n\t\t\t\"paper\": \"#fff\",\n\t\t\t\"default\": \"#fafafa\"\n\t\t},\n\t\t\"action\": {\n\t\t\t\"active\": \"rgba(0, 0, 0, 0.54)\",\n\t\t\t\"hover\": \"rgba(0, 0, 0, 0.08)\",\n\t\t\t\"hoverOpacity\": 0.08,\n\t\t\t\"selected\": \"rgba(0, 0, 0, 0.14)\",\n\t\t\t\"disabled\": \"rgba(0, 0, 0, 0.26)\",\n\t\t\t\"disabledBackground\": \"rgba(0, 0, 0, 0.12)\"\n\t\t}\n\t},\n\t\"props\": {},\n\t\"shadows\": [\n\t\t\"none\",\n\t\t\"0px 1px 3px 0px rgba(0, 0, 0, 0.2),0px 1px 1px 0px rgba(0, 0, 0, 0.14),0px 2px 1px -1px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 1px 5px 0px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 3px 1px -2px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 1px 8px 0px rgba(0, 0, 0, 0.2),0px 3px 4px 0px rgba(0, 0, 0, 0.14),0px 3px 3px -2px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 5px 8px 0px rgba(0, 0, 0, 0.14),0px 1px 14px 0px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 4px 5px -2px rgba(0, 0, 0, 0.2),0px 7px 10px 1px rgba(0, 0, 0, 0.14),0px 2px 16px 1px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 5px 6px -3px rgba(0, 0, 0, 0.2),0px 9px 12px 1px rgba(0, 0, 0, 0.14),0px 3px 16px 2px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 6px 6px -3px rgba(0, 0, 0, 0.2),0px 10px 14px 1px rgba(0, 0, 0, 0.14),0px 4px 18px 3px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 6px 7px -4px rgba(0, 0, 0, 0.2),0px 11px 15px 1px rgba(0, 0, 0, 0.14),0px 4px 20px 3px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 13px 19px 2px rgba(0, 0, 0, 0.14),0px 5px 24px 4px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 7px 9px -4px rgba(0, 0, 0, 0.2),0px 14px 21px 2px rgba(0, 0, 0, 0.14),0px 5px 26px 4px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 8px 9px -5px rgba(0, 0, 0, 0.2),0px 15px 22px 2px rgba(0, 0, 0, 0.14),0px 6px 28px 5px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 8px 10px -5px rgba(0, 0, 0, 0.2),0px 16px 24px 2px rgba(0, 0, 0, 0.14),0px 6px 30px 5px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 8px 11px -5px rgba(0, 0, 0, 0.2),0px 17px 26px 2px rgba(0, 0, 0, 0.14),0px 6px 32px 5px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 9px 11px -5px rgba(0, 0, 0, 0.2),0px 18px 28px 2px rgba(0, 0, 0, 0.14),0px 7px 34px 6px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 9px 12px -6px rgba(0, 0, 0, 0.2),0px 19px 29px 2px rgba(0, 0, 0, 0.14),0px 7px 36px 6px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 20px 31px 3px rgba(0, 0, 0, 0.14),0px 8px 38px 7px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 21px 33px 3px rgba(0, 0, 0, 0.14),0px 8px 40px 7px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 10px 14px -6px rgba(0, 0, 0, 0.2),0px 22px 35px 3px rgba(0, 0, 0, 0.14),0px 8px 42px 7px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 11px 14px -7px rgba(0, 0, 0, 0.2),0px 23px 36px 3px rgba(0, 0, 0, 0.14),0px 9px 44px 8px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 11px 15px -7px rgba(0, 0, 0, 0.2),0px 24px 38px 3px rgba(0, 0, 0, 0.14),0px 9px 46px 8px rgba(0, 0, 0, 0.12)\"\n\t],\n\t\"typography\": {\n\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\"fontSize\": 14,\n\t\t\"fontWeightLight\": 300,\n\t\t\"fontWeightRegular\": 400,\n\t\t\"fontWeightMedium\": 500,\n\t\t\"h1\" : {\n\t\t\t\"fontFamily\": \"\\\"Avenir-Black\\\", \\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"letterSpacing\": \"0.01em\",\n\t\t},\n\t\t\"display4\": {\n\t\t\t\"fontSize\": \"7rem\",\n\t\t\t\"fontWeight\": 300,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"letterSpacing\": \"-.04em\",\n\t\t\t\"lineHeight\": \"1.14286em\",\n\t\t\t\"marginLeft\": \"-.04em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\n\t\t},\n\t\t\"display3\": {\n\t\t\t\"fontSize\": \"3.5rem\",\n\t\t\t\"fontWeight\": 400,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"letterSpacing\": \"-.02em\",\n\t\t\t\"lineHeight\": \"1.30357em\",\n\t\t\t\"marginLeft\": \"-.02em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\n\t\t},\n\t\t\"display2\": {\n\t\t\t\"fontSize\": \"2.8125rem\",\n\t\t\t\"fontWeight\": 400,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"lineHeight\": \"1.06667em\",\n\t\t\t\"marginLeft\": \"-.02em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\n\t\t},\n\t\t\"display1\": {\n\t\t\t\"fontSize\": \"2.125rem\",\n\t\t\t\"fontWeight\": 400,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"lineHeight\": \"1.20588em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\n\t\t},\n\t\t\"headline\": {\n\t\t\t\"fontSize\": \"1.5rem\",\n\t\t\t\"fontWeight\": 400,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"lineHeight\": \"1.35417em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\n\t\t},\n\t\t\"title\": {\n\t\t\t\"fontSize\": \"1.3125rem\",\n\t\t\t\"fontWeight\": 500,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"lineHeight\": \"1.16667em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\n\t\t},\n\t\t\"subheading\": {\n\t\t\t\"fontSize\": \"1rem\",\n\t\t\t\"fontWeight\": 400,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"lineHeight\": \"1.5em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\n\t\t},\n\t\t\"body2\": {\n\t\t\t\"fontSize\": \"0.875rem\",\n\t\t\t\"fontWeight\": 500,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"lineHeight\": \"1.71429em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\n\t\t},\n\t\t\"body1\": {\n\t\t\t\"fontSize\": \"0.875rem\",\n\t\t\t\"fontWeight\": 400,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"lineHeight\": \"1.46429em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\n\t\t},\n\t\t\"caption\": {\n\t\t\t\"fontSize\": \"0.75rem\",\n\t\t\t\"fontWeight\": 400,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"lineHeight\": \"1.375em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\n\t\t},\n\t\t\"button\": {\n\t\t\t\"fontSize\": \"0.875rem\",\n\t\t\t\"textTransform\": \"uppercase\",\n\t\t\t\"fontWeight\": 500,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\n\t\t}\n\t},\n\t\"transitions\": {\n\t\t\"easing\": {\n\t\t\t\"easeInOut\": \"cubic-bezier(0.4, 0, 0.2, 1)\",\n\t\t\t\"easeOut\": \"cubic-bezier(0.0, 0, 0.2, 1)\",\n\t\t\t\"easeIn\": \"cubic-bezier(0.4, 0, 1, 1)\",\n\t\t\t\"sharp\": \"cubic-bezier(0.4, 0, 0.6, 1)\"\n\t\t},\n\t\t\"duration\": {\n\t\t\t\"shortest\": 150,\n\t\t\t\"shorter\": 200,\n\t\t\t\"short\": 250,\n\t\t\t\"standard\": 300,\n\t\t\t\"complex\": 375,\n\t\t\t\"enteringScreen\": 225,\n\t\t\t\"leavingScreen\": 195\n\t\t}\n\t},\n\t\"spacing\": 8,\n\t\"zIndex\": {\n\t\t\"mobileStepper\": 1000,\n\t\t\"appBar\": 1100,\n\t\t\"drawer\": 1200,\n\t\t\"modal\": 1300,\n\t\t\"snackbar\": 1400,\n\t\t\"tooltip\": 1500\n\t}\n});\n\nexport default theme;","import filter from \"lodash/filter\"\nimport $ from \"jquery\";\nimport keyBy from \"lodash/keyBy\"\nimport map from \"lodash/map\"\n\nfunction apiErrorHandler(endpoint, dispatch) {\n\treturn function handleError(error) {\n\t\tconst responseJSON = error.responseJSON;\n\t\tif (endpoint !== \"user/self\") {\n\t\t\tdispatch({\n\t\t\t\ttype: \"ADD_NOTIFICATION\",\n\t\t\t\tnotification: {\n\t\t\t\t\tid: Math.random(),\n\t\t\t\t\tpriority: \"high\",\n\t\t\t\t\ttype: \"bar\",\n\t\t\t\t\tmessage: responseJSON && responseJSON.error ? responseJSON.error : \"Er is iets mis gegaan\",\n\t\t\t\t\tscope: \".\",\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthrow responseJSON;\n\t}\n}\n\nexport async function fetchData(endpoint, method, data, dispatch, getState, forceArray) {\n\tconst f = {\n\t\tcall: endpoint,\n\t\tmethod: method,\n\t\tdata: data,\n\t}\n\tfor (let i = 0; i < getState().hasFetched.length; i++) {\n\t\tconst o = getState().hasFetched[i];\n\t\tif (o.data === f.data && o.call === f.call && o.method === f.method) {\n\t\t\tconsole.error(`Duplicate api call: ${method} ${endpoint}`);\n\t\t}\n\t};\n\tdispatch({\n\t\t...f,\n\t\ttype: \"HAS_FETCHED\",\n\t});\n\n\treturn $.ajax({\n\t\turl: \"/api/\" + endpoint,\n\t\ttype: method,\n\t\tdata: {\n\t\t\t...data,\n\t\t\tsecureLogin: getState().secureLogin\n\t\t},\n\t\tdataType: \"json\",\n\t}).then((list) => {\n\t\tif (method === \"put\" || method === \"patch\" || method === \"delete\") {\n\t\t\tdispatch({\n\t\t\t\ttype: \"ADD_NOTIFICATION\",\n\t\t\t\tnotification: {\n\t\t\t\t\tid: Math.random(),\n\t\t\t\t\tpriority: \"low\",\n\t\t\t\t\ttype: \"bar\",\n\t\t\t\t\tmessage: \"Opgeslagen\",\n\t\t\t\t\tscope: \"\",\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn (Array.isArray(list) && forceArray !== true) ? keyBy(list, \"id\") : list\n\t}).catch(apiErrorHandler(endpoint, dispatch));\n}\n\n\nexport function getSubjects() {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"subject/list\", \"get\", null, dispatch, getState)\n\t\t\t.then((subjects) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_SUBJECTS\",\n\t\t\t\t\tsubjects,\n\t\t\t\t});\n\t\t\t}).catch(() => { });\n\t}\n}\n\nexport function setAlias(userId) {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"function/alias\", \"post\", { userId }, dispatch, getState)\n\t\t\t.then(() => {\n\t\t\t\tdocument.location.reload();\n\t\t\t})\n\t}\n}\n\nexport function getGroups() {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"group/list\", \"get\", null, dispatch, getState)\n\t\t\t.then((groups) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\n\t\t\t\t\tgroups,\n\t\t\t\t});\n\t\t\t}).catch(() => { });\n\t}\n}\n\nexport function getParticipatingGroups() {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"user/groups\", \"get\", null, dispatch, getState)\n\t\t\t.then((groups) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\n\t\t\t\t\tgroups,\n\t\t\t\t});\n\t\t\t}).catch(() => { });\n\t}\n}\n\nexport function getGroup(groupId) {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"group\", \"post\", { groupId: groupId }, dispatch, getState)\n\t\t\t.then((group) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\n\t\t\t\t\tgroups: { [groupId]: group }\n\t\t\t\t});\n\t\t\t}).catch(() => { });\n\t}\n}\n\nfunction testIE(dispatch) {\n\tif (/MSIE|Trident/.test(window.navigator.userAgent)) {\n\t\tdispatch({\n\t\t\ttype: \"ADD_NOTIFICATION\",\n\t\t\tnotification: {\n\t\t\t\tid: Math.random(),\n\t\t\t\tpriority: \"high\",\n\t\t\t\ttype: \"bar\",\n\t\t\t\tmessage: \"Deze website ondersteunt Internet Explorer niet. Gebruik een moderne browser zoals Firefox of Chrome\",\n\t\t\t\tsticky: true,\n\t\t\t\tscope: \"\",\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function getSelf() {\n\treturn (dispatch, getState) => {\n\t\tconst notification = {\n\t\t\tid: -96,\n\t\t\tpriority: \"low\",\n\t\t\ttype: \"bar\",\n\t\t\tmessage: \"Bezig met laden\",\n\t\t\tscope: \".\",\n\t\t};\n\t\tdispatch(addNotification(notification));\n\t\tfetchData(\"user/self\", \"get\", null, dispatch, getState)\n\t\t\t.then((user) => {\n\t\t\t\ttestIE(dispatch);\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"SET_SELF\",\n\t\t\t\t\tuser,\n\t\t\t\t});\n\t\t\t\tdispatch(removeNotification(notification));\n\t\t\t}).catch((error) => {\n\t\t\t\ttestIE(dispatch);\n\t\t\t\tdispatch(removeNotification(notification));\n\t\t\t\tif (error != null && error.error === \"Authentication Error\") {\n\t\t\t\t\tif (window.location.pathname !== \"/login\") {\n\t\t\t\t\t\tsetCookie(\"beforeLoginPath\", window.location.pathname + window.location.search, 24);\n\t\t\t\t\t\tdocument.location.href = \"/login\";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(toggleMenu(false));\n\t\t\t\t\tdispatch(addNotification({\n\t\t\t\t\t\tid: -1,\n\t\t\t\t\t\tpriority: \"high\",\n\t\t\t\t\t\ttype: \"bar\",\n\t\t\t\t\t\tmessage: \"Kan geen verbinding met de server maken\",\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t});\n\t}\n}\n\nexport function setUser(user) {\n\treturn (dispatch, getState) => {\n\t\tdispatch({\n\t\t\ttype: \"CHANGE_USER\",\n\t\t\tuser,\n\t\t});\n\t\tfetchData(\"user\", \"patch\", user, dispatch, getState);\n\t}\n}\nexport function setFullUser(user) {\n\treturn (dispatch, getState) => {\n\t\tdispatch({\n\t\t\ttype: \"CHANGE_USER\",\n\t\t\tuser,\n\t\t});\n\t\tfetchData(\"user/full\", \"patch\", user, dispatch, getState);\n\t}\n}\n\nexport function setPresenceUserStatus(lessonId, userStatus, groupId) {\n\treturn (dispatch, getState) => {\n\t\tdispatch({\n\t\t\ttype: \"CHANGE_PRESENCE_USER_STATUS\",\n\t\t\tlessonId,\n\t\t\tuserStatus,\n\t\t\tgroupId,\n\t\t});\n\t\tfetchData(\"group/userStatus\", \"patch\", { lessonId: lessonId, userStatus: userStatus }, dispatch, getState);\n\t}\n}\n\nexport function setGroup(group) {\n\treturn (dispatch, getState) => {\n\t\tfunction getCourse(group) {\n\t\t\treturn {\n\t\t\t\tcourseId: group.courseId,\n\t\t\t\tsubjectId: group.subjectId,\n\t\t\t\tname: group.courseName,\n\t\t\t\tdescription: group.courseDescription,\n\t\t\t\tstudyTime: group.studyTime,\n\t\t\t\tremarks: group.remarks,\n\t\t\t}\n\t\t}\n\n\t\tfunction getCourseGroup(group) {\n\t\t\treturn {\n\t\t\t\tcourseId: group.courseId,\n\t\t\t\tgroupId: group.id,\n\t\t\t\tday: group.day,\n\t\t\t\tschoolYear: group.schoolYear,\n\t\t\t\tenrollableFor: group.enrollableFor,\n\t\t\t\tperiod: group.period,\n\t\t\t}\n\t\t}\n\n\t\tconst oldCourse = getCourse(getState().groups[group.id]);\n\t\tconst newCourse = getCourse(group);\n\n\t\tconst oldCourseGroup = getCourseGroup(getState().groups[group.id]);\n\t\tconst newCourseGroup = getCourseGroup(group);\n\n\t\tconst oldLessons = getState().groups[group.id].lessons;\n\t\tconst newLessons = group.lessons;\n\n\t\tconst oldPresence = getState().groups[group.id].presence;\n\t\tconst newPresence = group.presence;\n\n\t\tconst oldEvaluations = getState().groups[group.id].evaluations;\n\t\tconst newEvaluations = group.evaluations;\n\n\t\tif (JSON.stringify(oldCourse) !== JSON.stringify(newCourse)) {\n\t\t\tfetchData(\"course\", \"patch\", newCourse, dispatch, getState);\n\t\t}\n\t\tif (JSON.stringify(oldCourseGroup) !== JSON.stringify(newCourseGroup)) {\n\t\t\tfetchData(\"group\", \"patch\", newCourseGroup, dispatch, getState);\n\t\t}\n\n\t\tif (JSON.stringify(oldPresence) !== JSON.stringify(newPresence)) {\n\t\t\tconst changedPresenceObjs = filter(newPresence, (presence) => {\n\t\t\t\treturn JSON.stringify(presence) !== JSON.stringify(oldPresence[presence.id]);\n\t\t\t});\n\t\t\tfetchData(\"group/presence\", \"patch\",\n\t\t\t\t{\n\t\t\t\t\tpresence: JSON.stringify(map(changedPresenceObjs, (changedPresenceObjs) => { return changedPresenceObjs })),\n\t\t\t\t\tgroupId: group.id\n\t\t\t\t}, dispatch, getState);\n\t\t}\n\n\t\tif (newLessons != null && JSON.stringify(oldLessons) !== JSON.stringify(newLessons)) {\n\t\t\tfetchData(\"group/lessons\", \"patch\", { lessons: JSON.stringify(map(newLessons, (lesson) => { return lesson })), }, dispatch, getState);\n\t\t}\n\n\t\tif (JSON.stringify(oldEvaluations) !== JSON.stringify(newEvaluations)) {\n\t\t\tlet changedEvaluations = [];\n\t\t\tfor (let i = 0; i < newEvaluations.length; i++) {\n\t\t\t\tconst evaluation = newEvaluations[i];\n\t\t\t\tif (JSON.stringify(oldEvaluations[i]) !== JSON.stringify(evaluation)) {\n\t\t\t\t\tchangedEvaluations.push(evaluation);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfetchData(\"group/evaluations\", \"patch\", {\n\t\t\t\tevaluations: JSON.stringify(changedEvaluations),\n\t\t\t\tgroupId: group.id,\n\t\t\t}, dispatch, getState);\n\t\t}\n\n\t\tdispatch({\n\t\t\ttype: \"CHANGE_GROUP\",\n\t\t\tgroup: group,\n\t\t});\n\t}\n}\n\nexport function getEnrolLments() {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"user/enrollments\", \"get\", null, dispatch, getState)\n\t\t\t.then((enrollments) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\n\t\t\t\t\tgroups: enrollments,\n\t\t\t\t});\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_ENROLLMENTS\",\n\t\t\t\t\tuserId: getState().userId,\n\t\t\t\t\tenrollmentIds: Object.keys(enrollments),\n\t\t\t\t});\n\t\t\t}).catch(() => { });\n\t}\n}\n\nexport function getGroupEnrollments(groupId) {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"group/enrollments\", \"post\", { groupId: groupId }, dispatch, getState)\n\t\t\t.then((enrollments) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\n\t\t\t\t\tgroup: {\n\t\t\t\t\t\tid: groupId,\n\t\t\t\t\t\tenrollmentIds: Object.keys(enrollments).map(id => parseInt(id, 10)),\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_USERS\",\n\t\t\t\t\tusers: enrollments,\n\t\t\t\t});\n\t\t\t}).catch(() => { });\n\t}\n}\n\nexport function getGroupLessons(groupId) {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"group/lessons\", \"post\", { groupId: groupId }, dispatch, getState)\n\t\t\t.then((lessons) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\n\t\t\t\t\tgroup: {\n\t\t\t\t\t\tid: groupId,\n\t\t\t\t\t\tlessons,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n\nexport function getGroupPresence(groupId) {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"group/presence\", \"post\", { groupId: groupId }, dispatch, getState)\n\t\t\t.then((presence) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\n\t\t\t\t\tgroup: {\n\t\t\t\t\t\tid: groupId,\n\t\t\t\t\t\tpresence,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n\nexport function getGroupParticipants(groupId) {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"group/participants\", \"post\", { groupId: groupId }, dispatch, getState)\n\t\t\t.then((participants) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\n\t\t\t\t\tgroup: {\n\t\t\t\t\t\tid: groupId,\n\t\t\t\t\t\tparticipantIds: Object.keys(participants).map(id => parseInt(id, 10)),\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_USERS\",\n\t\t\t\t\tusers: participants,\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n\nexport function getAllUsers() {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"user/list\", \"get\", null, dispatch, getState)\n\t\t\t.then((users) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_USERS\",\n\t\t\t\t\tusers,\n\t\t\t\t});\n\t\t\t}).catch(() => { });\n\t}\n}\n\nexport function addNotification(notification) {\n\treturn {\n\t\ttype: \"ADD_NOTIFICATION\",\n\t\tnotification,\n\t}\n}\n\nexport function removeNotification(notification) {\n\treturn {\n\t\ttype: \"REMOVE_NOTIFICATION\",\n\t\tnotification,\n\t}\n}\n\nexport function toggleMenu(menuState) {\n\treturn {\n\t\ttype: \"TOGGLE_MENU\",\n\t\tmenuState,\n\t}\n}\n\nexport function setSecureLogin(secureLogin) {\n\treturn {\n\t\ttype: \"SET_SECURE_LOGIN\",\n\t\tsecureLogin,\n\t}\n}\n\nexport function toggleEnrollment(group) {\n\treturn (dispatch, getState) => {\n\t\tconst index = getState().users[getState().userId].enrollmentIds.indexOf(group.id);\n\t\tif (index === -1) {\n\t\t\tfetchData(\"user/enrollments\", \"put\", { groupId: group.id }, dispatch, getState)\n\t\t\t\t.then(() => {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: \"CHANGE_ENROLLMENTS\",\n\t\t\t\t\t\taction: \"ADD\",\n\t\t\t\t\t\tuserId: getState().userId,\n\t\t\t\t\t\tgroupId: group.id,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t} else {\n\t\t\tfetchData(\"user/enrollments\", \"delete\", { groupId: group.id }, dispatch, getState)\n\t\t\t\t.then(() => {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: \"CHANGE_ENROLLMENTS\",\n\t\t\t\t\t\taction: \"REMOVE\",\n\t\t\t\t\t\tuserId: getState().userId,\n\t\t\t\t\t\tgroupId: group.id,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\t}\n}\n\n\nexport function getGroupEvaluations(groupId) {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"group/evaluations\", \"post\", { groupId }, dispatch, getState, true).then((evaluations) => {\n\t\t\tdispatch({\n\t\t\t\ttype: \"CHANGE_GROUP\",\n\t\t\t\tgroup: {\n\t\t\t\t\tid: groupId,\n\t\t\t\t\tevaluations: evaluations,\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n\nexport function addSubject(name, description) {\n\treturn (dispatch, getState) => {\n\t\treturn fetchData(\"subject\", \"put\", { name, description }, dispatch, getState)\n\t\t\t.then(() => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\n\t\t\t\t\tnotification: {\n\t\t\t\t\t\tid: Math.random(),\n\t\t\t\t\t\tpriority: \"low\",\n\t\t\t\t\t\ttype: \"bar\",\n\t\t\t\t\t\tmessage: \"Vak aangemaakt, refresh om te zien\",\n\t\t\t\t\t\tscope: \"beheer\",\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n\nexport function addCourse(name, subjectId) {\n\treturn (dispatch, getState) => {\n\t\treturn fetchData(\"course\", \"put\", { name, subjectId }, dispatch, getState)\n\t\t\t.then(() => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\n\t\t\t\t\tnotification: {\n\t\t\t\t\t\tid: Math.random(),\n\t\t\t\t\t\tpriority: \"low\",\n\t\t\t\t\t\ttype: \"bar\",\n\t\t\t\t\t\tmessage: \"Module aangemaakt, refresh om te zien\",\n\t\t\t\t\t\tscope: \"beheer\",\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n\nexport function addGroup(courseId, userId) {\n\treturn (dispatch, getState) => {\n\t\treturn fetchData(\"group\", \"put\", { courseId, mainTeacherId: userId }, dispatch, getState)\n\t\t\t.then(() => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\n\t\t\t\t\tnotification: {\n\t\t\t\t\t\tid: Math.random(),\n\t\t\t\t\t\tpriority: \"low\",\n\t\t\t\t\t\ttype: \"bar\",\n\t\t\t\t\t\tmessage: \"Groep aangemaakt, refresh om te zien\",\n\t\t\t\t\t\tscope: \"beheer\",\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n\n\nexport function addParticipant(userId, groupId, participatingRole) {\n\treturn (dispatch, getState) => {\n\t\treturn fetchData(\"group/participants\", \"patch\", { userId, groupId, participatingRole }, dispatch, getState)\n\t\t\t.then(() => {\n\t\t\t\tconst index = getState().groups[groupId].enrollmentIds.indexOf(userId);\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\n\t\t\t\t\tgroup: {\n\t\t\t\t\t\tid: groupId,\n\t\t\t\t\t\tenrollmentIds: [\n\t\t\t\t\t\t\t...getState().groups[groupId].enrollmentIds.slice(0, index),\n\t\t\t\t\t\t\t...getState().groups[groupId].enrollmentIds.slice(index + 1)\n\t\t\t\t\t\t],\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\n\t\t\t\t\tnotification: {\n\t\t\t\t\t\tid: Math.random(),\n\t\t\t\t\t\tpriority: \"low\",\n\t\t\t\t\t\ttype: \"bar\",\n\t\t\t\t\t\tmessage: \"Deelnemer toegevoegd, refresh om te zien\",\n\t\t\t\t\t\tscope: \"*\",\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n\nexport function setCookie(cname, cvalue, exhours) {\n\tvar d = new Date();\n\td.setTime(d.getTime() + (exhours * 60 * 60 * 1000));\n\tvar expires = \"expires=\" + d.toUTCString();\n\tdocument.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n}\n\nexport function getCookie(cname) {\n\tvar name = cname + \"=\";\n\tvar decodedCookie = decodeURIComponent(document.cookie);\n\tvar ca = decodedCookie.split(';');\n\tfor (var i = 0; i < ca.length; i++) {\n\t\tvar c = ca[i];\n\t\twhile (c.charAt(0) === ' ')\n\t\t\tc = c.substring(1);\n\t\tif (c.indexOf(name) === 0)\n\t\t\treturn c.substring(name.length, c.length);\n\t}\n\treturn \"\";\n}\n\nexport function relogSecure() {\n\tsetCookie(\"beforeLoginPath\", window.location.pathname + window.location.search, 24);\n\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n\t\tdocument.location.href = \"http://localhost:26194/auth/login?secure=true\";\n\t} else {\n\t\tdocument.location.href = \"/auth/login?secure=true\";\n\t}\n}","import React, { Component } from \"react\";\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\n\nimport theme from '../lib/MuiTheme';\nimport { toggleMenu } from '../store/actions';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\n\nclass Login extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.generateEmail.bind(this)();\n\t\tthis.interval = setInterval(this.generateEmail.bind(this), 1500);\n\t}\n\n\tgenerateEmail() {\n\t\tlet school = this.state.school;\n\t\tlet schoolShort = this.state.schoolShort;\n\t\tlet studentNumber = this.state.studentNumber;\n\t\tswitch (Math.floor(Math.random() * 14)) {\n\t\t\tcase 0:\n\t\t\t\tschool = \"beekdallyceum\";\n\t\t\t\tschoolShort = \"BD\";\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tschool = \"candea\";\n\t\t\t\tschoolShort = \"CC\";\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tschool = \"quadraam\";\n\t\t\t\tschoolShort = \"CB\";\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tschool = \"lyceumelst\";\n\t\t\t\tschoolShort = \"LE\";\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tschool = \"liemerscollege\";\n\t\t\t\tschoolShort = \"LC\";\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tschool = \"lorentzlyceum\";\n\t\t\t\tschoolShort = \"LL\";\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tschool = \"maartenvanrossem\";\n\t\t\t\tschoolShort = \"MvR\";\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\tschool = \"montessoriarnhem\";\n\t\t\t\tschoolShort = \"MC\";\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\tschool = \"olympuscollege\";\n\t\t\t\tschoolShort = \"OC\";\n\t\t\t\tbreak;\n\t\t\tcase 9:\n\t\t\t\tschool = \"produsarnhem\";\n\t\t\t\tschoolShort = \"PD\";\n\t\t\t\tbreak;\n\t\t\tcase 10:\n\t\t\t\tschool = \"gymnasiumarnhem\";\n\t\t\t\tschoolShort = \"SGA\";\n\t\t\t\tbreak;\n\t\t\tcase 11:\n\t\t\t\tschool = \"symbion\";\n\t\t\t\tschoolShort = \"SY\";\n\t\t\t\tbreak;\n\t\t\tcase 12:\n\t\t\t\tschool = \"vmbo-venster\";\n\t\t\t\tschoolShort = \"VE\";\n\t\t\t\tbreak;\n\t\t\tcase 13:\n\t\t\tdefault:\n\t\t\t\tschool = \"hetwesteraam\";\n\t\t\t\tschoolShort = \"HW\";\n\t\t\t\tbreak;\n\t\t}\n\t\tstudentNumber = Math.floor(Math.random() * 999999) + \"\";\n\t\tfor (let i = studentNumber.length; i < 6; i++) {\n\t\t\tstudentNumber = \"0\" + studentNumber;\n\t\t}\n\t\tthis.setState({\n\t\t\tschool,\n\t\t\tschoolShort,\n\t\t\tstudentNumber,\n\t\t});\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.interval);\n\t}\n\n\tlogin() {\n\t\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n\t\t\tdocument.location.href = \"http://localhost:26194/auth/login\"\n\t\t} else {\n\t\t\tdocument.location.href = \"/auth/login\"\n\t\t}\n\t}\n\n\tgenerateColoredEmail(schoolShort, studentNumber, school) {\n\t\treturn (\n\t\t\t<Typography variant=\"subtitle1\" style={{ fontFamily: \"'Courier New', Courier, monospace\", overflow: \"hidden\" }}>\n\t\t\t\t<span style={{ color: theme.palette.secondary.light, fontWeight: \"bold\" }}>\n\t\t\t\t\t{schoolShort}\n\t\t\t\t</span>\n\t\t\t\t<span style={{ color: theme.palette.secondary.dark, fontWeight: \"bolder\" }}>\n\t\t\t\t\t{studentNumber}\n\t\t\t\t</span>\n\t\t\t\t<span style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t@ll.\n\t\t\t\t</span>\n\t\t\t\t<span style={{ color: theme.palette.secondary.light, fontWeight: \"bold\" }}>\n\t\t\t\t\t{school}\n\t\t\t\t</span>\n\t\t\t\t<span style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t.nl\n\t\t\t\t</span>\n\t\t\t</Typography>\n\t\t)\n\t}\n\n\trender() {\n\t\tif (this.props.userId != null) {\n\t\t\tthis.props.history.push(\"/\");\n\t\t\tthis.props.toggleMenu(true);\n\t\t} else {\n\t\t\tthis.props.toggleMenu(false);\n\t\t}\n\n\t\treturn (\n\t\t\t<Paper elevation={8} className=\"Login\" style={{ minHeight: \"330px\" }}>\n\t\t\t\t<div style={{ padding: \"20px\" }}>\n\t\t\t\t\t<Typography gutterBottom variant=\"body1\" color=\"primary\">\n\t\t\t\t\t\tLog in\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Typography variant=\"subtitle1\">\n\t\t\t\t\t\tGebruik je school-email om in te loggen:\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<br />\n\t\t\t\t\t<br />\n\t\t\t\t\t<center>\n\t\t\t\t\t\t{this.generateColoredEmail(\"schoolafkorting\", \"leerlingnummer\", \"school\")}\n\t\t\t\t\t\t{this.generateColoredEmail(this.state.schoolShort, this.state.studentNumber, this.state.school)}\n\t\t\t\t\t</center>\n\t\t\t\t\t<br />\n\t\t\t\t\t<br />\n\t\t\t\t\t<Button type=\"submit\" variant=\"contained\" size=\"large\" color=\"primary\" fullWidth onClick={this.login}>\n\t\t\t\t\t\tLogin met je Microsoft school account\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</Paper >\n\t\t);\n\t}\n}\n\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\tuserId: state.userId,\n\t};\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tlogin: (email, password) => {\n\t\t\tdispatch(toggleMenu(true));\n\t\t},\n\t\ttoggleMenu: (state) => {\n\t\t\tdispatch(toggleMenu(state));\n\t\t},\n\t};\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Login));\n\n\n\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nclass Page extends Component {\n\n\trender() {\n\t\tlet className = this.props.className;\n\t\tif (this.props.showMenu) {\n\t\t\tclassName += \" menuShown\"\n\t\t} else {\n\t\t\tclassName += \" menuHidden\"\n\t\t}\n\t\treturn (\n\t\t\t<div className={\"Page \" + className}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\tshowMenu: state.showMenu,\n\t};\n}\n\nexport default connect(mapStateToProps)(Page);\n","import React, { Component } from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nclass Progress extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisShowing: false,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.timeout = setTimeout(() => this.setState({ isShowing: true }), 200);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout(this.timeout);\n\t}\n\n\trender() {\n\t\tif (this.state.isShowing) {\n\t\t\treturn (\n\t\t\t\t<CircularProgress {...this.props}/>\n\t\t\t);\n\t\t}else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n}\n\nexport default Progress;","import React from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport theme from \"../lib/MuiTheme\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport PropTypes from \"prop-types\";\n\nclass Field extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: false\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    return {\n      ...prevState,\n      error: nextProps.editable\n        ? !Field.validate(nextProps.value, nextProps.validate)\n        : false\n    };\n  }\n\n  static validate(value, rules = {}, options = [value]) {\n    switch (rules.type) {\n      case \"phoneNumber\":\n        const re = /(^\\+[0-9]{2}|^\\+[0-9]{2}\\(0\\)|^\\(\\+[0-9]{2}\\)\\(0\\)|^00[0-9]{2}|^0)([0-9]{9}$|[0-9\\-\\s]{10}$)/i;\n        if (!re.test(value)) {\n          return false;\n        }\n        break;\n      case \"email\":\n        const re2 = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/g;\n        if (!re2.test(value)) {\n          return false;\n        }\n        break;\n      case \"integer\":\n        if (!/^\\+?[1-9][\\d]*$/i.test(value)) {\n          return false;\n        }\n        break;\n      case \"float\":\n        if (isNaN(value)) {\n          return false;\n        }\n        break;\n      case \"decimalGrade\":\n        //replace dot with comma and vice versa\n        const x = value\n          .replace(/\\./g, \"_$comma$_\")\n          .replace(/,/g, \".\")\n          .replace(/_\\$comma\\$_/g, \",\");\n        if (x === \"ND\") {\n          return true;\n        }\n        if (isNaN(x)) {\n          return false;\n        }\n        break;\n      default:\n        break;\n    }\n    if (rules.min) {\n      if (parseFloat(value) < rules.min) {\n        return false;\n      }\n    }\n    if (rules.max) {\n      if (parseFloat(value) > rules.max) {\n        return false;\n      }\n    }\n    if (rules.notEmpty) {\n      if (\n        value == null ||\n        value === \"\" ||\n        value === \" \" ||\n        options.indexOf(value) === -1\n      ) {\n        return false;\n      }\n    }\n    if (rules.maxLength && value != null) {\n      if (value.length > rules.maxLength) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  onChange = event => {\n    this.props.onChange(event.target.value);\n  };\n\n  render() {\n    let value = this.props.value == null ? \"\" : this.props.value;\n    let style = this.props.style || {};\n    let layout = this.props.layout || {};\n\n    let label = this.props.label;\n    let disabled = true;\n    let multiline = false;\n    let fullWidth = false;\n\n    let options = this.props.options;\n    let disableUnderline = style.underline || true;\n    let margin = style.margin || \"none\";\n    let marginPx = 0;\n    let menuItems;\n    let endAdornment;\n    let classNames = [];\n    if (this.props.style) {\n      switch (this.props.style.type) {\n        case \"headline\":\n          style = {\n            ...style,\n            ...theme.typography.headline\n          };\n          style.color = theme.palette.primary.main;\n          break;\n        case \"title\":\n          style = {\n            ...style,\n            ...theme.typography.title\n          };\n          style.color = theme.palette.primary.main;\n          break;\n        case \"caption\":\n          style.color = theme.palette.text.secondary;\n          break;\n        default:\n          style.color = theme.palette.text.primary;\n          break;\n      }\n      switch (this.props.style.color) {\n        case \"primary\":\n          style.color = theme.palette.primary.main;\n          break;\n        case \"primaryContrast\":\n          style.color = theme.palette.primary.contrastText;\n          break;\n        case \"secondary\":\n          style.color = theme.palette.secondary.main;\n          break;\n        case \"secondaryContrast\":\n          style.color = theme.palette.secondary.contrastText;\n          break;\n        case \"error\":\n          style.color = theme.palette.error.main;\n          break;\n        default:\n          break;\n      }\n    }\n\n    if (layout.alignment === \"right\") {\n      style.float = \"right\";\n      style.textAlign = \"right\";\n      classNames.push(\"right\");\n    }\n    if (layout.alignment === \"left\") {\n      style.float = \"left\";\n    }\n\n    if (layout.area) {\n      fullWidth = true;\n      multiline = true;\n    }\n\n    if (\n      this.props.default &&\n      this.props.editable === false &&\n      (value === \"\" || value == null)\n    ) {\n      value = this.props.default;\n    }\n\n    if (this.props.editable) {\n      disabled = false;\n      disableUnderline = style.underline || false;\n      margin = style.margin || \"normal\";\n    } else {\n\n      if (\n        options != null &&\n        options[0] != null &&\n        typeof options[0] !== \"string\"\n      ) {\n        const a = options.filter(opt => {\n          return opt.value === value;\n        })[0];\n        if (a != null) {\n          value = a.label;\n        }\n      }\n      options = null;\n    }\n    if (style.labelVisible != null && !(style.labelVisible === true)) {\n      label = null;\n    }\n\n    if (options) {\n      menuItems = options.map(option => {\n        if (typeof option !== \"string\") {\n          return (\n            <MenuItem key={option.value} value={option.value}>\n              {option.label}\n            </MenuItem>\n          );\n        }\n        return (\n          <MenuItem key={option} value={option}>\n            {option}\n          </MenuItem>\n        );\n      });\n    }\n    if (style.unit) {\n      endAdornment = (\n        <InputAdornment position=\"end\">{style.unit}</InputAdornment>\n      );\n    }\n    switch (margin) {\n      case \"dense\":\n        marginPx = 5;\n        break;\n      case \"normal\":\n        marginPx = 12;\n        break;\n      default:\n    }\n\n    const field = (\n      <TextField\n        id={this.props.id}\n        value={value}\n        margin=\"none\"\n        disabled={disabled}\n        fullWidth={fullWidth}\n        multiline={multiline}\n        className={classNames.join(\" \") + \" Field\"}\n        label={label}\n        select={options ? true : false}\n        style={{ flex: 1, ...style, margin: marginPx }}\n        onChange={this.onChange}\n        error={this.state.error}\n        InputProps={{\n          disableUnderline,\n          style: { ...style, width: \"100%\" },\n          endAdornment: endAdornment ? endAdornment : null,\n          inputProps: {\n            style: { ...style, width: \"100%\" }\n          }\n        }}\n      >\n        {menuItems}\n      </TextField>\n    );\n    if (layout.td) {\n      // style.width = undefined;\n      return <td style={style}>{field}</td>;\n    } else {\n      return field;\n    }\n  }\n}\n\nField.propTypes = {\n  validate: PropTypes.shape({\n    min: PropTypes.number,\n    max: PropTypes.number,\n    type: PropTypes.oneOf([\"phoneNumber\", \"email\", \"integer\", \"decimalGrade\"]),\n    notEmpty: PropTypes.bool,\n    maxLength: PropTypes.number\n  }),\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  style: PropTypes.shape({\n    labelVisible: PropTypes.bool,\n    type: PropTypes.oneOf([\"title\", \"caption\", \"headline\"]),\n    underline: PropTypes.bool,\n    color: PropTypes.oneOf([\n      \"primary\",\n      \"primaryContrast\",\n      \"secondary\",\n      \"error\"\n    ]),\n    unit: PropTypes.string,\n    margin: PropTypes.oneOf([\"none\", \"dense\", \"normal\"])\n  }),\n  layout: PropTypes.shape({\n    area: PropTypes.bool,\n    alignment: PropTypes.oneOf([\"left\", \"right\"]),\n    td: PropTypes.bool\n  }),\n  id: PropTypes.string,\n  label: PropTypes.string,\n  options: PropTypes.any,\n  // PropTypes.arrayOf(\n  // \tPropTypes.oneOfType([\n  // \t\tPropTypes.shape({\n  // \t\t\tvalue: PropTypes.string,\n  // \t\t\tlabel: PropTypes.string,\n  // \t\t}),\n  // \t\tPropTypes.string,\n  // \t])),\n  editable: PropTypes.bool,\n  default: PropTypes.string\n};\n\nexport default Field;\n","import React, { Component } from \"react\";\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Typography,\n  Button\n} from \"@material-ui/core/\";\nimport Clear from \"@material-ui/icons/Clear\";\n\nclass EnrollmentPopup extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  static getDerivedStateFromProps(nextProps, prevProps) {\n    return { page: nextProps.hasChosen ? \"cancel\" : \"remarks\", ...prevProps };\n  }\n\n  getDuplicatePage() {\n    return (\n      <Dialog open keepMounted>\n        <DialogContent>\n          <Typography color=\"error\" style={{ fontSize: \"16px\" }}>\n            {\"Je hebt al een module gekozen voor \" + this.props.group.day + \"!\"}\n          </Typography>\n          Je hebt je op deze dag al voor de module&nbsp;\n          <Typography color=\"primary\" variant=\"button\">\n            {this.props.chosenDayGroupName}\n          </Typography>\n          &nbsp;ingeschreven. Wil je je ook voor&nbsp;\n          <Typography color=\"primary\" variant=\"button\">\n            {this.props.group.courseName}\n          </Typography>\n          &nbsp;inschrijven?\n        </DialogContent>\n        <DialogActions>\n          <Button\n            color=\"primary\"\n            variant=\"contained\"\n            onClick={() => {\n              this.props.handlePopup(true);\n            }}\n          >\n            Toch inschrijven\n          </Button>\n          <Button color=\"default\">Annuleren</Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n\n  getCancelPage() {\n    return (\n      <Dialog open keepMounted>\n        <DialogTitle>Uitschrijven</DialogTitle>\n        <DialogContent>\n          Weet je zeker dat je wilt uitschrijven voor de module&nbsp;\n          <Typography color=\"primary\" variant=\"button\">\n            {this.props.group.courseName}\n          </Typography>{\" \"}\n          &nbsp;?\n        </DialogContent>\n        <DialogActions>\n          <Button color=\"default\">Annuleren</Button>\n          <Button onClick={() => this.props.handlePopup(true)} color=\"primary\">\n            Uitschrijven\n            <Clear />\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n\n  getConfirmPage() {\n    return (\n      <Dialog open keepMounted>\n        <DialogTitle>Inschrijven</DialogTitle>\n        <DialogContent>\n          Weet je zeker dat je wilt inschrijven voor de module&nbsp;\n          <Typography color=\"primary\" variant=\"button\">\n            {this.props.group.courseName}\n          </Typography>\n          &nbsp;?\n        </DialogContent>\n        <DialogActions>\n          <Button color=\"default\">Annuleren</Button>\n          <Button\n            onClick={() => {\n              this.props.handlePopup(true);\n            }}\n            variant=\"contained\"\n            color=\"primary\"\n          >\n            Inschrijven\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n\n  getRemarkPage = () => {\n    const remarks = this.props.group.remarks;\n    return (\n      <Dialog open keepMounted>\n        <DialogTitle>Opmerkingen</DialogTitle>\n        <DialogContent>\n          <Typography>{remarks}</Typography>\n        </DialogContent>\n        <DialogActions>\n          <Button color=\"default\">Annuleren</Button>\n          <Button\n            onClick={() => {\n              this.props.preventPopupClose(true);\n              this.setState({ page: \"hasChosenDay\" });\n            }}\n            color=\"primary\"\n          >\n            Verder\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  };\n\n  render() {\n    this.props.preventPopupClose(false);\n    const page = this.state.page;\n\n    if (page === \"cancel\") return this.getCancelPage();\n    if (\n      page === \"remarks\" &&\n      this.props.group.remarks != null &&\n      this.props.group.remarks.length > 1\n    ) {\n      return this.getRemarkPage();\n    }\n    if (page === \"hasChosenDay\" && this.props.hasChosenDay) {\n      return this.getDuplicatePage();\n    }\n    return this.getConfirmPage();\n  }\n}\n\nexport default EnrollmentPopup;\n","import React, { Component } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport { connect } from \"react-redux\";\nimport {\n  toggleEnrollment,\n  getEnrolLments\n} from \"../../store/actions\";\nimport Progress from \"../../components/Progress\";\nimport EnrollmentPopup from \"./EnrollmentPopup\";\n\nclass ChooseButton extends Component {\n  constructor(props) {\n    super(props);\n    this.props.getEnrolLments();\n    this.state = {\n      dialogOpen: false\n    };\n  }\n\n  preventPopupClose = preventClose => {\n    this.preventClose = preventClose;\n  };\n\n  handlePopup = doEnroll => {\n    if (doEnroll) {\n      this.props.toggleEnrollment(this.props.group);\n    }\n    if (!this.preventClose) {\n      this.setState({\n        dialogOpen: !this.state.dialogOpen\n      });\n    }\n  };\n\n  render() {\n    const props = this.props;\n    let dialog = this.state.dialogOpen ? (\n      <EnrollmentPopup\n        group={props.group}\n        hasChosen={props.hasChosen}\n        handlePopup={this.handlePopup}\n        hasChosenDay={props.hasChosenDay}\n        chosenDayGroupName={props.chosenDayGroupName}\n        preventPopupClose={this.preventPopupClose}\n      />\n    ) : null;\n\n    if (props.loading) {\n      return <Progress size={30} />;\n    }\n\n    if (props.hasChosen) {\n      return (\n        <Button\n          color=\"primary\"\n          onClick={() => this.handlePopup(false)}\n          style={props.style}\n        >\n          Ingeschreven\n          <Clear />\n          {dialog}\n        </Button>\n      );\n    }\n\n    if (this.props.canChoose) {\n      return (\n        <Button\n          color=\"primary\"\n          variant=\"contained\"\n          onClick={() => this.handlePopup(false)}\n          style={this.props.style}\n        >\n          {\"Inschrijven\" + (this.props.hasChosenDay ? \"*\" : \"\")}\n          {dialog}\n        </Button>\n      );\n    } else if (props.group.period < this.props.enrollmentPeriod) {\n      return (\n        <Button disabled color=\"primary\" style={props.style}>\n          Inschrijfperiode verlopen\n          {dialog}\n        </Button>\n      );\n    } else {\n      return (\n        <Button disabled color=\"primary\" style={props.style}>\n          Coming Soon\n          {dialog}\n        </Button>\n      );\n    }\n  }\n}\n\nfunction mapStateToProps(state, ownProps) {\n  if (state.users[state.userId].enrollmentIds == null) {\n    return {\n      loading: true\n    };\n  }\n\n  let chosenDayGroupName = -1;\n  state.users[state.userId].enrollmentIds.forEach(groupId => {\n    const group = state.groups[groupId];\n    if (\n      group.day === ownProps.group.day &&\n      group.period === ownProps.group.period\n    ) {\n      chosenDayGroupName = group.courseName;\n    }\n  });\n\n  return {\n    canChoose: ownProps.group.enrollable,\n    hasChosen:\n      state.users[state.userId].enrollmentIds.indexOf(ownProps.group.id) !== -1,\n    hasChosenDay: chosenDayGroupName !== -1,\n    chosenDayGroupName,\n    enrollmentPeriod: state.enrollmentPeriod\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    toggleEnrollment: group => dispatch(toggleEnrollment(group)),\n    getEnrolLments: () => dispatch(getEnrolLments())\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChooseButton);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport { relogSecure } from \"../store/actions\"\nimport Field from \"./Field\"\n\nclass EnsureSecureLogin extends Component {\n\n\trender() {\n\n\t\tif (!(this.props.active === false) && this.props.secureLogin == null) {\n\t\t\tconst content = <div>\n\t\t\t\t<Field value=\"Log opnieuw in om toegang te krijgen\" layout={{ area: true }} style={{ width: \"auto\" }} />\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" onClick={relogSecure}>\n\t\t\t\t\tInloggen\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t\tif (this.props.dense) {\n\t\t\t\treturn content;\n\t\t\t} else {\n\t\t\t\treturn <Paper style={{ padding: \"20px\", marginTop: \"25px\" }}>\n\t\t\t\t\t{content}\n\t\t\t\t</Paper>\n\t\t\t}\n\t\t} else {\n\t\t\treturn this.props.children;\n\t\t}\n\t}\n}\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\tsecureLogin: state.secureLogin,\n\t};\n}\n\nexport default connect(mapStateToProps, null)(EnsureSecureLogin);\n\n\n\n","import React, { Component } from 'react';\n\nimport Field from '../../components/Field';\nimport EnsureSecureLogin from '../../components/EnsureSecureLogin';\nimport { Tooltip, TableSortLabel, Typography, Paper } from '@material-ui/core';\n\nconst CHECK_FORMATS = [{\n\tlabel: \"Gehaald\",\n\tvalue: \"passed\",\n},\n{\n\tlabel: \"Niet gehaald\",\n\tvalue: \"failed\",\n},\n{\n\tlabel: \"Niet deelgenomen\",\n\tvalue: \"ND\",\n}];\n\nconst STEPWISE_FORMATS = [{\n\tlabel: \"Onvoldoende\",\n\tvalue: \"O\",\n},\n{\n\tlabel: \"Voldoende\",\n\tvalue: \"V\",\n},\n{\n\tlabel: \"Goed\",\n\tvalue: \"G\",\n},\n{\n\tlabel: \"Niet deelgenomen\",\n\tvalue: \"ND\",\n}]\n\nconst EVALUATION_FORMATS = [{\n\tlabel: \"vink\",\n\tvalue: \"check\",\n\toptions: CHECK_FORMATS,\n},\n{\n\tlabel: \"trapsgewijs\",\n\tvalue: \"stepwise\",\n\toptions: STEPWISE_FORMATS,\n}, {\n\tlabel: \"cijfer\",\n\tvalue: \"decimal\",\n\toptions: \"decimal\",\n}];\n\nfunction getEvaluationColor(ev) {\n\tif (ev.assesment === \"ND\" || ev.assesment == null) {\n\t\treturn \"#673ab7\";\n\t}\n\tswitch (ev.type) {\n\t\tcase \"stepwise\":\n\t\t\treturn \"#3f51b5\";\n\t\tcase \"check\":\n\t\t\treturn \"#009688\";\n\t\tcase \"decimal\":\n\t\t\treturn \"#00bcd4\"\n\t\tdefault:\n\t\t\treturn \"#673ab7\";\n\t}\n}\n\nfunction translateAssessment(evaluation) {\n\tlet { assesment, type } = evaluation;\n\tswitch (type) {\n\t\tcase \"decimal\":\n\t\t\treturn assesment + \"\";\n\t\tcase \"stepwise\":\n\t\t\treturn STEPWISE_FORMATS.filter(({ label, value }) => value === assesment)[0].label;\n\t\tcase \"check\":\n\t\t\treturn CHECK_FORMATS.filter(({ label, value }) => value === assesment)[0].label;\n\t\tdefault:\n\t\t\treturn \"---\"\n\t}\n}\n\n\n/**\n * Function that determines whether a row in the portfolio should be present\n * or omitted.\n *\n * @param evaluation The evaluation object.\n * @returns {boolean} True if the row should be in the portfolio.\n */\nfunction isCertificateWorthy(evaluation) {\n\tif (evaluation != null) {\n\t\tconst assesment = evaluation.assesment + \"\";\n\t\tswitch (evaluation.type) {\n\t\t\tcase \"decimal\":\n\t\t\t\tconst x = assesment.replace(/\\./g, \"_$comma$_\").replace(/,/g, \".\").replace(/_\\$comma\\$_/g, \",\");\n\t\t\t\treturn x >= 6.0;\n\t\t\tcase \"stepwise\":\n\t\t\t\treturn assesment === \"G\" || assesment === \"V\";\n\t\t\tcase \"check\":\n\t\t\t\treturn assesment === \"passed\";\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn false;\n}\n\n\nclass Evaluation extends Component {\n\n\trender() {\n\t\tconst e = this.props.evaluation;\n\t\tlet style = {\n\t\t\tunderline: false,\n\t\t\tflex: 2,\n\t\t};\n\t\tlet layout = { td: true };\n\t\tif (this.props.student) {\n\t\t\tstyle.type = \"headline\";\n\t\t\tstyle.color = \"primaryContrast\"\n\t\t\tlayout.td = false;\n\t\t\tlayout.alignment = \"right\";\n\t\t}\n\t\tif (e.type === \"decimal\") {\n\t\t\treturn <Field\n\t\t\t\tstyle={style}\n\t\t\t\tvalidate={{ min: 1, max: 10, type: \"decimalGrade\", notEmpty: true }}\n\t\t\t\tlayout={layout}\n\t\t\t\tlabel=\"Beoordeling\"\n\t\t\t\tname={e.userId}\n\t\t\t\tvalue={e.assesment ? e.assesment : \"\"}\n\t\t\t\teditable={this.props.editable}\n\t\t\t\tonChange={this.props.onChange}\n\t\t\t/>\n\t\t} else {\n\t\t\treturn <Field\n\t\t\t\tstyle={style}\n\t\t\t\tname={e.userId}\n\t\t\t\tlabel=\"Beoordeling\"\n\t\t\t\tlayout={layout}\n\t\t\t\tvalue={e.assesment ? e.assesment : \"\"}\n\t\t\t\toptions={EVALUATION_FORMATS.filter(f => f.value === e.type)[0].options}\n\t\t\t\teditable={this.props.editable}\n\t\t\t\tonChange={this.props.onChange}\n\t\t\t/>\n\t\t}\n\t}\n\n}\n\n\nclass EvaluationTab extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tsortValue: \"\",\n\t\t\tsortDirection: \"\",\n\t\t}\n\t}\n\n\tonSortChange = (value) => {\n\t\tthis.setState({\n\t\t\tsortValue: value,\n\t\t\tsortDirection: this.state.sortDirection === \"desc\" && this.state.sortValue === value ? \"asc\" : \"desc\"\n\t\t});\n\t}\n\n\thandleSingleChange = (newEv) => {\n\t\tlet newEvaluations = this.props.evaluations.map((e) => {\n\t\t\tif (e.userId === newEv.userId) {\n\t\t\t\treturn newEv;\n\t\t\t} else {\n\t\t\t\treturn { ...e }\n\t\t\t}\n\t\t});\n\t\tthis.props.handleChange(newEvaluations);\n\t}\n\n\thandleEvaluationTypeChange(newValue) {\n\t\tlet newEvaluations = [];\n\t\tfor (let i = 0; i < this.props.evaluations.length; i++) {\n\t\t\tnewEvaluations.push({\n\t\t\t\t...this.props.evaluations[i],\n\t\t\t\ttype: newValue,\n\t\t\t});\n\t\t\tthis.props.handleChange(newEvaluations);\n\t\t}\n\t}\n\n\tsortEvaluations = () => {\n\t\tlet evaluations = this.props.evaluations;\n\t\tconst sortValue = this.state.sortValue;\n\t\tlet sortDirection = this.state.sortDirection === \"asc\" ? \"asc\" : \"desc\";\n\n\t\tif (sortValue === \"name\") {\n\t\t\tevaluations.sort((a, b) => {\n\t\t\t\tlet cmp = b.displayName < a.displayName;\n\t\t\t\treturn sortDirection === \"asc\" ? cmp : -cmp;\n\t\t\t})\n\t\t} else if (sortValue === \"evaluations\") {\n\t\t\tevaluations.sort((a, b) => {\n\t\t\t\ta = a[\"assesment\"];\n\t\t\t\tb = b[\"assesment\"];\n\t\t\t\tlet cmp = (b === null) - (a == null) || +(a > b) || -(a < b);\n\t\t\t\treturn sortDirection === \"asc\" ? cmp : -cmp;\n\t\t\t})\n\t\t}\n\t\treturn evaluations;\n\t}\n\n\trender() {\n\t\tlet sortValue = this.state.sortValue;\n\t\tlet sortDirection = this.state.sortDirection === \"asc\" ? \"asc\" : \"desc\";\n\t\tconst style = {\n\t\t\tmarginTop: \"10px\",\n\t\t\talignItems: \"center\",\n\t\t\tpaddingRight: \"15px\",\n\t\t\tpaddingLeft: \"15px\",\n\t\t\tdisplay: \"flex\",\n\t\t};\n\t\tconst evaluations = this.props.evaluations;\n\t\tif (evaluations.length === 0) {\n\t\t\treturn \"Er zijn nog geen beoordelingen beschikbaar\";\n\t\t}\n\t\tconst evComps = this.sortEvaluations()\n\t\t\t.map(ev => {\n\t\t\t\treturn (\n\t\t\t\t\t<Paper style={style} key={ev.userId} component=\"tr\">\n\t\t\t\t\t\t<Field style={{ type: \"title\", color: \"primary\", flex: 2 }} value={ev.displayName} layout={{ td: true }} />\n\t\t\t\t\t\t<Evaluation\n\t\t\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\t\t\tevaluation={ev}\n\t\t\t\t\t\t\tonChange={(assesment) => this.handleSingleChange({ ...ev, assesment })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tstyle={{ underline: false, flex: 5 }}\n\t\t\t\t\t\t\tlayout={{ area: true, td: true }}\n\t\t\t\t\t\t\tlabel={\"Uitleg\"}\n\t\t\t\t\t\t\tname={ev.userId}\n\t\t\t\t\t\t\tvalue={ev.explanation}\n\t\t\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\t\t\tonChange={(explanation) => this.handleSingleChange({ ...ev, explanation })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Paper >\n\t\t\t\t);\n\t\t\t});\n\n\t\treturn (\n\t\t\t<EnsureSecureLogin active={this.props.editable}>\n\t\t\t\t<table style={{ width: \"100%\" }}>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<Paper style={{ ...style, backgroundColor: \"#e0e0e0\" }} component=\"tr\">\n\t\t\t\t\t\t\t<td style={{ paddingLeft: \"15px\" }}>\n\t\t\t\t\t\t\t\t<Typography type=\"title\" color=\"primary\" style={{ padding: \"5px 0\" }} >\n\t\t\t\t\t\t\t\t\t<Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\n\t\t\t\t\t\t\t\t\t\t<TableSortLabel\n\t\t\t\t\t\t\t\t\t\t\tactive={sortValue === \"evaluations\"}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.onSortChange(\"evaluations\")}\n\t\t\t\t\t\t\t\t\t\t\tdirection={sortDirection}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ color: \"inherit\", fontSize: \"1.5rem\", }}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tBeoordelingen\n\t\t\t\t\t\t\t\t\t</TableSortLabel>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\n\t\t\t\t\t\t\t\t\t\t<TableSortLabel\n\t\t\t\t\t\t\t\t\t\t\tactive={sortValue === \"name\"}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.onSortChange(\"name\")}\n\t\t\t\t\t\t\t\t\t\t\tdirection={sortDirection}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tNaam\n\t\t\t\t\t\t\t\t\t\t</TableSortLabel>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td style={{ flex: \"5\" }} />\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tlabel=\"Beoordelingsformaat\"\n\t\t\t\t\t\t\t\t\tstyle={{ type: \"caption\", underline: false, margin: \"normal\", labelVisible: true }}\n\t\t\t\t\t\t\t\t\tlayout={{ alignment: \"right\" }}\n\t\t\t\t\t\t\t\t\tvalue={evaluations[0].type}\n\t\t\t\t\t\t\t\t\toptions={EVALUATION_FORMATS}\n\t\t\t\t\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\t\t\t\t\tonChange={this.handleEvaluationTypeChange.bind(this)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</Paper >\n\t\t\t\t\t\t{evComps}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table >\n\t\t\t</EnsureSecureLogin>\n\t\t);\n\t}\n\n}\n\nexport { Evaluation, EvaluationTab, getEvaluationColor, isCertificateWorthy, translateAssessment };","import { Typography, Button, Paper, Badge } from \"@material-ui/core\";\nimport React, { Component } from \"react\";\nimport { withRouter } from \"react-router\";\nimport Field from \"../../components/Field\";\nimport ChooseButton from \"./ChooseButton\";\nimport { Evaluation, getEvaluationColor } from \"./Evaluation\";\nimport \"./GroupCard.css\";\n\nclass GroupCard extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hover: false\n    };\n  }\n\n  expand() {\n    this.props.history.push(\"/groep/\" + this.props.group.id);\n  }\n\n  getBottomSection(hasEvaluation) {\n    if (hasEvaluation) {\n      return (\n        <div\n          className=\"footer\"\n          style={{\n            backgroundColor: getEvaluationColor(this.props.group.evaluation)\n          }}\n        >\n          <Field value=\"Beoordeling\" style={{ type: \"title\", flex: 2 }} />\n          <Evaluation evaluation={this.props.group.evaluation} student />\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"footer\">\n          <Button color=\"secondary\" onClick={this.expand.bind(this)}>\n            Bekijken\n          </Button>\n          {this.props.role === \"student\" && (\n            <ChooseButton group={this.props.group} />\n          )}\n        </div>\n      );\n    }\n  }\n\n  render() {\n    const group = this.props.group;\n    const hasEvaluation = this.props.group.evaluation &&\n      this.props.group.evaluation.assesment !== \"\" &&\n      this.props.group.evaluation.assesment !== null;\n    return (\n      <div className=\"GroupCard\">\n        <Paper\n          elevation={this.state.hover ? 4 : 2}\n          onMouseEnter={() => this.setState({ hover: true })}\n          onMouseLeave={() => this.setState({ hover: false })}\n        >\n          <Badge\n            color=\"secondary\"\n            invisible={this.props.schoolYear === group.schoolYear}\n            badgeContent={group.schoolYear}\n          >\n            <div className=\"GroupCardInside\">\n              <Typography\n                variant=\"caption\"\n                color=\"primary\"\n                style={{\n                  overflow: \"hidden\",\n                  maxHeight: \"65px\",\n                  cursor: \"pointer\"\n                }}\n                onClick={() => {\n                  this.props.history.push(\"/groep/\" + group.id);\n                }}\n              >\n                {group.subjectName +\n                  \" - #M\" +\n                  (group.courseId + \"\").padStart(4, \"0\")}\n              </Typography>\n              <Typography\n                variant=\"h1\"\n                style={{\n                  overflow: \"hidden\",\n                  height: \"64px\",\n                  cursor: \"pointer\",\n                  textTransform: \"uppercase\",\n                  fontSize: \"24px\"\n                }}\n                onClick={() => {\n                  this.props.history.push(\"/groep/\" + group.id);\n                }}\n              >\n                {group.courseName}\n              </Typography>\n              <div>\n                <Typography\n                  style={{\n                    display: \"inline-block\",\n                    fontWeight: \"bold\",\n                    float: \"right\"\n                  }}\n                >\n                  {\"Blok \" + group.period + \" - \" + group.day}\n                </Typography>\n                <Typography\n                  style={{ display: \"inline-block\", fontWeight: \"bold\" }}\n                >\n                  {group.enrollableFor || \"Iedereen\"}\n                </Typography>\n              </div>\n              {hasEvaluation ? (\n                <Typography\n                  style={{ maxHeight: \"164px\", overflow: \"hidden\" }}\n                  gutterBottom\n                >\n                  <b>Uitleg beoordeling: </b>\n                  {group.evaluation.explanation}\n                </Typography>\n              ) : (\n                  <Typography\n                    style={{ maxHeight: \"164px\", overflow: \"hidden\" }}\n                    gutterBottom\n                  >\n                    {group.courseDescription}\n                  </Typography>\n                )}\n              {this.getBottomSection(hasEvaluation)}\n            </div>\n          </Badge>\n        </Paper>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(GroupCard);\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\n\nimport Paper from '@material-ui/core/Paper';\nimport { Typography } from '@material-ui/core';\n\nclass GroupCard extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\thover: false,\n\t\t\tstyle: {\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: \"auto\",\n\t\t\t\tmargin: \"0px\",\n\t\t\t\tpadding: \"10px\",\n\t\t\t},\n\t\t}\n\t}\n\n\tformatPhoneNumber(number) {\n\t\tif (number == null) {\n\t\t\tnumber = \"\";\n\t\t}\n\t\tlet numberWithoutCharacters = number.replace(/\\D/g, '');\n\t\tif (numberWithoutCharacters.length === 10) { // Either 06... or regional i.e. 024 ...\n\t\t\tif (numberWithoutCharacters[1] === \"6\") { // 06...\n\t\t\t\treturn (numberWithoutCharacters.substr(0, 2) + \" \" + numberWithoutCharacters.substr(2, 8));\n\t\t\t} else { // 024 ...\n\t\t\t\treturn (numberWithoutCharacters.substr(0, 3) + \" \" + numberWithoutCharacters.substr(3, 7));\n\t\t\t}\n\t\t}\n\t\tconst mobileTest = /(0031|31)0?(6)?([0-9]+)$/gm;\n\t\tconst match = mobileTest.exec(numberWithoutCharacters);\n\t\tif (match) {\n\t\t\tif (match[2]) { // +31 06 \n\t\t\t\treturn \"+31 06 \" + match[3];\n\t\t\t} else { // +31 ...\n\t\t\t\treturn \"+31 \" + match[3];\n\t\t\t}\n\t\t} else {\n\t\t\treturn number; // return input if unrecognizable \n\t\t}\n\t}\n\n\texpand() {\n\t\tthis.props.history.push(\"/user/\" + this.props.user.id)\n\t}\n\n\trender() {\n\t\tlet user = { ...this.props.user };\n\t\tlet style = { ...this.state.style };\n\t\treturn (\n\t\t\t<tr key={user.id}>\n\t\t\t\t<Paper\n\t\t\t\t\televation={this.state.hover ? 2 : 1}\n\t\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\n\t\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\n\t\t\t\t\tcomponent=\"td\"\n\t\t\t\t\tstyle={style}\n\t\t\t\t>\n\t\t\t\t\t<div style={{\n\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\tjustifyContent: \"space-between\"\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<Typography variant=\"button\" color={user.role === \"teacher\" ? \"secondary\" : \"primary\"} style={{ flex: 1 }} >\n\t\t\t\t\t\t\t{user.firstName + \" \" + user.lastName}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography variant=\"subtitle1\" style={{ flex: 1 }} >\n\t\t\t\t\t\t\t{user.school}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\n\t\t\t\t\t\t\t{user.level + \" - \" + user.year}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\n\t\t\t\t\t\t\t{user.role === \"teacher\" ? \"docent\" : \"leerling\"}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\n\t\t\t\t\t\t\t{user.profile}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</div>\n\t\t\t\t\t{this.props.role === \"admin\" &&\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\tjustifyContent: \"space-between\"\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\n\t\t\t\t\t\t\t\t{user.email}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\n\t\t\t\t\t\t\t\t{user.preferedEmail}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<div style={{ flex: 1 }} />\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\n\t\t\t\t\t\t\t\t{this.formatPhoneNumber(user.phoneNumber)}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\n\t\t\t\t\t\t\t\t{user.id}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</Paper >\n\t\t\t</tr>\n\t\t);\n\t}\n}\n\n\nexport default withRouter(GroupCard);\n\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\n\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\n\nconst CARD_STYLE = {\n\twidth: \"300px\",\n\theight: \"80px\",\n\tpadding: \"20px\",\n\tverticalAlign: \"top\",\n\tmargin: \"20px\",\n\tdisplay: \"inline-block\",\n\tcursor: \"pointer\",\n}\n\nclass GroupCard extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\thover: false,\n\t\t\tstyle: {\n\t\t\t\t...CARD_STYLE,\n\t\t\t\t...this.props.style,\n\t\t\t}\n\t\t}\n\t}\n\n\texpand() {\n\t\tthis.props.history.push(\"/gebruiker/\" + this.props.user.id)\n\t}\n\n\trender() {\n\t\tconst user = this.props.user;\n\t\treturn (\n\t\t\t<Paper\n\t\t\t\televation={this.state.hover ? 4 : 2}\n\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\n\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\n\t\t\t\tstyle={this.state.style}\n\t\t\t>\n\t\t\t\t<Typography variant=\"button\" color={user.role === \"teacher\" ? \"secondary\" : \"primary\"} >\n\t\t\t\t\t{user.firstName + \" \" + user.lastName}\n\t\t\t\t</Typography>\n\t\t\t\t<Typography variant=\"subtitle1\">\n\t\t\t\t\t{(user.role === \"teacher\" ? \"docent\" : \"leerling\") + \"\\t\" + user.school}\n\t\t\t\t</Typography>\n\t\t\t</Paper >\n\t\t);\n\t}\n\n\n}\n\n\nexport default withRouter(GroupCard);\n\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport UserRow from \"./UserRow\";\nimport UserCard from \"./UserCard\";\nimport { setSecureLogin } from \"../../store/actions\"\n\nimport { withRouter } from 'react-router-dom';\nimport Progress from '../../components/Progress'\nimport Field from \"../../components/Field\"\nimport { Button } from \"@material-ui/core\";\n\nclass User extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\n\trender() {\n\t\tif (this.props.user == null) {\n\t\t\tif (this.props.display === \"page\") {\n\t\t\t\tif (this.props.notExists) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"page\">\n\t\t\t\t\t\t\tDe opgevraagde gebruiker bestaat niet\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"page\">\n\t\t\t\t\t\t\t<Progress />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.props.notExists) {\n\t\t\t\t\treturn null;\n\t\t\t\t} else {\n\t\t\t\t\treturn <Progress />;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tswitch (this.props.display) {\n\t\t\tcase \"name\":\n\t\t\t\treturn <Field value={this.props.user.displayName} style={{ type: \"title\", width: \"auto\", }} layout={{ td: true }} />;\n\t\t\tcase \"row\":\n\t\t\t\treturn (\n\t\t\t\t\t<UserRow {...this.props}>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.props.actions &&\n\t\t\t\t\t\t\tthis.props.actions.map(action => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Button onClick={() => action.onClick(this.props.userId)} variant=\"contained\" color=\"primary\" style={{ marginRight: \"10px\" }} >\n\t\t\t\t\t\t\t\t\t\t{action.label}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</UserRow>\n\t\t\t\t);\n\t\t\tcase \"card\":\n\t\t\tdefault:\n\t\t\t\treturn (\n\t\t\t\t\t<UserCard {...this.props} />\n\t\t\t\t);\n\t\t}\n\t}\n}\n\n\nfunction mapStateToProps(state, ownProps) {\n\tlet id = ownProps.match.params.userId || ownProps.userId;\n\tlet display = ownProps.display || \"page\";\n\n\tlet notExists = false;\n\tlet user = null;\n\n\tif (id == null) {\n\t\tid = state.userId;\n\t}\n\n\tif (state.users == null || state.users[id] == null) {\n\t\tif (id == null || state.hasFetched.indexOf(\"User.get(\" + id + \")\") !== -1) {\n\t\t\tnotExists = true;\n\t\t}\n\t} else {\n\t\tuser = state.users[id];\n\t}\n\n\treturn {\n\t\trole: state.role,\n\t\tuser,\n\t\tnotExists,\n\t\tdisplay,\n\t\tuserId: id,\n\t\townProfile: (\"\" + id) === (\"\" + state.userId),\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tsetSecureLogin: (secureLogin) => dispatch(setSecureLogin(secureLogin)),\n\t};\n}\n\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(User));\n","import React, { Component } from 'react';\nimport map from \"lodash/map\"\nimport filter from \"lodash/filter\"\nimport User from \"../user/User\"\nimport Field from \"../../components/Field\"\nimport { Paper } from '@material-ui/core';\n\nclass PresenceTable extends Component {\n\n\tcreatePresenceComponent(presence, i) {\n\t\tlet options = [{ label: \"Actief\", value: \"present\" },\n\t\t{ label: \"Niet actief\", value: \"absent\" }];\n\t\tif (!this.props.editable && presence.userStatus === \"absent\") {\n\t\t\toptions[0].label = \"Afgemeld\";\n\t\t\toptions[1].label = \"Afgemeld\";\n\t\t}\n\t\treturn <Field\n\t\t\tkey={i}\n\t\t\tvalue={presence.status}\n\t\t\toptions={options}\n\t\t\tlabel={presence.userStatus === \"absent\" ? \"afgemeld\" : undefined}\n\t\t\tlayout={{ td: true, area: true }}\n\t\t\teditable={this.props.editable}\n\t\t\tonChange={(status) => {\n\t\t\t\tthis.props.handleChange({\n\t\t\t\t\t...presence,\n\t\t\t\t\tstatus,\n\t\t\t\t});\n\t\t\t}}\n\t\t/>;\n\t}\n\n\tcreateRow = (participantId) => {\n\t\tconst content = map(this.props.lessons, ((lesson, i) => {\n\t\t\tconst p = filter(this.props.presence, presence => {\n\t\t\t\treturn presence.lessonId === lesson.id && presence.userId === participantId;\n\t\t\t});\n\t\t\tif (p.length === 1) {\n\t\t\t\treturn this.createPresenceComponent(p[0], i);\n\t\t\t} else {\n\t\t\t\treturn this.createPresenceComponent({\n\t\t\t\t\tid: Math.floor(-Math.random() * 100000),\n\t\t\t\t\tlessonId: lesson.id,\n\t\t\t\t\tuserId: participantId,\n\t\t\t\t\tstatus: \"present\",\n\t\t\t\t}, i);\n\t\t\t}\n\t\t}));\n\n\t\treturn (\n\t\t\t<Paper component=\"tr\" elevation={1} key={\"p\" + participantId}>\n\t\t\t\t<User key={participantId} userId={participantId} display=\"name\" />\n\t\t\t\t{content}\n\t\t\t</Paper>\n\t\t);\n\t}\n\n\tcreateLessonHeader = (lesson) => {\n\t\tconst content = map(this.props.lessons, lesson => {\n\t\t\treturn <Field value={\"Les \" + lesson.numberInBlock} key={lesson.id} style={{ type: \"title\" }} layout={{ td: true, area: true }} />;\n\t\t});\n\t\treturn (\n\t\t\t<Paper component=\"tr\" elevation={2} key={\"l\" + lesson} style={{ backgroundColor: \"#e0e0e0\" }} >\n\t\t\t\t<Field value=\"\" layout={{ td: true, area: true }} />\n\t\t\t\t{content}\n\t\t\t</Paper>\n\t\t);\n\t}\n\n\trender() {\n\t\tlet rows = this.props.participantIds.map(this.createRow);\n\t\trows.unshift(this.createLessonHeader());\n\t\treturn <table>\n\t\t\t<tbody>\n\t\t\t\t{rows}\n\t\t\t</tbody>\n\t\t</table>;\n\t}\n\n}\n\nexport default PresenceTable;","import React, { Component } from 'react';\n\nimport Paper from '@material-ui/core/Paper';\nimport Field from '../../components/Field';\nimport { Button } from '@material-ui/core';\nimport { setPresenceUserStatus } from \"../../store/actions\";\nimport { connect } from \"react-redux\";\n\nclass Lesson extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\thover: false,\n\t\t\tstyle: {\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: \"auto\",\n\t\t\t\tmarginTop: \"10px\",\n\t\t\t\tmarginBottom: \"10px\",\n\t\t\t\tpadding: \"2px\",\n\t\t\t\tdisplay: \"flex\",\n\t\t\t\talignItems: \"start\",\n\t\t\t\tposition: \"relative\",\n\t\t\t},\n\t\t}\n\t}\n\n\tgetWeekdayString(number) {\n\t\treturn [\"zondag\", \"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\"][number];\n\t}\n\n\tgetOptOutButton() {\n\t\tif (this.props.lesson.userStatus === \"absent\") {\n\t\t\treturn < div style={{ flex: 1 }}>\n\t\t\t\t<Button\n\t\t\t\t\tstyle={{ width: \"70px\", float: \"right\" }}\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tmini\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tonClick={() => this.props.setPresenceUserStatus(this.props.lesson.id, \"present\", this.props.lesson.courseGroupId)}\n\t\t\t\t>\n\t\t\t\t\tAanmelden\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t}\n\t\treturn < div style={{ flex: 1 }}>\n\t\t\t<Button\n\t\t\t\tstyle={{ width: \"70px\", float: \"right\" }}\n\t\t\t\tsize=\"small\"\n\t\t\t\tmini\n\t\t\t\tcolor=\"secondary\"\n\t\t\t\tonClick={() => this.props.setPresenceUserStatus(this.props.lesson.id, \"absent\", this.props.lesson.courseGroupId)}\n\t\t\t>\n\t\t\t\tAfmelden\n\t\t\t</Button>\n\t\t</div>\n\t}\n\n\n\thandleChange = (name, value) => {\n\t\tthis.props.handleChange({\n\t\t\t...this.props.lesson,\n\t\t\t[name]: value,\n\t\t});\n\t}\n\n\n\trender() {\n\t\tconst lesson = this.props.lesson;\n\t\tif (lesson.id === -1) {\n\t\t\treturn (\n\t\t\t\t<Paper\n\t\t\t\t\televation={this.state.hover ? 2 : 1}\n\t\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\n\t\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\n\t\t\t\t\tcomponent=\"tr\"\n\t\t\t\t\tstyle={{ backgroundColor: \"#e0e0e0\" }}\n\t\t\t\t>\n\t\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Lesnummer\" />\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Soort les\" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<Field style={{ flex: 4, fontWeight: \"bold\" }} value=\"Onderwerp\" layout={{ td: true }} />\n\t\t\t\t\t<Field style={{ flex: 8, fontWeight: \"bold\" }} value=\"Activiteiten\" layout={{ td: true }} />\n\t\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Datum\" layout={{ alignment: \"right\" }} />\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Aanwezigheid\" layout={{ alignment: \"right\" }} />\n\t\t\t\t\t</td>\n\t\t\t\t</Paper>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Paper\n\t\t\t\televation={this.state.hover ? 2 : 1}\n\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\n\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\n\t\t\t\tcomponent=\"tr\"\n\t\t\t>\n\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tlayout={{ area: true }}\n\t\t\t\t\t\tstyle={{ fontWeight: \"bold\" }}\n\t\t\t\t\t\tvalue={\"Les \" + lesson.numberInBlock}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabel=\"Soort les\"\n\t\t\t\t\t\tlayout={{ area: true }}\n\t\t\t\t\t\tvalue={lesson.kind}\n\t\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\t\tonChange={(value) => this.handleChange(\"kind\", value)}\n\t\t\t\t\t/>\n\t\t\t\t</td>\n\t\t\t\t<Field\n\t\t\t\t\tlabel=\"Onderwerp\"\n\t\t\t\t\tstyle={{ flex: 4 }}\n\t\t\t\t\tvalue={lesson.subject}\n\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\tonChange={(value) => this.handleChange(\"subject\", value)}\n\t\t\t\t\tlayout={{ td: true, area: true }}\n\t\t\t\t/>\n\t\t\t\t<Field\n\t\t\t\t\tlabel=\"Activiteiten\"\n\t\t\t\t\tstyle={{ flex: 8 }}\n\t\t\t\t\tvalue={lesson.activities}\n\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\tonChange={(value) => this.handleChange(\"activities\", value)}\n\t\t\t\t\tlayout={{ td: true, area: true }}\n\t\t\t\t/>\n\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlayout={{ alignment: \"right\" }}\n\t\t\t\t\t\tvalue={this.getWeekdayString(new Date(lesson.date).getDay()) + \" \" + new Date(lesson.date).getDate() + \"-\" + (new Date(lesson.date).getMonth() + 1) + \"-\" + new Date(lesson.date).getFullYear()}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabel=\"Aanwezigheid\"\n\t\t\t\t\t\tstyle={{ labelVisible: true }}\n\t\t\t\t\t\tlayout={{ alignment: \"right\" }}\n\t\t\t\t\t\tvalue={lesson.presence}\n\t\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\t\tonChange={(value) => this.handleChange(\"presence\", value)}\n\t\t\t\t\t\toptions={[{ label: \"Noodzakelijk\", value: \"required\" }, { label: \"Eigen keuze\", value: \"optional\" }, { label: \"Geen bijeenkomst\", value: \"unrequired\" }]}\n\t\t\t\t\t/>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.userIsMemberOfGroup && this.props.role === \"student\" ? this.getOptOutButton() : null\n\t\t\t\t\t}\n\t\t\t\t</td>\n\t\t\t</Paper >\n\t\t);\n\t}\n\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tsetPresenceUserStatus: (lessonId, userStatus, groupId) => dispatch(setPresenceUserStatus(lessonId, userStatus, groupId)),\n\t};\n}\n\nexport default connect(null, mapDispatchToProps)(Lesson);\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Typography, Tooltip, TableSortLabel, Paper } from \"@material-ui/core\";\nimport User from \"./User\";\n\nclass UserList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hover: false,\n      style: {\n        width: \"100%\",\n        height: \"auto\",\n        margin: \"0px\",\n        padding: \"10px\",\n        backgroundColor: \"#e0e0e0\"\n      },\n      sortValue: \"\",\n      sortDirection: \"\"\n    };\n  }\n\n  onSortChange = value => {\n    this.setState({\n      sortValue: value,\n      sortDirection:\n        this.state.sortDirection === \"desc\" && this.state.sortValue === value\n          ? \"asc\"\n          : \"desc\"\n    });\n  };\n\n  headerTitle(variant, value, title) {\n    let sortValue = this.state.sortValue;\n    let sortDirection = this.state.sortDirection === \"asc\" ? \"asc\" : \"desc\";\n    return (\n      <Typography\n        variant={variant}\n        color={variant === \"button\" ? \"primary\" : \"initial\"}\n        style={{ flex: 1 }}\n      >\n        <Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\n          <TableSortLabel\n            active={sortValue === value}\n            direction={sortDirection}\n            onClick={() => this.onSortChange(value)}\n            style={{ color: \"inherit\" }}\n          >\n            {title}\n          </TableSortLabel>\n        </Tooltip>\n      </Typography>\n    );\n  }\n\n  getHeader = () => {\n    let style = { ...this.state.style };\n    return (\n      <tr key=\"header\">\n        <Paper\n          elevation={this.state.hover ? 2 : 1}\n          onMouseEnter={() => this.setState({ hover: true })}\n          onMouseLeave={() => this.setState({ hover: false })}\n          component=\"td\"\n          style={style}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              justifyContent: \"space-between\"\n            }}\n          >\n            {this.headerTitle(\"button\", \"name\", \"Naam\")}\n            {this.headerTitle(\"subtitle1\", \"school\", \"School\")}\n            {this.headerTitle(\"body1\", \"levelAndYear\", \"Niveau - Leerjaar\")}\n            {this.headerTitle(\"body1\", \"role\", \"Rol\")}\n            {this.headerTitle(\"body1\", \"profile\", \"Profiel\")}\n          </div>\n          {this.props.role === \"admin\" && (\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"space-between\"\n              }}\n            >\n              {this.headerTitle(\"body1\", \"email\", \"Office Email\")}\n              {this.headerTitle(\"body1\", \"preferedEmail\", \"Voorkeurs email\")}\n              <div style={{ flex: 1 }} />\n              {this.headerTitle(\"body1\", \"phoneNumber\", \"Telefoonnummer\")}\n              {this.headerTitle(\"body1\", \"id\", \"Gebruikers ID\")}\n            </div>\n          )}\n        </Paper>\n      </tr>\n    );\n  };\n\n  sortIds = () => {\n    const value = this.state.sortValue;\n    const direction = this.state.sortDirection;\n    const users = this.props.users;\n    const userIds = this.props.userIds;\n    if (value === \"\") {\n      return userIds;\n    }\n    userIds.sort((a, b) => {\n      switch (value) {\n        case \"name\":\n          a = (users[a][\"firstName\"] + users[a][\"lastName\"]).toLowerCase();\n          b = (users[b][\"firstName\"] + users[b][\"lastName\"]).toLowerCase();\n          break;\n        case \"levelAndYear\":\n          a = (users[a][\"level\"] + users[a][\"year\"]).toString(); // to string because otherwise no level and year would result in a being an integer\n          b = (users[b][\"level\"] + users[b][\"year\"]).toString();\n          break;\n        default:\n          a = users[a][value];\n          b = users[b][value];\n      }\n      let cmp = (b == null) - (a == null) || +(a > b) || -(a < b);\n      return direction === \"asc\" ? cmp : -cmp;\n    });\n    return userIds;\n  };\n\n  render() {\n    const header = this.getHeader();\n    const users = this.sortIds().map(id => {\n      return (\n        <User key={id} userId={id} display=\"row\" actions={this.props.actions} />\n      );\n    });\n    return (\n      <table style={{ width: \"100%\" }}>\n        <tbody>\n          {header}\n          {users}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    users: state.users,\n    role: state.role\n  };\n}\n\nexport default connect(mapStateToProps)(UserList);\n","import React, { Component } from 'react';\nimport { Prompt } from 'react-router-dom';\n\nclass PageLeaveWarning extends Component {\n\n\trender() {\n\t\tconst message = \"Weet je zeker dat u de pagina wilt verlaten? Er zijn nog niet-opgeslagen gegevens!\";\n\t\tif (this.props.giveWarning) {\n\t\t\twindow.onbeforeunload = function (e) {\n\t\t\t\te.returnValue = message;\n\t\t\t\treturn message;\n\t\t\t};\n\t\t} else {\n\t\t\twindow.onbeforeunload = null;\n\t\t}\n\t\treturn (\n\t\t\t<Prompt\n\t\t\t\twhen={this.props.giveWarning}\n\t\t\t\tmessage={location => message}\n\t\t\t/>\n\t\t);\n\t}\n\n}\n\nexport default PageLeaveWarning;","import React, { Component } from \"react\";\nimport map from \"lodash/map\";\n\nimport Field from \"../../components/Field\";\nimport User from \"../user/User\";\n\nimport { Divider, Button, Popover } from \"@material-ui/core\";\n\nclass GroupData extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  handleClickAway = () => {\n    this.setState({ anchorEl: null });\n  };\n\n  showTeacherCard = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  render() {\n    const editable = this.props.editable;\n    const role = this.props.role;\n    const onChange = this.props.onChange;\n    let group = this.props.group;\n    const courseId = \"#M\" + (this.props.group.courseId + \"\").padStart(4, \"0\");\n\n    return (\n      <div style={{ position: \"relative\" }}>\n        <div style={{ display: \"flex\" }}>\n          <Field\n            value={group.courseName}\n            onChange={value => onChange(\"courseName\", value)}\n            editable={editable}\n            style={{ flex: \"5\", type: \"headline\" }}\n            validate={{ maxLength: 50 }}\n          />\n          <Field\n            value={group.subjectId}\n            onChange={value => onChange(\"subjectId\", value)}\n            layout={{ alignment: \"right\" }}\n            style={{ type: \"headline\" }}\n            editable={editable}\n            options={map(this.props.subjects, subject => {\n              return { value: subject.id, label: subject.name };\n            })}\n          />\n          {!editable && (\n            <Button\n              color=\"secondary\"\n              style={{\n                position: \"absolute\",\n                display: \"block\",\n                top: \"30px\",\n                right: \"-15px\",\n                zIndex: \"100\"\n              }}\n              onClick={this.showTeacherCard}\n            >\n              <div>{group.teacherName}</div>\n            </Button>\n          )}\n        </div>\n        <div\n          style={{ display: \"flex\" }}\n          className=\"ColumnFlexDirectionOnMobile\"\n        >\n          <div\n            style={{\n              width: \"30%\",\n              paddingRight: \"15px\"\n            }}\n          >\n            <div>\n              <Field\n                value={group.period}\n                onChange={value => onChange(\"period\", value)}\n                editable={editable && role === \"admin\"}\n                style={{ width: \"100px\", type: \"caption\" }}\n                options={[\n                  { label: \"Blok 1\", value: 1 },\n                  { label: \"Blok 2\", value: 2 },\n                  { label: \"Blok 3\", value: 3 },\n                  { label: \"Blok 4\", value: 4 }\n                ]}\n              />\n              <Field\n                value={group.day}\n                onChange={value => onChange(\"day\", value)}\n                editable={editable && role === \"admin\"}\n                style={{ width: \"150px\", type: \"caption\" }}\n                options={[\n                  \"onbekend\",\n                  \"maandag\",\n                  \"dinsdag\",\n                  \"woensdag\",\n                  \"donderdag\",\n                  \"vrijdag\",\n                  \"zaterdag\",\n                  \"zondag\"\n                ]}\n              />\n            </div>\n            <Field\n              value={group.schoolYear}\n              editable={editable && role === \"admin\"}\n              onChange={value => onChange(\"schoolYear\", value)}\n              options={[\"2018/2019\", \"2019/2020\", \"2020/2021\", \"2021/2022\"]}\n              style={{ width: \"100%\", type: \"caption\" }}\n            />\n            <Divider style={{ margin: \"15px\" }} />\n            <Field\n              value={group.enrollableFor}\n              label=\"Doelgroep\"\n              onChange={value => onChange(\"enrollableFor\", value)}\n              style={{ width: \"100%\", labelVisible: true, type: \"caption\" }}\n              default=\"Iedereen\"\n              editable={editable}\n            />\n            <Field\n              value={group.studyTime}\n              label=\"Studietijd\"\n              onChange={value => onChange(\"studyTime\", value)}\n              default=\"onbekend\"\n              editable={editable}\n              style={{\n                labelVisible: true,\n                unit: \"uur\",\n                width: \"40%\",\n                type: \"caption\"\n              }}\n              validate={{ type: \"integer\" }}\n            />\n            <div style={{ width: \"20px\", display: \"inline-block\" }} />\n            <Field\n              value={courseId}\n              label=\"Modulecode\"\n              style={{\n                labelVisible: true,\n                width: \"40%\",\n                type: \"caption\"\n              }}\n            />\n          </div>\n          <div style={{ width: \"100%\" }}>\n            <Field\n              value={group.courseDescription}\n              validate={{ maxLength: 440 }}\n              label=\"Omschrijving\"\n              style={{ labelVisible: true }}\n              onChange={value => onChange(\"courseDescription\", value)}\n              layout={{ area: true }}\n              editable={editable}\n            />\n            <Field\n              value={group.remarks}\n              label=\"Opmerkingen\"\n              onChange={value => onChange(\"remarks\", value)}\n              style={{ labelVisible: true }}\n              default=\"Geen voorkennis vereist\"\n              layout={{ area: true }}\n              editable={editable}\n            />\n          </div>\n        </div>\n        <br />\n\n        <Popover\n          open={this.state.anchorEl ? true : false}\n          onClose={this.handleClickAway}\n          anchorEl={this.state.anchorEl}\n          anchorOrigin={{ horizontal: \"left\", vertical: \"top\" }}\n        >\n          <User\n            key={group.teacherId}\n            userId={group.teacherId}\n            display=\"card\"\n            style={{ margin: \"0px\" }}\n          />\n        </Popover>\n      </div>\n    );\n  }\n}\n\nexport default GroupData;\n","import React, { Component } from \"react\";\nimport Badge from \"@material-ui/core/Badge\";\nimport { connect } from 'react-redux';\nimport theme from \"../lib/MuiTheme\";\nimport { withStyles, Tooltip } from \"@material-ui/core\";\n\nconst style = {\n    colorPrimary:{\n        backgroundColor: theme.palette.primary.main\n    },\n    colorSecondary: {\n        backgroundColor: \"#ff8c00\"\n    },\n    colorError: {\n        backgroundColor: theme.palette.error.main\n    }\n}\n\nclass NotificationBadge extends Component {\n\n\n    render() {\n        const notifications = this.props.notifications;\n        const classes = this.props.classes;\n        let color = \"primary\";\n        let tooltipMessage = notifications.length > 0 ? notifications[0].message : \"\";\n        for ( let i = 0; i < notifications.length; i ++ ) { \n            if (notifications[i].priority === \"medium\" || notifications[i].priority === \"high\" ){\n                color=\"secondary\";\n                tooltipMessage=notifications[i].message;\n                for ( let j = i ; j < notifications.length; j++ ) {\n                    if ( notifications[j].priority === \"high\" ) {\n                        color = \"error\"\n                        tooltipMessage = notifications[j].message;\n                        break;\n                    }\n                }\n                break\n            }\n        }// tooltip is first message of highest priority\n        //color is highest priority\n\n        return (\n            <Tooltip title={tooltipMessage} >\n                <Badge badgeContent={notifications.length} classes={classes} color={color} >\n                    {this.props.children}\n                </Badge>\n            </Tooltip>\n        );\n    }\n}\n\nfunction mapStateToProps(state, ownProps) {\n\tlet notifications = state.notifications.filter((not) => {\n\t\ttry {\n            return not.type === \"badge\" && RegExp(not.scope).test(ownProps.scope);\n\t\t} catch (err) {\n\t\t\treturn true;\n\t\t}\n    });\n\treturn {\n\t\tnotifications: notifications,\n\t};\n}\n\nexport default withStyles(style)(connect(mapStateToProps,null)(NotificationBadge));","import React, { Component } from \"react\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport Popper from \"@material-ui/core/Popper\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { connect } from \"react-redux\";\nimport filter from \"lodash/filter\";\nimport { ClickAwayListener } from \"@material-ui/core\";\n\nimport Field from \"./Field\";\nimport { getAllUsers } from \"../store/actions\";\n\nclass SelectUser extends Component {\n  constructor(props) {\n    super(props);\n    this.myref = this.state = {\n      input: \"\",\n      userId: null,\n      open: false,\n      id: \"SelectUser\" + Math.floor(Math.random() * 1000)\n    };\n  }\n\n  componentDidMount() {\n    this.props.getAllUsers();\n  }\n\n  selectUser = (userId, displayName) => {\n    this.setState({\n      input: displayName,\n      open: false,\n      userId: userId\n    });\n    this.props.onChange(userId, displayName);\n  };\n\n  getFittingUsers = () => {\n    const regExp = new RegExp(this.state.input.toLowerCase());\n    let count = 0;\n    return filter(this.props.users, user => {\n      const v = regExp.test(user.displayName.toLowerCase());\n      if (v) {\n        count++;\n      }\n      return v && count < 6;\n    }).map(user => {\n      return (\n        <MenuItem\n          key={user.id + user.displayName}\n          onClick={() => this.selectUser(user.id, user.displayName)}\n        >\n          {user.displayName}\n        </MenuItem>\n      );\n    });\n  };\n\n  handleInput = value => {\n    if (this.state.userId) {\n      this.props.onChange(null, null);\n    }\n    this.setState({\n      input: value,\n      open: true,\n      userId: null\n    });\n  };\n\n  render() {\n    return (\n      <ClickAwayListener onClickAway={() => this.setState({ open: false })}>\n        <span>\n          <Field\n            label=\"Gebruiker\"\n            value={this.state.input}\n            editable\n            onChange={this.handleInput}\n            style={{ margin: \"normal\" }}\n            id={this.state.id}\n          />\n          <Popper\n            open={this.state.aliasId == null && this.state.open}\n            disablePortal\n            anchorEl={document.getElementById(this.state.id)}\n            style={{ position: \"fixed\", zIndex: \"10000\" }}\n          >\n            <Paper>\n              <MenuList>{this.getFittingUsers()}</MenuList>\n            </Paper>\n          </Popper>\n        </span>\n      </ClickAwayListener>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    users: state.users\n  };\n}\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getAllUsers: () => dispatch(getAllUsers())\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectUser);\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport map from 'lodash/map';\n\nimport PresenceTable from './PresenceTable';\nimport Lesson from './Lesson';\nimport { EvaluationTab, isCertificateWorthy } from './Evaluation';\nimport Page from '../Page';\nimport UserList from \"../user/UserList\"\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Progress from '../../components/Progress'\nimport PageLeaveWarning from '../../components/PageLeaveWarning'\nimport GroupData from './GroupData';\nimport ChooseButton from './ChooseButton';\nimport Divider from '@material-ui/core/Divider';\nimport Button from '@material-ui/core/Button';\nimport queryString from \"query-string\";\nimport NotificationBadge from '../../components/NotificationBadge';\nimport SelectUser from '../../components/SelectUser';\nimport Field from '../../components/Field';\nimport { Typography, Tooltip } from '@material-ui/core';\n\nclass GroupPage extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\teditable: false,\n\t\t\tgroup: this.props.group,\n\t\t\tnewParticipant: {\n\t\t\t\tparticipatingRole: \"student\",\n\t\t\t\tuserId: null,\n\t\t\t}\n\t\t}\n\n\t\tswitch (this.props.role) {\n\t\t\tcase \"student\":\n\t\t\t\tif (this.props.userIsMemberOfGroup) {\n\t\t\t\t\tthis.state.tabs = [\"Lessen\", \"Deelnemers\"];\n\t\t\t\t} else {\n\t\t\t\t\tthis.state.tabs = [\"Lessen\"];\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"teacher\":\n\t\t\t\tif (this.props.userIsMemberOfGroup) {\n\t\t\t\t\tthis.state.tabs = [\"Lessen\", \"Inschrijvingen\", \"Deelnemers\", \"Actief\", \"Beoordeling\"];\n\t\t\t\t} else {\n\t\t\t\t\tthis.state.tabs = [\"Inschrijvingen\", \"Deelnemers\", \"Lessen\"];\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"admin\":\n\t\t\tcase \"grade_admin\":\n\t\t\t\tthis.state.tabs = [\"Inschrijvingen\", \"Lessen\", \"Deelnemers\", \"Actief\", \"Beoordeling\"];\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\tlet values = queryString.parse(nextProps.location.search);\n\t\treturn {\n\t\t\t...prevState,\n\t\t\tgroup: {\n\t\t\t\t...nextProps.group,\n\t\t\t\t...prevState.group,\n\t\t\t},\n\t\t\tcurrentTab: values.tab ? values.tab : prevState.tabs[0]\n\t\t}\n\t}\n\n\tgetCurrentTab(currentTab) {\n\t\tlet group = this.state.group;\n\t\tconst enrollmentIds = this.props.group.enrollmentIds;\n\t\tconst lessons = this.state.group.lessons;\n\t\tconst participantIds = this.state.group.participantIds;\n\t\tconst evaluations = this.state.group.evaluations;\n\t\tconst presence = this.state.group.presence;\n\t\tconst newParticipant = this.state.newParticipant;\n\n\t\tswitch (currentTab) {\n\t\t\tcase \"Inschrijvingen\":\n\t\t\t\tif (enrollmentIds == null) {\n\t\t\t\t\treturn <Progress />;\n\t\t\t\t}\n\t\t\t\tif (enrollmentIds.length === 0) {\n\t\t\t\t\treturn \"Er zijn geen inschrijvingen\";\n\t\t\t\t}\n\t\t\t\treturn <UserList userIds={enrollmentIds} actions={\n\t\t\t\t\tthis.props.role === \"admin\" && this.state.editable ?\n\t\t\t\t\t\t[{ label: \"Goedkeuren\", onClick: this.acceptEnrollment }] : []\n\t\t\t\t} />;\n\t\t\tcase \"Lessen\":\n\t\t\t\tif (lessons == null) {\n\t\t\t\t\treturn <Progress />;\n\t\t\t\t}\n\t\t\t\tif (lessons.length === 0) {\n\t\t\t\t\treturn \"Er zijn nog geen lessen bekend\";\n\t\t\t\t}\n\t\t\t\treturn <table style={{ width: \"100%\" }}>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{map({ 0: { id: -1 }, ...lessons }, lesson => {\n\t\t\t\t\t\t\treturn <Lesson\n\t\t\t\t\t\t\t\tlesson={lesson}\n\t\t\t\t\t\t\t\tkey={lesson.id}\n\t\t\t\t\t\t\t\trole={this.props.role}\n\t\t\t\t\t\t\t\tuserIsMemberOfGroup={this.props.userIsMemberOfGroup}\n\t\t\t\t\t\t\t\teditable={this.state.editable}\n\t\t\t\t\t\t\t\thandleChange={this.handleLessonChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\tcase \"Deelnemers\":\n\t\t\t\tif (participantIds == null) {\n\t\t\t\t\treturn <Progress />;\n\t\t\t\t}\n\t\t\t\tconst canAddNewParticipant =\n\t\t\t\t\t!participantIds.includes(newParticipant.userId) &&\n\t\t\t\t\t!(enrollmentIds != null &&\n\t\t\t\t\t\tenrollmentIds.includes(newParticipant.userId)) &&\n\t\t\t\t\tnewParticipant.userId;\n\t\t\t\tconst cantAddReason = canAddNewParticipant ? \"\" : (newParticipant.userId ? \"Deze gebruiker heeft zich al ingeschreven of is al een deelnemer\" : \"Vul een deelnemer in\");\n\t\t\t\treturn (\n\t\t\t\t\t<div >\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.props.role === \"admin\" && this.state.editable &&\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Typography variant=\"button\" color=\"primary\" style={{ margin: \"18px 12px\" }}>\n\t\t\t\t\t\t\t\t\tNieuwe deelnemer:\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<div style={{ display: \"inline-flex\" }}>\n\t\t\t\t\t\t\t\t\t<SelectUser onChange={this.handleNewParticipantIdChange} value={newParticipant.userId} />\n\t\t\t\t\t\t\t\t\t<Field editable label=\"Rol\" value={newParticipant.participatingRole} options={[{ value: \"student\", label: \"Leerling\" }, { value: \"teacher\", label: \"Expert\" }]} onChange={this.handleNewParticipantRoleChange} />\n\t\t\t\t\t\t\t\t\t<Tooltip title={cantAddReason} placement={\"bottom-start\"}>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!canAddNewParticipant}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\" style={{ marginTop: \"22px\" }} onClick={this.addNewParticipant}>\n\t\t\t\t\t\t\t\t\t\t\t\tVoeg toe\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparticipantIds.length === 0 ? \"Er zijn nog geen deelnemers toegevoegd\" :\n\t\t\t\t\t\t\t\t<UserList userIds={participantIds} />\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\tcase \"Actief\":\n\t\t\t\tif (participantIds == null || lessons == null || presence == null) {\n\t\t\t\t\treturn <Progress />;\n\t\t\t\t}\n\t\t\t\treturn <PresenceTable\n\t\t\t\t\tparticipantIds={participantIds}\n\t\t\t\t\tlessons={lessons}\n\t\t\t\t\tpresence={presence}\n\t\t\t\t\teditable={this.state.editable}\n\t\t\t\t\thandleChange={this.handlePresenceChange}\n\t\t\t\t/>\n\t\t\tcase \"Beoordeling\":\n\t\t\t\tif (participantIds == null || evaluations == null) {\n\t\t\t\t\treturn <Progress />;\n\t\t\t\t}\n\t\t\t\treturn <EvaluationTab\n\t\t\t\t\tevaluations={evaluations}\n\t\t\t\t\tgroupId={group.id}\n\t\t\t\t\teditable={this.state.editable}\n\t\t\t\t\thandleChange={this.handleEvaluationChange}\n\t\t\t\t/>\n\t\t\tdefault: return null;\n\t\t}\n\n\t}\n\n\tacceptEnrollment = userId => {\n\t\tthis.props.addParticipant(userId, this.props.groupId, \"student\");\n\t}\n\n\taddNewParticipant = event => {\n\t\tconst newParticipant = this.state.newParticipant;\n\t\tthis.props.addParticipant(newParticipant.userId, this.props.groupId, newParticipant.participatingRole);\n\t\tthis.setState(prevState => ({\n\t\t\t...prevState,\n\t\t\tnewParticipant: {\n\t\t\t\tparticipatingRole: prevState.newParticipant.participatingRole,\n\t\t\t\tuserId: null,\n\t\t\t}\n\t\t}))\n\t}\n\n\thandleNewParticipantRoleChange = value => {\n\t\tthis.setState(prevState => ({\n\t\t\t...prevState,\n\t\t\tnewParticipant: {\n\t\t\t\tparticipatingRole: value,\n\t\t\t\tuserId: prevState.newParticipant.userId,\n\t\t\t},\n\t\t}))\n\t}\n\n\thandleNewParticipantIdChange = value => {\n\t\tthis.setState(prevState => ({\n\t\t\t...prevState,\n\t\t\tnewParticipant: {\n\t\t\t\tuserId: value,\n\t\t\t\tparticipatingRole: prevState.newParticipant.participatingRole,\n\t\t\t},\n\t\t}))\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getData();\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis.getData();\n\t\tthis.handleExternalGroupChange(this.props.group);\n\t}\n\n\tgetData() {\n\t\tlet group = this.state.group;\n\t\tconst enrollmentIds = this.state.group.enrollmentIds;\n\t\tconst lessons = this.state.group.lessons;\n\t\tconst participantIds = this.state.group.participantIds;\n\t\tconst evaluations = this.state.group.evaluations;\n\t\tconst presence = this.state.group.presence;\n\n\t\tswitch (this.state.currentTab) {\n\t\t\tcase \"Inschrijvingen\":\n\t\t\t\tif (enrollmentIds == null) {\n\t\t\t\t\tthis.props.getGroupEnrollments(group.id);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"Lessen\":\n\t\t\t\tif (lessons == null) {\n\t\t\t\t\tthis.props.getGroupLessons(group.id);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"Deelnemers\":\n\t\t\t\tif (participantIds == null) {\n\t\t\t\t\tthis.props.getGroupParticipants(group.id);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"Actief\":\n\t\t\t\tif (participantIds == null) {\n\t\t\t\t\tthis.props.getGroupParticipants(group.id);\n\t\t\t\t}\n\t\t\t\tif (lessons == null) {\n\t\t\t\t\tthis.props.getGroupLessons(group.id);\n\t\t\t\t}\n\t\t\t\tif (presence == null) {\n\t\t\t\t\tthis.props.getGroupPresence(group.id);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"Beoordeling\":\n\t\t\t\tif (evaluations == null) {\n\t\t\t\t\tthis.props.getGroupEvaluations(group.id);\n\t\t\t\t}\n\t\t\t\tif (participantIds == null) {\n\t\t\t\t\tthis.props.getGroupParticipants(group.id);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault: break;\n\t\t}\n\t}\n\n\thandleExternalGroupChange = (newGroup) => {\n\t\tif (!this.state.editable && JSON.stringify(newGroup) !== JSON.stringify(this.state.group)) {\n\t\t\tthis.setState({\n\t\t\t\tgroup: newGroup,\n\t\t\t})\n\t\t}\n\t}\n\n\thandleChange = (name, value) => {\n\t\tthis.setState({\n\t\t\tgroup: {\n\t\t\t\t...this.state.group,\n\t\t\t\t[name]: value,\n\t\t\t}\n\t\t});\n\t}\n\n\thandleLessonChange = (lesson) => {\n\t\tlet lessons = this.state.group.lessons || this.props.group.lessons;\n\t\tthis.setState({\n\t\t\tgroup: {\n\t\t\t\t...this.state.group,\n\t\t\t\tlessons: {\n\t\t\t\t\t...lessons,\n\t\t\t\t\t[lesson.id]: lesson,\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\thandleEvaluationChange = (newEvaluations) => {\n\t\tthis.setState({\n\t\t\tgroup: {\n\t\t\t\t...this.state.group,\n\t\t\t\tevaluations: newEvaluations,\n\t\t\t}\n\t\t});\n\t}\n\n\thandlePresenceChange = (presenceObj) => {\n\t\tlet presence = this.state.group.presence || this.props.group.presence;\n\t\tconsole.log(presence);\n\t\tthis.setState({\n\t\t\tgroup: {\n\t\t\t\t...this.state.group,\n\t\t\t\tpresence: {\n\t\t\t\t\t...presence,\n\t\t\t\t\t[presenceObj.id]: presenceObj,\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t}\n\n\tsetEditable = () => {\n\t\tthis.setState({\n\t\t\teditable: true,\n\t\t});\n\t}\n\n\tcancel = () => {\n\t\tthis.setState({\n\t\t\teditable: false,\n\t\t\tgroup: this.props.group,\n\t\t});\n\t}\n\n\tsave = () => {\n\t\tthis.props.setGroup(this.state.group);\n\t\tthis.setState({\n\t\t\teditable: false,\n\t\t});\n\t}\n\n\thandleTab = (event, newTab) => {\n\t\tthis.props.history.push({\n\t\t\tsearch: \"tab=\" + this.state.tabs[newTab],\n\t\t});\n\t};\n\n\topenCertificate = () => {\n\t\tconst groupId = this.props.group.id;\n\t\tconst userId = this.props.userId;\n\n\t\twindow.open(\"/certificaat/gebruiker/\" + userId.toString() + \"/groep/\" + groupId.toString(), \"_blank\");\n\t}\n\n\trender() {\n\t\tconst editable = this.state.editable;\n\t\tconst role = this.props.role;\n\t\tlet group = this.state.group;\n\t\treturn (\n\t\t\t<Page>\n\t\t\t\t<GroupData {...this.props} editable={editable} group={group} onChange={this.handleChange} />\n\t\t\t\t<Divider />\n\t\t\t\t<div style={{ display: \"flex\" }}>\n\t\t\t\t\t{\n\t\t\t\t\t\trole === \"student\" &&\n\t\t\t\t\t\t<ChooseButton\n\t\t\t\t\t\t\tgroup={group}\n\t\t\t\t\t\t\tstyle={{ margin: \"20px\" }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\t((role === \"teacher\" || role === \"admin\") && !editable) &&\n\t\t\t\t\t\t<Button color=\"secondary\" variant=\"contained\" style={{ margin: \"20px\" }} onClick={this.setEditable}>\n\t\t\t\t\t\t\t{\"Bewerken\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\teditable &&\n\t\t\t\t\t\t<Button color=\"secondary\" variant=\"contained\" style={{ margin: \"20px\" }} onClick={this.save}>\n\t\t\t\t\t\t\t{\"Opslaan\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\teditable &&\n\t\t\t\t\t\t<Button color=\"default\" style={{ margin: \"20px\" }} onClick={this.cancel}>\n\t\t\t\t\t\t\t{\"Annuleren\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t}\n\t\t\t\t\t<div style={{ flex: \"2\" }} />\n\t\t\t\t\t{\n\t\t\t\t\t\t(isCertificateWorthy(group.evaluation))\n\t\t\t\t\t\t&&\n\t\t\t\t\t\t<Button color=\"primary\" variant=\"contained\" style={{ margin: \"20px\" }} onClick={this.openCertificate}>\n\t\t\t\t\t\t\t{role === \"student\" ? \"Certificaat\" : \"Certificaten\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<AppBar position=\"static\" color=\"default\">\n\t\t\t\t\t<Tabs\n\t\t\t\t\t\tvalue={this.state.tabs.indexOf(this.state.currentTab)}\n\t\t\t\t\t\tonChange={this.handleTab}\n\t\t\t\t\t\tindicatorColor=\"primary\"\n\t\t\t\t\t\ttextColor=\"primary\"\n\t\t\t\t\t\tvariant=\"fullWidth\"\n\t\t\t\t\t\tcentered\n\t\t\t\t\t>\n\t\t\t\t\t\t{this.state.tabs.map(tab =>\n\t\t\t\t\t\t\t<Tab key={tab} label={\n\t\t\t\t\t\t\t\t<NotificationBadge scope={\"groep/\" + (group.id || \"\") + \"?tab=\" + tab} style={{ paddingLeft: \"100px\" }}>\n\t\t\t\t\t\t\t\t\t{tab}\n\t\t\t\t\t\t\t\t</NotificationBadge>\n\t\t\t\t\t\t\t} />)}\n\t\t\t\t\t</Tabs>\n\t\t\t\t</AppBar>\n\t\t\t\t<br />\n\t\t\t\t<div style={{ width: \"98%\", margin: \"auto\" }}>\n\t\t\t\t\t{this.getCurrentTab(this.state.currentTab)}\n\t\t\t\t</div>\n\t\t\t\t<PageLeaveWarning giveWarning={this.state.editable} />\n\t\t\t</Page>\n\t\t);\n\t}\n\n}\n\n\n\nexport default withRouter(GroupPage);\n\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport GroupCard from \"./GroupCard\";\nimport GroupPage from \"./GroupPage\";\nimport {\n\tsetGroup,\n\tgetGroup,\n\tgetGroupEnrollments,\n\tgetGroupLessons,\n\tgetGroupParticipants,\n\tgetGroupEvaluations,\n\tgetGroupPresence,\n\tgetSubjects,\n\taddNotification,\n\taddParticipant,\n} from \"../../store/actions\";\nimport { withRouter } from 'react-router-dom';\nimport Progress from '../../components/Progress'\nimport Page from '../Page';\n\nclass Group extends Component {\n\n\tcomponentDidMount() {\n\t\tconst props = this.props;\n\t\tif (props.subjects == null) {\n\t\t\tprops.getSubjects();\n\t\t}\n\t\tif (props.group == null && !props.notExists) {\n\t\t\tprops.getGroup(props.groupId);\n\t\t}\n\t}\n\n\trender() {\n\t\tif (this.props.group == null) {\n\t\t\tif (this.props.display === \"page\" && this.props.notExists) {\n\t\t\t\treturn (\n\t\t\t\t\t<Page>\n\t\t\t\t\t\tDe opgevraagde groep bestaat niet\n\t\t\t\t\t</Page>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn this.props.notExists ? null : <Progress />;\n\t\t\t}\n\t\t}\n\t\tswitch (this.props.display) {\n\t\t\tcase \"page\":\n\t\t\t\treturn (\n\t\t\t\t\t<GroupPage {...this.props} />\n\t\t\t\t);\n\t\t\tcase \"card\":\n\t\t\tdefault:\n\t\t\t\treturn (\n\t\t\t\t\t<GroupCard {...this.props} />\n\t\t\t\t);\n\t\t}\n\t}\n}\n\n\nfunction mapStateToProps(state, ownProps) {\n\tlet id = (ownProps.match.params.groupId || ownProps.groupId) + \"\";\n\tlet display = ownProps.display || \"page\";\n\n\tlet notExists = false;\n\tlet group = null;\n\n\tlet userIsMemberOfGroup = state.users[state.userId].participatingGroupIds.indexOf(id) !== -1;\n\tif (state.groups == null || state.groups[id] == null) {\n\t\tif (id == null || state.hasFetched.indexOf(\"Group.get(\" + id + \")\") !== -1) {\n\t\t\tnotExists = true;\n\t\t}\n\t} else {\n\t\tgroup = state.groups[id];\n\t}\n\treturn {\n\t\tgroup,\n\t\tnotExists,\n\t\tdisplay,\n\t\trole: state.role,\n\t\tgroupId: id,\n\t\tsubjects: state.subjects,\n\t\tuserId: state.userId,\n\t\tuserIsMemberOfGroup,\n\t\tschoolYear: state.schoolYear,\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tsetGroup: (group) => dispatch(setGroup(group)),\n\t\tgetGroup: (groupId) => dispatch(getGroup(groupId)),\n\t\tgetGroupEnrollments: (groupId) => dispatch(getGroupEnrollments(groupId)),\n\t\tgetGroupLessons: (groupId) => dispatch(getGroupLessons(groupId)),\n\t\tgetGroupParticipants: (groupId) => dispatch(getGroupParticipants(groupId)),\n\t\tgetGroupEvaluations: (groupId) => dispatch(getGroupEvaluations(groupId)),\n\t\tgetGroupPresence: (groupId) => dispatch(getGroupPresence(groupId)),\n\t\tgetSubjects: () => dispatch(getSubjects()),\n\t\taddParticipant: (userId, groupId, participatingRole) => dispatch(addParticipant(userId, groupId, participatingRole)),\n\t\taddNotification: (notification) => dispatch(addNotification(notification)),\n\t};\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Group));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport filter from 'lodash/filter';\nimport map from 'lodash/map';\n\nimport Page from './Page';\nimport Progress from '../components/Progress';\nimport Field from '../components/Field';\nimport Group from './group/Group';\nimport { getSubjects, getGroups, getEnrolLments } from '../store/actions';\n\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Paper from '@material-ui/core/Paper';\nimport queryString from \"query-string\";\n\nclass CourseSelect extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tperiod: props.currentPeriod,\n\t\t\tleerjaar: \"2019/2020\",\n\t\t\tsubject: null,\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\tlet { blok, vak, leerjaar } = queryString.parse(nextProps.location.search);\n\t\tif (!vak && nextProps.subjects != null) {\n\t\t\tvak = nextProps.subjects[Object.keys(nextProps.subjects)[0]].name;\n\t\t}\n\t\tif (!blok) {\n\t\t\tblok = nextProps.enrollmentPeriod + \"\";\n\t\t}\n\t\tif (!leerjaar) {\n\t\t\tleerjaar = \"2019/2020\";\n\t\t}\n\t\treturn {\n\t\t\t...prevState,\n\t\t\tperiod: blok,\n\t\t\tsubject: vak,\n\t\t\tschoolYear: leerjaar,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.getSubjects();\n\t\tthis.props.getGroups();\n\t}\n\n\tgetGroupsPerSubject(subject) {\n\t\treturn filter(this.props.groups, (group) => {\n\t\t\treturn subject === group.subjectName;\n\t\t})\n\t}\n\n\thandleSortChange = subject => {\n\t\tthis.props.history.push({\n\t\t\tsearch: `vak=${subject}&blok=${this.state.period}&leerjaar=${this.state.schoolYear}`,\n\t\t});\n\t};\n\n\thandlePeriodChange = period => {\n\t\tthis.props.history.push({\n\t\t\tsearch: `vak=${this.state.subject}&blok=${period}&leerjaar=${this.state.schoolYear}`,\n\t\t});\n\t};\n\n\thandleYearChange = schoolYear => {\n\t\tthis.props.history.push({\n\t\t\tsearch: `vak=${this.state.subject}&blok=${this.state.period}&leerjaar=${schoolYear}`,\n\t\t});\n\t};\n\n\tgetMenuItem(title, subject) {\n\t\tlet color = (this.state.subject === subject) ? \"primary\" : \"initial\";\n\t\treturn (\n\t\t\t<ListItem button onClick={() => this.handleSortChange(subject)} key={title}>\n\t\t\t\t<ListItemText>\n\t\t\t\t\t<Typography variant=\"button\" color={color} style={{ minWidth: \"150px\" }}>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</Typography>\n\t\t\t\t</ListItemText>\n\t\t\t</ListItem >\n\t\t)\n\t}\n\n\tgetMenuItems() {\n\t\tconst subjectsComponents = map(this.props.subjects, (subject) => {\n\t\t\treturn this.getMenuItem(subject.name, subject.name);\n\t\t});\n\t\tif (this.props.role === \"student\") {\n\t\t\tsubjectsComponents.unshift(this.getMenuItem(\"Ingeschreven\", \"enrolled\"));\n\t\t}\n\t\treturn subjectsComponents;\n\t}\n\n\trender() {\n\t\tlet data;\n\t\tif (this.state.subject === \"enrolled\") {\n\t\t\tif (this.props.enrolledGroupsIds == null) {\n\t\t\t\tdata = <Progress />;\n\t\t\t\tthis.props.getEnrolLments();\n\t\t\t} else {\n\t\t\t\tdata = this.props.enrolledGroupsIds.map((groupId) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Group\n\t\t\t\t\t\t\tkey={groupId}\n\t\t\t\t\t\t\tgroupId={groupId}\n\t\t\t\t\t\t\tdisplay=\"card\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\tif (this.props.enrolledGroupsIds.length === 0) {\n\t\t\t\t\tdata = (\n\t\t\t\t\t\t<div style={{ margin: \"15px\" }} >\n\t\t\t\t\t\t\tJe hebt je nog niet ingeschreven.\n\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.props.subjects == null || this.props.groups == null || this.props.enrolledGroups === []) {\n\t\t\t\tdata = <Progress />\n\t\t\t}\n\t\t\tdata = this.getGroupsPerSubject(this.state.subject)\n\t\t\t\t.filter((group) => group != null)\n\t\t\t\t.filter((group) => {\n\t\t\t\t\tif (this.state.period !== \"all\") {\n\t\t\t\t\t\treturn group.period + \"\" === this.state.period;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.filter((group) => {\n\t\t\t\t\tif (this.state.schoolYear !== \"all\") {\n\t\t\t\t\t\treturn group.schoolYear + \"\" === this.state.schoolYear;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.sort((a, b) => a.period - b.period)\n\t\t\t\t.map((group) => {\n\t\t\t\t\treturn <Group\n\t\t\t\t\t\tkey={group.id}\n\t\t\t\t\t\tgroupId={group.id}\n\t\t\t\t\t\tdisplay=\"card\"\n\t\t\t\t\t/>\n\t\t\t\t});\n\t\t}\n\t\treturn (\n\t\t\t<Page>\n\t\t\t\t<Paper style={{ position: \"relative\" }} >\n\t\t\t\t\t<Toolbar style={{ display: \"flex\" }} >\n\t\t\t\t\t\t<Typography variant=\"subtitle1\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\n\t\t\t\t\t\t\tSchrijf je in voor modules\n          \t</Typography>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tlabel=\"blok\"\n\t\t\t\t\t\t\tvalue={this.state.period}\n\t\t\t\t\t\t\teditable\n\t\t\t\t\t\t\tstyle={{ flex: \"none\" }}\n\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t{ label: \"Alle\", value: \"all\" },\n\t\t\t\t\t\t\t\t{ label: \"Blok 1\", value: \"1\" },\n\t\t\t\t\t\t\t\t{ label: \"Blok 2\", value: \"2\" },\n\t\t\t\t\t\t\t\t{ label: \"Blok 3\", value: \"3\" },\n\t\t\t\t\t\t\t\t{ label: \"Blok 4\", value: \"4\" }]}\n\t\t\t\t\t\t\tonChange={this.handlePeriodChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tlabel=\"leerjaar\"\n\t\t\t\t\t\t\tstyle={{ flex: \"none\" }}\n\t\t\t\t\t\t\tvalue={this.state.schoolYear}\n\t\t\t\t\t\t\teditable\n\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t{ label: \"Alle\", value: \"all\" },\n\t\t\t\t\t\t\t\t{ label: \"2016/2017\", value: \"2016/2017\" },\n\t\t\t\t\t\t\t\t{ label: \"2017/2018\", value: \"2017/2018\" },\n\t\t\t\t\t\t\t\t{ label: \"2018/2019\", value: \"2018/2019\" },\n\t\t\t\t\t\t\t\t{ label: \"2019/2020\", value: \"2019/2020\" },\n\t\t\t\t\t\t\t\t{ label: \"2020/2021\", value: \"2020/2021\" },\n\t\t\t\t\t\t\t\t{ label: \"2021/2022\", value: \"2021/2022\" }]}\n\t\t\t\t\t\t\tonChange={this.handleYearChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</Paper>\n\t\t\t\t<div style={{ display: \"flex\" }} className=\"ColumnFlexDirectionOnMobile\">\n\t\t\t\t\t<Paper>\n\t\t\t\t\t\t<List component=\"nav\" style={{ flex: 1 }}>\n\t\t\t\t\t\t\t{this.getMenuItems()}\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Paper>\n\t\t\t\t\t<div style={{ padding: \"12px\" }}>\n\t\t\t\t\t\t{data}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<br />\n\t\t\t\t<br />\n\t\t\t\t<br />\n\t\t\t</Page >\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\trole: state.role,\n\t\tenrollmentPeriod: state.enrollmentPeriod,\n\t\tenrollableGroups: state.enrollableGroups,\n\t\tgroups: state.groups,\n\t\tsubjects: state.subjects,\n\t\tenrolledGroupsIds: state.users[state.userId].enrollmentIds,\n\t};\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tgetSubjects: () => dispatch(getSubjects()),\n\t\tgetGroups: () => dispatch(getGroups()),\n\t\tgetEnrolLments: () => dispatch(getEnrolLments()),\n\t};\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CourseSelect);\n\n\n","import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport {\n  Paper,\n  Typography,\n  Table,\n  TableHead,\n  TableCell,\n  TableBody,\n  TableRow,\n  Tooltip,\n  TableSortLabel,\n  Toolbar,\n  Button,\n  IconButton\n} from \"@material-ui/core\";\nimport { VerticalAlignBottom } from \"@material-ui/icons\";\nimport queryString from \"query-string\";\nimport Excel from \"exceljs/dist/es5/exceljs.browser\";\n\nimport Page from \"./Page\";\nimport Progress from \"../components/Progress\";\nimport Field from \"../components/Field\";\nimport EnsureSecureLogin from \"../components/EnsureSecureLogin\";\nimport $ from \"jquery\";\n\nconst splitOnDefault = {\n  users: \"Hoofdrol\",\n  evaluations: \"Groepcode\",\n  enrollments: \"Inschrijfperiode\",\n  courseIds: \"Niet splitsen\",\n};\n\nclass DataPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tables: null,\n      tableSortColumns: {},\n      tableSortDirections: {},\n      data: \"enrollments\",\n      hasFetched: false,\n      splitOn: \"Niet splitsen\",\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    let values = queryString.parse(nextProps.location.search);\n    return {\n      ...prevState,\n      ...{\n        data: values.data ? values.data : \"enrollments\"\n      }\n    };\n  }\n\n  handleShowData = () => {\n    this.setState({\n      hasFetched: true\n    });\n    const splitOn = splitOnDefault[this.state.data];\n    this.fetchData(this.state.data)\n      .then(tables =>\n        this.setState({\n          splitOn,\n          tables: this.splitTable(tables, splitOn),\n          tableSortColumns: Array(tables.length)\n        }));\n  };\n\n  handleFilterChange = value => {\n    this.props.history.push({\n      search: \"data=\" + value\n    });\n  };\n\n  handleSplitChange = splitOn => {\n    const oldTables = this.state.tables;\n    let newTables = [this.state.tables[0][0], ...oldTables\n      .map(arr => arr.slice(1, arr.length))\n      .flat(1)]\n\n    this.setState({\n      splitOn,\n      tables: this.splitTable(newTables, splitOn),\n    })\n  }\n\n  sort = tableIndex => {\n    let table = this.state.tables[tableIndex];\n    const column = this.state.tableSortColumns[tableIndex];\n    const order = this.state.tableSortDirections[tableIndex];\n\n    table = [table[0]].concat(\n      table.slice(1, table.length).sort((a, b) => {\n        //Only sort the slice 1-table.length because the header has to stick\n        a = a[column];\n        b = b[column];\n        const cmp = (b == null) - (a == null) || +(a > b) || -(a < b);\n        return order === \"asc\" ? cmp : -cmp;\n      })\n    );\n\n    this.setState(prevState => ({\n      tables: [\n        ...prevState.tables.slice(0, tableIndex),\n        table,\n        ...prevState.tables.slice(tableIndex + 1)\n      ]\n    }));\n  };\n\n  handleSortChange = (tableIndex, columnIndex) => {\n    const prevState = this.state;\n    this.setState({\n      //update the correct elements of the arrays of the state\n      tableSortColumns: {\n        ...prevState.tableSortColumns,\n        [tableIndex]: columnIndex\n      },\n      tableSortDirections: {\n        ...prevState.tableSortDirections,\n        [tableIndex]:\n          prevState.tableSortDirections[tableIndex] === \"desc\" &&\n            prevState.tableSortColumns[tableIndex] === columnIndex\n            ? \"asc\"\n            : \"desc\" // if this columns was selected and ordering desc, change to asc else desc\n      }\n    },\n      () => this.sort(tableIndex)\n    ); // when setting state is done start sorting\n  };\n\n  splitTable = (table, splitValue) => {\n    let splitIndex = table[0].findIndex(x => x === splitValue);\n    if (splitIndex < 0) {\n      return [table];\n    }\n    let tables = [[table[0], table[1]]]; // initialize the tables with one table that has a header and a row\n    for (let i = 2; i < table.length; i++) {\n      let tableIndex = tables.findIndex(\n        halfSplitTable => halfSplitTable[1][splitIndex] === table[i][splitIndex]\n      ); // see in what table this row has to go\n      if (tableIndex < 0) {\n        tables.push([table[0]]); // add a new table with a new header if a new value is found\n        tableIndex = tables.length - 1;\n      }\n      tables[tableIndex].push(table[i]); // add row to correct table\n    }\n    return tables;\n  };\n\n  fetchData = table => {\n    return $.ajax({\n      url: \"api/function/data\",\n      type: \"post\",\n      data: {\n        table,\n        secureLogin: this.props.secureLogin\n      },\n      dataType: \"json\"\n    });\n  };\n\n  downloadTables = () => {\n    const tables = this.state.tables;\n    let workbook = new Excel.Workbook();\n    const splitIndex = tables[0][0].findIndex(x => x === this.state.splitOn);\n    for (let i = 0; i < tables.length; i++) {\n      // add all the tables to a different sheet\n      // the sheet has the name of the value it's split on. I.e when splitting on courses every page is called what course it contains\n      const sheetName = this.getValidWorksheetName(tables[i][1][splitIndex]);\n      let sheet = workbook.addWorksheet(sheetName);\n      sheet.addRows(tables[i]);\n      for (let j = 1; j <= tables[i][0].length; j++) {\n        sheet.getColumn(j).width =\n          tables[i][0][j - 1].length < 10 ? 10 : tables[i][0][j - 1].length + 2; //set each column to at least fit the header\n      }\n    }\n    const filenamePrefixes = {\n      users: \"Gebruikers \",\n      enrollments: \"Inschrijvingen \",\n      evaluations: \"Beoordelingen \",\n      courseIds: \"Modulecodes \"\n    };\n    let filename =\n      filenamePrefixes[this.state.data] + \"\" +\n      new Date().toLocaleDateString() +\n      \".xlsx\";\n    this.downloadWorkbook(workbook, filename); //gives for example: \"Gebruikers 3/3/2019.xlsx\"\n  };\n\n  getValidWorksheetName = (name) => { // excel has worksheet naming restrictions\n    name = name + \"\";\n    if (name.length > 31) {\n      name = name.substring(0, 30);\n      console.log('Worksheet name length cannot exceed 31 characters. Name has been shortened.');\n    }\n    let illegalCharacters = /(\\\\|\\/|\\*|\\?|:|\\[|\\])/g\n    if (illegalCharacters.test(name)) {\n      name = name.replace(illegalCharacters, '_');\n      console.log('Worksheet name cannot include one of the following chracters: \\\\, /, *, ?, :, [, ]. \\n Illegal characters have been changed to _ ');\n    }\n    if (name == null || name === \"\") {\n      name = \"_leeg_\";\n    }\n    return name;\n  }\n\n  downloadWorkbook = (workbook, fileName) => {\n    //magic\n    workbook.xlsx\n      .writeBuffer({\n        base64: true\n      })\n      .then(function (xls64) {\n        var a = document.createElement(\"a\");\n        var data = new Blob([xls64], {\n          type:\n            \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n        });\n        var url = URL.createObjectURL(data);\n        a.href = url;\n        a.download = fileName;\n        document.body.appendChild(a);\n        a.click();\n        setTimeout(function () {\n          document.body.removeChild(a);\n          window.URL.revokeObjectURL(url);\n        }, 0);\n      })\n      .catch(function (error) {\n        console.log(\n          \"Something went wrong with downloading the excel file: \" +\n          error.message\n        );\n      });\n  };\n\n  forceCellWidth = cellName => {\n    switch (cellName) {\n      case \"Vaknaam\":\n        return \"200px\";\n      case \"Weergavenaam\":\n        return \"200px\";\n      case \"Modulenaam\":\n        return \"300px\";\n      case \"Uitleg beoordeling\":\n        return \"200px\";\n      default:\n        return \"auto\";\n    }\n  };\n\n  render() {\n    let content;\n    if (this.state.tables == null) {\n      if (this.state.hasFetched) {\n        content = <Progress style={{ marginTop: \"100px\" }} />;\n      } else {\n        content = (\n          <Typography variant=\"body1\" style={{ marginTop: \"100px\"}}>\n            Klik op \"Laad gegevens\" om de gegevens te tonen\n          </Typography>\n        );\n      }\n    } else {\n      content = this.state.tables.map((table, tableIndex) => {\n        return (\n          <Table key={tableIndex} style={{ marginTop: \"100px\" }}>\n            <TableHead>\n              <TableRow key={0} style={{ height: \"auto\" }}>\n                {table[0].map((title, columnIndex) => {\n                  return (\n                    <TableCell\n                      key={columnIndex}\n                      style={{\n                        color: \"black\",\n                        backgroundColor: \"#e0e0e0\",\n                        fontSize: 13,\n                        top: 0\n                      }}\n                    >\n                      <Tooltip\n                        title=\"Sorteer\"\n                        enterDelay={300}\n                        placement=\"bottom-start\"\n                      >\n                        <TableSortLabel\n                          active={\n                            this.state.tableSortColumns[tableIndex] ===\n                            columnIndex\n                          }\n                          direction={this.state.tableSortDirections[tableIndex]}\n                          onClick={event =>\n                            this.handleSortChange(tableIndex, columnIndex)\n                          }\n                          style={{ zIndex: 0 }}\n                        >\n                          <span style={{ width: this.forceCellWidth(title) }}>\n                            {title}\n                          </span>\n                        </TableSortLabel>\n                      </Tooltip>\n                    </TableCell>\n                  );\n                })}\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {table\n                .filter((_, index) => {\n                  return index > 0;\n                }) //take everything but the header\n                .map((row, rowIndex) => {\n                  return (\n                    <TableRow key={rowIndex + 1} style={{ height: \"auto\" }}>\n                      {row.map((cell, columnIndex) => {\n                        return <TableCell key={columnIndex}>{cell}</TableCell>;\n                      })}\n                    </TableRow>\n                  );\n                })}\n            </TableBody>\n          </Table>\n        );\n      });\n    }\n    return (\n      <Page>\n        <EnsureSecureLogin>\n          <Paper\n            elevation={2}\n            style={{\n              zIndex: 1,\n              position: \"absolute\",\n              width: \"85%\"\n            }}\n          >\n            <Toolbar style={{ display: \"flex\" }}>\n              <Typography\n                variant=\"subtitle1\"\n                color=\"textSecondary\"\n                style={{ flex: \"6\" }}\n              >\n                Gegevens\n              </Typography>\n              <Field\n                label=\"Gegevens van\"\n                value={this.state.data}\n                editable\n                options={[\n                  { label: \"Beoordelingen\", value: \"evaluations\" },\n                  { label: \"Gebruikers\", value: \"users\" },\n                  { label: \"Inschrijvingen\", value: \"enrollments\" },\n                  { label: \"Module codes\", value: \"courseIds\" }\n                ]}\n                style={{ flex: \"3\" }}\n                onChange={this.handleFilterChange}\n              />\n              <Button\n                variant=\"outlined\"\n                onClick={this.handleShowData}\n                style={{ flex: \"1\" }}\n              >\n                Laad gegevens\n              </Button>\n              <Field\n                value={this.state.splitOn}\n                label=\"Splits op\"\n                options={this.state.tables ? [...this.state.tables[0][0], \"Niet splitsen\"] : [\"Niet splitsen\"]}\n                editable={this.state.hasFetched}\n                onChange={this.handleSplitChange}\n                style={{\n                  margin: \"normal\",\n                  flex: \"3\",\n                }}\n              />\n              <IconButton onClick={this.downloadTables}>\n                <VerticalAlignBottom />\n              </IconButton>\n            </Toolbar>\n          </Paper>\n          {content}\n        </EnsureSecureLogin>\n      </Page>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    secureLogin: state.secureLogin\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, null)(DataPage));\n","import React, { Component } from 'react';\nimport Page from './Page';\nimport Progress from '../components/Progress';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Field from '../components/Field';\nimport Paper from '@material-ui/core/Paper';\nimport $ from \"jquery\";\nimport queryString from \"query-string\";\n\nclass Taxi extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tschedules: null,\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\tlet values = queryString.parse(nextProps.location.search);\n\t\treturn {\n\t\t\t...prevState,\n\t\t\t...{\n\t\t\t\tweek: values.week ? values.week : \"0\",\n\t\t\t}\n\t\t};\n\t}\n\n\thandleFilterChange = value => {\n\t\tthis.props.history.push({\n\t\t\tsearch: \"week=\" + value,\n\t\t});\n\t\tthis.fetchSchedules(value);\n\t};\n\n\n\tcomponentDidMount() {\n\t\tthis.fetchSchedules(this.state.week);\n\t}\n\n\tfetchSchedules(week) {\n\t\treturn $.ajax({\n\t\t\turl: \"api/function/taxi\",\n\t\t\ttype: \"post\",\n\t\t\tdata: {\n\t\t\t\tweek,\n\t\t\t},\n\t\t\tdataType: \"json\",\n\t\t}).then(schedules => this.setState({\n\t\t\tschedules,\n\t\t}));\n\t}\n\n\trender() {\n\t\tlet content;\n\t\tif (this.state.schedules == null) {\n\t\t\tcontent = <Progress />\n\t\t} else {\n\t\t\tcontent = this.state.schedules.map((s, i) =>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{ width: \"80%\", margin: \"auto\" }}\n\t\t\t\t\tclassName=\"taxiScheduleHolder\"\n\t\t\t\t\tkey={i}\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html: s }}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Page>\n\t\t\t\t<Paper\n\t\t\t\t\televation={2}\n\t\t\t\t\tstyle={{ position: \"relative\" }}\n\t\t\t\t>\n\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\n\t\t\t\t\t\t<Typography variant=\"subtitle1\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\n\t\t\t\t\t\t\tTaxischema\n          </Typography>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tlabel=\"week\"\n\t\t\t\t\t\t\tvalue={this.state.week}\n\t\t\t\t\t\t\teditable\n\t\t\t\t\t\t\toptions={[0, 1, 2, 3, 4, 5, 6, 7, 8].map(n => { return { label: n === 0 ? \"Basisrooster\" : \"Week \" + n, value: n + \"\" } })}\n\t\t\t\t\t\t\tonChange={this.handleFilterChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</Paper>\n\t\t\t\t{content}\n\t\t\t</Page>\n\t\t);\n\t}\n}\n\nexport default Taxi;\n\n\n","import React, { Component } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport { connect } from 'react-redux';\nimport { toggleMenu } from '../store/actions';\nimport { withRouter } from 'react-router-dom';\nimport PersonIcon from '@material-ui/icons/Person';\nimport List from '@material-ui/core/List';\n\n\nclass Header extends Component {\n\n\tlogoClick = () => {\n\t\tthis.props.history.push(\"/\");\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<AppBar className=\"Header\">\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<IconButton color=\"inherit\" aria-label=\"Menu\" onClick={this.props.toggleMenu} style={{ position: \"absolute\" }} >\n\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc=\"/images/logo_qhighschool_white.svg\"\n\t\t\t\t\t\talt=\"QHighschool Logo\"\n\t\t\t\t\t\tstyle={{ height: \"60%\", margin: \"auto\", maxHeight: \"40px\", cursor: \"pointer\" }}\n\t\t\t\t\t\tonClick={this.logoClick}\n\t\t\t\t\t/>\n\t\t\t\t\t<List color=\"inherit\" style={{ right: 20, position: \"absolute\" }} onClick={this.handleClick}>\n\t\t\t\t\t\t<PersonIcon style={{ transform: \"scale(1.5)\", marginRight: \"10px\", float: \"left\" }} />\n\t\t\t\t\t\t<span className=\"HiddenOnMobile\">\n\t\t\t\t\t\t\t{this.props.displayName}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</List>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state) {\n\tif (state.userId != null) {\n\t\treturn {\n\t\t\tdisplayName: state.users[state.userId].displayName,\n\t\t\tuserId: state.userId,\n\t\t};\n\t}\n\treturn {\n\t\tdisplayName: \"\",\n\t\tuserId: state.userId,\n\t};\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\ttoggleMenu: () => dispatch(toggleMenu()),\n\t};\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Header));\n\n\n\n","import React, { Component } from 'react';\nimport { IconButton, Snackbar, SnackbarContent } from '@material-ui/core/';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router\";\n\nimport theme from '../lib/MuiTheme'\nimport { removeNotification } from '../store/actions';\n\nclass NotificationBar extends Component {\n\n\n\tremoveNotification = (key) => {\n\t\tthis.props.removeNotification(this.props.notifications[key]);\n\t}\n\n\trender() {\n\t\tlet notifications = this.props.notifications.map((not, key) => {\n\t\t\tlet color;\n\t\t\tswitch (not.priority) {\n\t\t\t\tcase \"high\":\n\t\t\t\t\tcolor = theme.palette.error.main;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"medium\":\n\t\t\t\t\tcolor = \"#ff8c00\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"low\":\n\t\t\t\tdefault:\n\t\t\t\t\tcolor = theme.palette.primary.main;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<Snackbar\n\t\t\t\t\tkey={key}\n\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\t\thorizontal: \"right\"\n\t\t\t\t\t}}\n\t\t\t\t\topen={true}\n\t\t\t\t\tstyle={{ position: \"relative\" }}\n\t\t\t\t\tTransitionProps={{ direction: \"left\" }}\n\t\t\t\t>\n\t\t\t\t\t<SnackbarContent\n\t\t\t\t\t\tstyle={{ background: color, marginBottom: \"4px\" }}\n\t\t\t\t\t\tmessage={<span id=\"message-id\">{not.message}</span>}\n\t\t\t\t\t\taction={not.sticky ? []: [\n\t\t\t\t\t\t\t<IconButton key=\"close\"\n\t\t\t\t\t\t\t\tonClick={() => { this.removeNotification(key) }} >\n\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t]} />\n\t\t\t\t</Snackbar>\n\t\t\t);\n\t\t});\n\t\treturn (\n\t\t\t<div style={{ position: \"fixed\", bottom: 0, right: 0, width: \"auto\", zIndex: 10 }}>\n\t\t\t\t{notifications}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state, ownProps) {\n\tlet notifications = state.notifications.filter((not) => {\n\t\ttry {\n\t\t\treturn not.type === \"bar\" && new RegExp(not.scope).test(ownProps.location.pathname);\n\t\t} catch (err) {\n\t\t\treturn true;\n\t\t}\n\t});\n\treturn {\n\t\tnotifications: notifications,\n\t};\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tremoveNotification: (notification) => dispatch(removeNotification(notification)),\n\t};\n}\n\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(NotificationBar));","import React, { Component } from \"react\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport AssessmentIcon from \"@material-ui/icons/Assessment\";\nimport AssignmentIcon from \"@material-ui/icons/Assignment\";\nimport GroupIcon from \"@material-ui/icons/Group\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport ExitIcon from \"@material-ui/icons/ExitToApp\";\nimport LocalTaxiIcon from \"@material-ui/icons/LocalTaxi\";\nimport BuildIcon from \"@material-ui/icons/Build\";\nimport ViewColumnIcon from \"@material-ui/icons/ViewColumn\";\nimport NotificationBadge from \"./NotificationBadge\";\n\nimport Paper from \"@material-ui/core/Paper\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport Typography from \"@material-ui/core/Typography\";\nimport theme from \"../lib/MuiTheme\";\nimport $ from \"jquery\";\n\nclass Menu extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {};\n    switch (this.props.role) {\n      case \"student\":\n        this.state.pages = [\"aanbod\", \"portfolio\", \"profiel\", \"loguit\"];\n        break;\n      case \"teacher\":\n        this.state.pages = [\"aanbod\", \"groepen\", \"profiel\", \"loguit\"];\n        break;\n      case \"admin\":\n        this.state.pages = [\n          \"groepen\",\n          \"aanbod\",\n          \"profiel\",\n          \"gegevens\",\n          \"taxi\",\n          \"beheer\",\n          \"loguit\"\n        ];\n        break;\n      case \"grade_admin\":\n        this.state.pages = [\n          \"aanbod\",\n          \"groepen\",\n          \"gegevens\",\n          \"taxi\",\n          \"profiel\",\n          \"loguit\"\n        ];\n        break;\n      default:\n        this.state.pages = [\"aanbod\", \"profiel\", \"loguit\"];\n        break;\n    }\n  }\n\n  logout() {\n    return $.ajax({\n      url: \"/auth/logout\",\n      type: \"get\",\n      dataType: \"json\"\n    }).then(() => {\n      document.location.reload();\n    });\n  }\n\n  onClick(page) {\n    if (page === \"loguit\") {\n      this.logout();\n    } else {\n      this.props.history.push(\"/\" + page);\n    }\n  }\n\n  getIcon(iconName, color) {\n    let c = \"black\";\n    if (theme.palette[color]) {\n      c = theme.palette[color].main;\n    }\n    switch (iconName) {\n      case \"Assignment\":\n        return <AssignmentIcon style={{ color: c }} />;\n      case \"Group\":\n        return <GroupIcon style={{ color: c }} />;\n      case \"Assessment\":\n        return <AssessmentIcon style={{ color: c }} />;\n      case \"Person\":\n        return <PersonIcon style={{ color: c }} />;\n      case \"ViewColumn\":\n        return <ViewColumnIcon style={{ color: c }} />;\n      case \"Exit\":\n        return <ExitIcon color=\"secondary\" />;\n      case \"Taxi\":\n        return <LocalTaxiIcon style={{ color: c }} />;\n      case \"Beheer\":\n        return <BuildIcon style={{ color: c }} />;\n      default:\n        return null;\n    }\n  }\n\n  getItem(page, index) {\n    const isCurrentPage = \"/\" + page.id === this.props.location.pathname;\n    let style = {};\n    if (page.bottom) {\n      style.position = \"absolute\";\n      style.bottom = \"0px\";\n    }\n\n    const color = isCurrentPage ? \"primary\" : \"inherit\";\n    const icon = (\n      <ListItemIcon>\n        <NotificationBadge scope={page.id}>\n          {this.getIcon(page.icon, color)}\n        </NotificationBadge>\n      </ListItemIcon>\n    );\n    return (\n      <ListItem\n        key={index}\n        button\n        onClick={() => this.onClick(page.id)}\n        style={style}\n      >\n        {icon}\n        <Typography variant=\"button\" color={color} className=\"HiddenOnMobile\">\n          {page.title}\n        </Typography>\n      </ListItem>\n    );\n  }\n\n  render() {\n    const pages = [\n      {\n        id: \"aanbod\",\n        title: \"Aanbod\",\n        icon: \"Assignment\"\n      },\n      {\n        id: \"groepen\",\n        title: \"Mijn groepen\",\n        icon: \"Group\"\n      },\n      {\n        id: \"portfolio\",\n        title: \"Portfolio\",\n        icon: \"Assessment\"\n      },\n      {\n        id: \"gegevens\",\n        title: \"Gegevens\",\n        icon: \"ViewColumn\" // table_chart is more appropriate\n      },\n      {\n        id: \"taxi\",\n        title: \"Taxi\",\n        icon: \"Taxi\"\n      },\n      {\n        id: \"beheer\",\n        title: \"Beheer\",\n        icon: \"Beheer\"\n      }\n    ];\n\n    const profile = [\n      {\n        id: \"profiel\",\n        title: \"Profiel\",\n        icon: \"Person\"\n      },\n      {\n        id: \"loguit\",\n        title: \"Log uit\",\n        icon: \"Exit\"\n      }\n    ];\n\n    const visiblePages = pages\n      .filter(page => this.state.pages.indexOf(page.id) !== -1)\n      .map(this.getItem.bind(this));\n\n    const visibleProfile = profile\n      .filter(page => this.state.pages.indexOf(page.id) !== -1)\n      .map(this.getItem.bind(this));\n\n    return (\n      <Paper elevation={8} className=\"Menu\">\n        <List component=\"nav\" style={{ height: \"100%\" }}>\n          {visiblePages}\n          <div style={{ position: \"absolute\", bottom: \"20px\", width: \"100%\" }}>\n            {visibleProfile}\n          </div>\n        </List>\n      </Paper>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  if (state.userId != null) {\n    return {\n      displayName: state.users[state.userId].displayName,\n      userId: state.userId,\n      role: state.role\n    };\n  }\n  return {\n    displayName: \"\",\n    userId: state.userId,\n    role: state.role\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, null)(Menu));\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport map from \"lodash/map\";\nimport forEach from \"lodash/forEach\";\n\nimport Page from \"./Page\";\nimport Progress from \"../components/Progress\";\nimport Field from \"../components/Field\";\nimport Group from \"./group/Group\";\nimport { getEnrolLments, getGroups, getParticipatingGroups, getSubjects } from \"../store/actions\";\n\nimport { Divider, Paper, Toolbar, Typography } from \"@material-ui/core\";\nimport queryString from \"query-string\";\n\nclass Portfolio extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tperiod: props.currentPeriod + \"\",\n\t\t\tleerjaar: props.role === \"student\" ? \"all\" : props.schoolYear\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\tlet { blok, leerjaar } = queryString.parse(nextProps.location.search);\n\t\tif (!blok) {\n\t\t\tblok =\n\t\t\t\tnextProps.role === \"student\" ? \"all\" : nextProps.currentPeriod + \"\";\n\t\t}\n\t\tif (!leerjaar) {\n\t\t\tleerjaar = nextProps.role === \"student\" ? \"all\" : nextProps.schoolYear;\n\t\t}\n\t\treturn {\n\t\t\t...prevState,\n\t\t\tperiod: blok,\n\t\t\tschoolYear: leerjaar\n\t\t};\n\t}\n\n\thandlePeriodChange = period => {\n\t\tthis.props.history.push({\n\t\t\tsearch: `blok=${period}&leerjaar=${this.state.leerjaar}`\n\t\t});\n\t};\n\n\thandleYearChange = schoolYear => {\n\t\tthis.props.history.push({\n\t\t\tsearch: `blok=${this.state.period}&leerjaar=${schoolYear}`\n\t\t});\n\t};\n\n\torderGroups(groups, compareFunction) {\n\t\tlet orders = {};\n\t\tforEach(groups, group => {\n\t\t\tif (!orders[compareFunction(group)]) {\n\t\t\t\torders[compareFunction(group)] = [];\n\t\t\t}\n\t\t\torders[compareFunction(group)].push(group);\n\t\t});\n\t\treturn map(orders, this.getOrder);\n\t}\n\n\tgetOrder(groups, name) {\n\t\tgroups = map(groups, group => (\n\t\t\t<Group key={group.id} groupId={group.id} display=\"card\" />\n\t\t));\n\n\t\treturn (\n\t\t\t<div key={name} style={{ padding: \"10px\" }}>\n\t\t\t\t<Field\n\t\t\t\t\tvalue={name}\n\t\t\t\t\tstyle={{ type: \"headline\", color: \"secondary\" }}\n\t\t\t\t\tlayout={{ area: true }}\n\t\t\t\t/>\n\t\t\t\t{groups}\n\t\t\t\t<Divider style={{ marginTop: \"20px\" }} />\n\t\t\t</div>\n\t\t);\n\t}\n\n\topenCertificate = () => {\n\t\twindow.open(\"/certificaat/gebruiker/\" + this.props.userId.toString(), \"_blank\");\n\t};\n\n\trender() {\n\t\tlet options = [\n\t\t\t{ label: \"Alle\", value: \"all\" },\n\t\t\t{ label: \"Blok 1\", value: \"period1\" },\n\t\t\t{ label: \"Blok 2\", value: \"period2\" },\n\t\t\t{ label: \"Blok 3\", value: \"period3\" },\n\t\t\t{ label: \"Blok 4\", value: \"period4\" }\n\t\t];\n\t\tif (this.props.role === \"student\") {\n\t\t\toptions.splice(1, 0, { label: \"Ingeschreven\", value: \"enrolled\" });\n\t\t}\n\n\t\tif (!this.props.groups) {\n\t\t\tthis.props.getParticipatingGroups();\n\t\t}\n\t\tif (!this.props.enrollmentIds) {\n\t\t\tthis.props.getEnrolLments();\n\t\t}\n\n\t\tlet groupIds = this.props.enrollmentIds || [];\n\t\tif (this.state.filter !== \"enrolled\") {\n\t\t\t/* If filter is not equal to enrolled, participating ids need to be added.\n\t\t\tFrom participating ids we first remove the ones that are already in enrolled ids.\n\t\t\tFinally, after adding participating ids, we filter on period */\n\t\t\tgroupIds = this.props.participatingGroupIds\n\t\t\t\t.filter(id => {\n\t\t\t\t\treturn groupIds.indexOf(id) === -1;\n\t\t\t\t})\n\t\t\t\t.concat(groupIds);\n\t\t}\n\n\t\tlet content;\n\t\tif (\n\t\t\tthis.props.groups == null ||\n\t\t\tObject.keys(this.props.groups).length === 0\n\t\t) {\n\t\t\tcontent = <Progress />;\n\t\t} else {\n\t\t\tconst groups = groupIds\n\t\t\t\t.map(id => this.props.groups[id])\n\t\t\t\t.filter(group => group != null)\n\t\t\t\t.filter(group => {\n\t\t\t\t\tif (this.state.period !== \"all\") {\n\t\t\t\t\t\treturn group.period + \"\" === this.state.period;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.filter(group => {\n\t\t\t\t\tif (this.state.schoolYear !== \"all\") {\n\t\t\t\t\t\treturn group.schoolYear + \"\" === this.state.schoolYear;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tcontent = this.orderGroups(groups, group => {\n\t\t\t\treturn group.subjectName;\n\t\t\t});\n\t\t}\n\n\t\treturn (\n\t\t\t<Page>\n\t\t\t\t<Paper elevation={2} style={{ position: \"relative\" }}>\n\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tvariant=\"subtitle1\"\n\t\t\t\t\t\t\tcolor=\"textSecondary\"\n\t\t\t\t\t\t\tstyle={{ flex: \"2 1 auto\" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.props.role === \"student\" ? \"Portfolio\" : \"Mijn groepen\"}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t{/* {this.props.role === \"student\" && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{margin: \"20px\"}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.openCertificate}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCertificaat\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t)} */}\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tlabel=\"blok\"\n\t\t\t\t\t\t\tvalue={this.state.period}\n\t\t\t\t\t\t\teditable\n\t\t\t\t\t\t\tstyle={{ flex: \"none\" }}\n\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t{ label: \"Alle\", value: \"all\" },\n\t\t\t\t\t\t\t\t{ label: \"Blok 1\", value: \"1\" },\n\t\t\t\t\t\t\t\t{ label: \"Blok 2\", value: \"2\" },\n\t\t\t\t\t\t\t\t{ label: \"Blok 3\", value: \"3\" },\n\t\t\t\t\t\t\t\t{ label: \"Blok 4\", value: \"4\" }\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tonChange={this.handlePeriodChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tlabel=\"leerjaar\"\n\t\t\t\t\t\t\tstyle={{ flex: \"none\" }}\n\t\t\t\t\t\t\tvalue={this.state.schoolYear}\n\t\t\t\t\t\t\teditable\n\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t{ label: \"Alle\", value: \"all\" },\n\t\t\t\t\t\t\t\t{ label: \"2016/2017\", value: \"2016/2017\" },\n\t\t\t\t\t\t\t\t{ label: \"2017/2018\", value: \"2017/2018\" },\n\t\t\t\t\t\t\t\t{ label: \"2018/2019\", value: \"2018/2019\" },\n\t\t\t\t\t\t\t\t{ label: \"2019/2020\", value: \"2019/2020\" },\n\t\t\t\t\t\t\t\t{ label: \"2020/2021\", value: \"2020/2021\" },\n\t\t\t\t\t\t\t\t{ label: \"2021/2022\", value: \"2021/2022\" }\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tonChange={this.handleYearChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</Paper>\n\t\t\t\t{content}\n\t\t\t</Page>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\tgroups: state.groups,\n\t\tparticipatingGroupIds: state.users[state.userId].participatingGroupIds,\n\t\tenrollmentIds: state.users[state.userId].enrollmentIds,\n\t\trole: state.role,\n\t\tschoolYear: state.schoolYear,\n\t\tcurrentPeriod: state.currentPeriod,\n\t\tuserId: state.userId\n\t};\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tgetSubjects: () => dispatch(getSubjects()),\n\t\tgetGroups: () => dispatch(getGroups()),\n\t\tgetEnrolLments: () => dispatch(getEnrolLments()),\n\t\tgetParticipatingGroups: () => dispatch(getParticipatingGroups())\n\t};\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Portfolio);\n","import React, { Component } from 'react';\nimport EnsureSecureLogin from '../components/EnsureSecureLogin';\nimport Page from './Page';\nimport $ from \"jquery\";\nimport map from 'lodash/map';\n\nimport { connect } from 'react-redux';\nimport queryString from \"query-string\";\nimport SelectUser from '../components/SelectUser';\nimport { Toolbar, Button, Paper, Typography, List, ListItem, ListItemText, } from '@material-ui/core';\nimport Field from '../components/Field';\nimport { getSubjects, setAlias, addNotification, addSubject, addCourse, addGroup, relogSecure } from '../store/actions';\n\nconst pages = [\"alias\", \"vak\", \"module\", \"groep\"];\n\nclass ControlPanel extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcourses: [],\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\tlet values = queryString.parse(nextProps.location.search);\n\t\treturn {\n\t\t\t...prevState,\n\t\t\t...{\n\t\t\t\tpage: values.page ? values.page : pages[0],\n\t\t\t}\n\t\t}\n\t}\n\n\tmapPageToListItem = (pageName) => {\n\t\treturn <ListItem button onClick={() => this.handlePageChange(pageName)} key={pageName}>\n\t\t\t<ListItemText>\n\t\t\t\t<Typography variant=\"button\" color={pageName === this.state.page ? \"primary\" : \"initial\"} style={{ minWidth: \"150px\" }}>\n\t\t\t\t\t{pageName.charAt(0).toUpperCase() + pageName.slice(1)}\n\t\t\t\t</Typography>\n\t\t\t</ListItemText>\n\t\t</ListItem >\n\t}\n\n\tcomponentDidMount() {\n\t\t$.ajax({\n\t\t\turl: \"api/course/list\",\n\t\t\ttype: \"get\",\n\t\t\tdata: {},\n\t\t\tdataType: \"json\",\n\t\t}).then((courses) => {\n\t\t\tthis.setState({\n\t\t\t\tcourses\n\t\t\t});\n\t\t});\n\t\tthis.props.getSubjects();\n\t}\n\n\n\thandlePageChange = value => {\n\t\tthis.props.history.push({\n\t\t\tsearch: \"page=\" + value,\n\t\t});\n\t}\n\n\tgetContent = () => {\n\t\tswitch (this.state.page) {\n\t\t\tcase \"alias\":\n\t\t\t\treturn <Alias dispatch={this.props.dispatch} />\n\t\t\tcase \"vak\":\n\t\t\t\treturn <Subject addSubject={this.props.addSubject} />\n\t\t\tcase \"module\":\n\t\t\t\treturn <Course addCourse={this.props.addCourse} subjects={this.props.subjects} />\n\t\t\tcase \"groep\":\n\t\t\t\treturn <Group addGroup={this.props.addGroup} courses={this.state.courses} />\n\t\t\tdefault:\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Page>\n\t\t\t\t<EnsureSecureLogin>\n\t\t\t\t\t<Paper\n\t\t\t\t\t\televation={2}\n\t\t\t\t\t\tstyle={{ position: \"relative\" }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\n\t\t\t\t\t\t\t<Typography variant=\"subtitle1\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\n\t\t\t\t\t\t\t\tBeheer\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t</Paper>\n\t\t\t\t\t<div style={{ display: \"flex\" }} className=\"ColumnFlexDirectionOnMobile\">\n\t\t\t\t\t\t<Paper elevation={2}>\n\t\t\t\t\t\t\t<List component=\"nav\" style={{ flex: 1 }}>\n\t\t\t\t\t\t\t\t{pages.map(this.mapPageToListItem)}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t<div style={{ padding: \"12px\" }}>\n\t\t\t\t\t\t\t{this.getContent()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</EnsureSecureLogin>\n\t\t\t</Page>\n\t\t);\n\t}\n}\n\nclass Alias extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\taliasId: null,\n\t\t}\n\t}\n\n\t;\n\n\trender() {\n\t\treturn <div style={{ margin: \"10px 0\" }}>\n\t\t\t<SelectUser onChange={(aliasId) => this.setState({ aliasId })} />\n\t\t\t<br />\n\t\t\t<Button\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tcolor=\"primary\"\n\t\t\t\tdisabled={this.state.aliasId == null}\n\t\t\t\tonClick={() => this.props.dispatch(setAlias(this.state.aliasId))}>\n\t\t\t\tLogin in met alias\n\t\t\t</Button>\n\t\t</div>\n\t}\n}\n\nclass Subject extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tname: \"\",\n\t\t\tdescription: \"\",\n\t\t}\n\t}\n\trender() {\n\t\tconst subject = this.state;\n\t\treturn <div>\n\t\t\t<Field\n\t\t\t\tlabel=\"Naam\"\n\t\t\t\tvalue={subject.name}\n\t\t\t\tonChange={(name) => this.setState({ name })}\n\t\t\t\teditable={true}\n\t\t\t\tvalidate={{ maxLength: 50 }}\n\t\t\t/>\n\t\t\t<br />\n\t\t\t<Field\n\t\t\t\tlabel=\"Omschrijving\"\n\t\t\t\tvalue={subject.description}\n\t\t\t\tonChange={(description) => this.setState({ description })}\n\t\t\t\teditable={true}\n\t\t\t\tvalidate={{ maxLength: 440 }}\n\t\t\t\tlayout={{ area: true }}\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tcolor=\"primary\"\n\t\t\t\tstyle={{ height: \"37px\", margin: \"12px\" }}\n\t\t\t\tonClick={() => { this.props.addSubject(subject.name, subject.description).then(relogSecure) }}>\n\t\t\t\tVoeg toe\n\t\t\t</Button>\n\t\t</div>\n\t}\n}\n\nclass Course extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tname: \"\",\n\t\t\tsubjectId: \"\",\n\t\t}\n\t}\n\trender() {\n\t\tconst course = this.state;\n\t\treturn <div>\n\t\t\t<Field\n\t\t\t\tlabel=\"Naam\"\n\t\t\t\tvalue={course.name}\n\t\t\t\tonChange={(name) => this.setState({ name })}\n\t\t\t\teditable={true}\n\t\t\t\tvalidate={{ maxLength: 50 }}\n\t\t\t\tstyle={{ flex: \"1\" }}\n\t\t\t/>\n\t\t\t<br />\n\t\t\t<Field\n\t\t\t\tvalue={course.subjectId}\n\t\t\t\tsubjectId label=\"Vak\"\n\t\t\t\tonChange={(subjectId) => this.setState({ subjectId })}\n\t\t\t\teditable={true}\n\t\t\t\toptions={map(this.props.subjects, (subject) => { return { value: subject.id, label: subject.name } })}\n\t\t\t\tstyle={{ minWidth: \"200px\" }}\n\t\t\t/>\n\t\t\t<br />\n\t\t\t<Button\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tcolor=\"primary\"\n\t\t\t\tstyle={{ height: \"37px\", margin: \"12px\" }}\n\t\t\t\tonClick={() => { this.props.addCourse(course.name, course.subjectId).then(relogSecure) }}>\n\t\t\t\tVoeg toe\n\t\t\t</Button>\n\t\t</div>\n\t}\n}\n\n\nclass Group extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcourseId: null,\n\t\t\tteacherId: null,\n\t\t}\n\t}\n\trender() {\n\t\tconst group = this.state;\n\t\treturn <div>\n\t\t\t<Field\n\t\t\t\tvalue={group.courseId}\n\t\t\t\tlabel=\"Module\"\n\t\t\t\tonChange={(courseId) => this.setState({ courseId })}\n\t\t\t\teditable={true}\n\t\t\t\toptions={this.props.courses.map((course) => { return { label: course.name, value: course.id } })}\n\t\t\t\tstyle={{ minWidth: \"200px\" }}\n\t\t\t/>\n\t\t\t<br />\n\t\t\t<SelectUser\n\t\t\t\tvalue={group.teacherId}\n\t\t\t\tonChange={(teacherId) => this.setState({ teacherId })}\n\t\t\t/>\n\t\t\t<br />\n\t\t\t<Button\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tcolor=\"primary\"\n\t\t\t\tstyle={{ height: \"37px\", margin: \"12px\" }}\n\t\t\t\tonClick={() => { this.props.addGroup(group.courseId, group.teacherId).then(relogSecure) }}>\n\t\t\t\tVoeg toe\n\t\t\t</Button>\n\t\t</div>\n\t}\n}\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\tsubjects: state.subjects,\n\t\tgroups: state.groups,\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\taddSubject: async (name, description) => dispatch(addSubject(name, description)),\n\t\taddCourse: async (name, subjectId) => dispatch(addCourse(name, subjectId)),\n\t\taddGroup: async (courseId, userId) => dispatch(addGroup(courseId, userId)),\n\t\taddNotification: (notification) => dispatch(addNotification(notification)),\n\t\tgetSubjects: () => dispatch(getSubjects()),\n\t\tdispatch: dispatch,\n\t}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ControlPanel);","import React, { Component } from \"react\";\nimport { Typography } from \"@material-ui/core/\";\nimport Field from \"../../components/Field\"\n\nclass PersonalData extends Component {\n\n\trender() {\n\t\tconst p = this.props;\n\t\tconst u = p.user;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Typography variant=\"h6\" color=\"secondary\">\n\t\t\t\t\tPersoonlijke gegevens\n\t\t\t\t</Typography>\n\t\t\t\t<table>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tvalue=\"Naam\"\n\t\t\t\t\t\t\t\tlayout={{ td: true }}\n\t\t\t\t\t\t\t\tstyle={{ margin: \"none\" }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tvalue={u.displayName}\n\t\t\t\t\t\t\t\tstyle={{ margin: \"none\" }}\n\t\t\t\t\t\t\t\teditable={p.editableAdmin}\n\t\t\t\t\t\t\t\tonChange={(value) => p.onChange(\"displayName\", value)}\n\t\t\t\t\t\t\t\tlayout={{ td: true, area: true }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tvalue=\"Voorkeursemail\"\n\t\t\t\t\t\t\t\tlayout={{ td: true }}\n\t\t\t\t\t\t\t\tstyle={{ margin: \"none\" }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tvalidate={{ type: \"email\" }}\n\t\t\t\t\t\t\t\tvalue={u.preferedEmail}\n\t\t\t\t\t\t\t\tstyle={{ margin: \"none\" }}\n\t\t\t\t\t\t\t\teditable={p.editableUser}\n\t\t\t\t\t\t\t\tonChange={(value) => p.onChange(\"preferedEmail\", value)}\n\t\t\t\t\t\t\t\tlayout={{ td: true, area: true }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tvalue=\"Telefoonnummer\"\n\t\t\t\t\t\t\t\tlayout={{ td: true }}\n\t\t\t\t\t\t\t\tstyle={{ margin: \"none\" }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tvalidate={{ type: \"phoneNumber\" }}\n\t\t\t\t\t\t\t\tvalue={\"06 \" + (u.phoneNumber ? u.phoneNumber.replace(/^06[ ]*/, \"\") : \"\")}\n\t\t\t\t\t\t\t\tlayout={{ td: true, area: true }}\n\t\t\t\t\t\t\t\tstyle={{ margin: \"none\" }}\n\t\t\t\t\t\t\t\teditable={p.editableUser}\n\t\t\t\t\t\t\t\tonChange={(value) => p.onChange(\"phoneNumber\", value.slice(0, 11))}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\nexport default PersonalData;","let possibleValues = {\n\trole: {\n\t\t\"student\": {\n\t\t\tlevel: [\"Praktijkschool\", \"ISK\", \"n.v.t.\", \"Jan Ligthart\", \"OPUS\", \"MAVO\", \"VMBO\", \"HAVO\", \"VWO\"],\n\t\t},\n\t\t\"teacher\": {\n\t\t\tlevel: [\"-\"],\n\t\t\tprofile: [\"n.v.t.\"],\n\t\t\tyear: [\"n.v.t.\"],\n\t\t},\n\t\t\"admin\": {\n\t\t\tlevel: [\"-\"],\n\t\t\tprofile: [\"n.v.t.\"],\n\t\t\tyear: [\"n.v.t.\"],\n\t\t},\n\t\t\"grade_admin\": {\n\t\t\tlevel: [\"-\"],\n\t\t\tprofile: [\"n.v.t.\"],\n\t\t\tyear: [\"n.v.t.\"],\n\t\t}\n\t},\n\tschool: {\n\t\t\"Beekdal Lyceum\": {\n\t\t\tlevel: [\"HAVO\", \"VWO\", \"-\"],\n\t\t\tschoolLocation: [\"Bernhardlaan 49, Arnhem\"],\n\t\t},\n\t\t\"Candea College\": {\n\t\t\tlevel: [\"VMBO\", \"MAVO\", \"HAVO\", \"VWO\", \"-\"],\n\t\t\tschoolLocation: [\n\t\t\t\t\"Eltensestraat 8, Duiven\",\n\t\t\t\t\"Saturnus 1, Duiven\",\n\t\t\t],\n\t\t},\n\t\t\"Centraal Bureau\": {\n\t\t\tlevel: [\"n.v.t.\", \"-\"],\n\t\t\tschoolLocation: [\n\t\t\t\t\"Saturnus 5, Duiven\"\n\t\t\t],\n\t\t\tprofile: [\"n.v.t.\"],\n\t\t\tyear: [\"n.v.t.\"],\n\t\t},\n\t\t\"Lyceum Elst\": {\n\t\t\tlevel: [\"MAVO\", \"HAVO\", \"VWO\", \"-\"],\n\t\t\tschoolLocation: [\"Auditorium 3, Elst\"],\n\t\t},\n\t\t\"Liemers College\": {\n\t\t\tlevel: [\"VMBO\", \"MAVO\", \"HAVO\", \"VWO\", \"-\"],\n\t\t\tschoolLocation: [\n\t\t\t\t\"Dijksestraat 12, Didam\",\n\t\t\t\t\"Stationspoort 36, Zevenaar\",\n\t\t\t\t\"Heerenmten 6, Zevenaar\",\n\t\t\t\t\"Zonegge 07-09, Zevenaar\",\n\t\t\t],\n\t\t},\n\t\t\"Lorentz Lyceum\": {\n\t\t\tlevel: [\"HAVO\", \"VWO\", \"OPUS\", \"n.v.t.\", \"-\"],\n\t\t\tschoolLocation: [\"Parnassusstraat 20, Arnhem\", \"Groningensingel 1245, Arnhem\"]\n\t\t},\n\t\t\"Maarten van Rossem\": {\n\t\t\tlevel: [\"VMBO\", \"-\"],\n\t\t\tschoolLocation: [\"Groningensingel 1235, Arnhem\"],\n\t\t},\n\t\t\"Montessori College Arnhem\": {\n\t\t\tlevel: [\"MAVO\", \"HAVO\", \"VWO\", \"-\"],\n\t\t\tschoolLocation: [\"Utrechtseweg 174, Arnhem\"]\n\t\t},\n\t\t\"Olympus College\": {\n\t\t\tlevel: [\"ISK\", \"Jan Ligthart\", \"MAVO\", \"HAVO\", \"VWO\", \"-\"],\n\t\t\tschoolLocation: [\"Olympus 11, Arnhem\"],\n\t\t},\n\t\t\"Produs Praktijkonderwijs\": {\n\t\t\tlevel: [\"Praktijkschool\", \"-\"],\n\t\t\tschoolLocation: [\"Leidenweg 60, Arnhem\"],\n\t\t},\n\t\t\"Stedelijk Gymnasium Arnhem\": {\n\t\t\tlevel: [\"VWO\", \"-\"],\n\t\t\tschoolLocation: [\"Thorbeckestraat 17, Arnhem\"],\n\t\t},\n\t\t\"Symbion\": {\n\t\t\tlevel: [\"Praktijkschool\", \"-\"],\n\t\t\tschoolLocation: [\"Hoge Witteveld 2, Didam\"],\n\t\t},\n\t\t\"Vmbo 't Venster\": {\n\t\t\tlevel: [\"ISK\", \"VMBO\", \"MAVO\", \"-\"],\n\t\t\tschoolLocation: [\"Thomas a Kempislaan 82, Arnhem\"],\n\t\t},\n\t\t\"Het Westeraam\": {\n\t\t\tlevel: [\"VMBO\", \"-\"],\n\t\t\tschoolLocation: [\"Auditorium 6, Elst\"],\n\t\t},\n\t},\n\tlevel: {\n\t\t\"-\": {},// Teacher/GradeAdmin/Admin\n\t\t\"Praktijkschool\": {\n\t\t\tyear: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\"],\n\t\t\tprofile: [\"n.v.t.\"],\n\t\t},\n\t\t\"ISK\": {\n\t\t\tyear: [\"n.v.t.\"],\n\t\t\tprofile: [\"n.v.t.\"],\n\t\t},\n\t\t\"VMBO\": {\n\t\t\tyear: [\"1\", \"2\", \"3\", \"4\"],\n\t\t\tprofile: [\n\t\t\t\t\"Bouwen, wonen en interieur\",\n\t\t\t\t\"Dienstverlening en producten\",\n\t\t\t\t\"Economie en ondernemen\",\n\t\t\t\t\"Groen\",\n\t\t\t\t\"Horeca, bakkerij en recreatie\",\n\t\t\t\t\"Maritiem en techniek\",\n\t\t\t\t\"Media, vormgeving en ICT\",\n\t\t\t\t\"Mobiliteit en transport\",\n\t\t\t\t\"Produceren, installeren en energie\",\n\t\t\t\t\"Zorg en welzijn\",\n\t\t\t\t\"n.v.t.\",\n\t\t\t],\n\t\t},\n\t\t\"MAVO\": {\n\t\t\tyear: [\"1\", \"2\", \"3\", \"4\"],\n\t\t\tprofile: [\n\t\t\t\t\"Economie\",\n\t\t\t\t\"Landbouw (Groen)\",\n\t\t\t\t\"Techniek\",\n\t\t\t\t\"Zorg en welzijn\",\n\t\t\t\t\"n.v.t.\",\n\t\t\t],\n\t\t},\n\t\t\"HAVO\": {\n\t\t\tyear: [\"1\", \"2\", \"3\", \"4\", \"5\"],\n\t\t\tprofile: [\n\t\t\t\t\"Cultuur en Maatschappij\",\n\t\t\t\t\"Economie en Maatschappij\",\n\t\t\t\t\"Natuur en Gezondheid\",\n\t\t\t\t\"Natuur en Techniek\",\n\t\t\t\t\"Natuur en Techniek & Natuur en Gezondheid\",\n\t\t\t\t\"Cultuur en Maatschappij & Economie en Maatschappij\",\n\t\t\t\t\"n.v.t.\",\n\t\t\t]\n\t\t},\n\t\t\"VWO\": {\n\t\t\tyear: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\"],\n\t\t\tprofile: [\n\t\t\t\t\"Cultuur en Maatschappij\",\n\t\t\t\t\"Economie en Maatschappij\",\n\t\t\t\t\"Natuur en Gezondheid\",\n\t\t\t\t\"Natuur en Techniek\",\n\t\t\t\t\"Natuur en Techniek & Natuur en Gezondheid\",\n\t\t\t\t\"Cultuur en Maatschappij & Economie en Maatschappij\",\n\t\t\t\t\"n.v.t.\",\n\t\t\t],\n\t\t},\n\t\t\"Jan Ligthart\": {\n\t\t\tyear: [\"1\"],\n\t\t\tprofile: [\"n.v.t.\"]\n\t\t},\n\t\t\"OPUS\": {\n\t\t\tyear: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\"],\n\t\t\tprofile: [\n\t\t\t\t\"Cultuur en Maatschappij\",\n\t\t\t\t\"Economie en Maatschappij\",\n\t\t\t\t\"Natuur en Gezondheid\",\n\t\t\t\t\"Natuur en Techniek\",\n\t\t\t\t\"Natuur en Techniek & Natuur en Gezondheid\",\n\t\t\t\t\"Cultuur en Maatschappij & Economie en Maatschappij\",\n\t\t\t\t\"n.v.t.\"\n\t\t\t],\n\t\t},\n\t\t\"n.v.t.\": {\n\t\t\tyear: [\"n.v.t.\"],\n\t\t\tprofile: [\"n.v.t.\"],\n\t\t},\n\t},\n\tprofile: {\n\t\t// VMBO\n\t\t\"Bouwen, wonen en interieur\": {},\n\t\t\"Dienstverlening en producten\": {},\n\t\t\"Economie en ondernemen\": {},\n\t\t\"Groen\": {},\n\t\t\"Horeca, bakkerij en recreatie\": {},\n\t\t\"Maritiem en techniek\": {},\n\t\t\"Media, vormgeving en ICT\": {},\n\t\t\"Mobiliteit en transport\": {},\n\t\t\"Produceren, installeren en energie\": {},\n\t\t// \"Zorg en welzijn\": {}, IS A PROFILE OF VMBO AS WELL AS MAVO!\n\t\t// MAVO\n\t\t\"Economie\": {},\n\t\t\"Landbouw (Groen)\": {},\n\t\t\"Techniek\": {},\n\t\t\"Zorg en welzijn\": {\n\t\t},\n\t\t// HAVO/VWO\n\t\t\"Cultuur en Maatschappij\": {\n\t\t\tyear: [\"4\", \"5\", \"6\"],\n\t\t},\n\t\t\"Economie en Maatschappij\": {\n\t\t\tyear: [\"4\", \"5\", \"6\"],\n\t\t},\n\t\t\"Natuur en Gezondheid\": {\n\t\t\tyear: [\"4\", \"5\", \"6\"],\n\t\t},\n\t\t\"Natuur en Techniek\": {\n\t\t\tyear: [\"4\", \"5\", \"6\"],\n\t\t},\n\t\t\"Natuur en Techniek & Natuur en Gezondheid\": {\n\t\t\tyear: [\"4\", \"5\", \"6\"],\n\t\t},\n\t\t\"Cultuur en Maatschappij & Economie en Maatschappij\": {\n\t\t\tyear: [\"4\", \"5\", \"6\"],\n\t\t},\n\t\t\"n.v.t.\": {},\n\t},\n\tschoolLocation: {\n\t\t\"Parnassusstraat 20, Arnhem\": {},\n\t\t\"Leidenweg 60, Arnhem\": {},\n\t\t\"Hoge Witteveld 2, Didam\": {},\n\t\t\"Thomas a Kempislaan 82, Arnhem\": {},\n\t\t\"Groningensingel 1235, Arnhem\": {},\n\t\t\"Auditorium 6, Elst\": {},\n\t\t\"Dijksestraat 12, Didam\": {},\n\t\t\"Stationspoort 36, Zevenaar\": {},\n\t\t\"Heerenmten 6, Zevenaar\": {},\n\t\t\"Zonegge 07-09, Zevenaar\": {},\n\t\t\"Eltensestraat 8, Duiven\": {\n\t\t\tlevel: [\"VMBO\", \"MAVO\"],\n\t\t},\n\t\t\"Saturnus 1, Duiven\": {\n\t\t\tlevel: [\"HAVO\", \"VWO\"],\n\t\t},\n\t\t\"Thorbeckestraat 17, Arnhem\": {},\n\t\t\"Auditorium 3, Elst\": {},\n\t\t\"Utrechtseweg 174, Arnhem\": {},\n\t\t\"Olympus 11, Arnhem\": {},\n\t\t\"Groningensingel 1245, Arnhem\": {},\n\t\t\"Bernhardlaan 49, Arnhem\": {},\n\t\t\"Saturnus 5, Duiven\": {},\n\t},\n\tyear: {\n\t\t\"n.v.t.\": {},\n\t\t\"1\": {\n\t\t\tprofile: [\"n.v.t.\"],\n\t\t},\n\t\t\"2\": {\n\t\t\tprofile: [\"n.v.t.\"],\n\t\t},\n\t\t\"3\": {},\n\t\t\"4\": {},\n\t\t\"5\": {},\n\t\t\"6\": {},\n\t}\n}\n\n// Turn an array of form [a,b,...n] to an object of form {\"a\": {}, \"b\": {}, ... \"n\": {}}\nfunction arrToObj(arr) {\n\treturn arr.reduce((acc, cur) => {\n\t\treturn {\n\t\t\t...acc,\n\t\t\t[cur]: {},\n\t\t}\n\t}, {});\n}\n\n// transform arrays to objects\nfor (let field in possibleValues) {\n\tfor (let value in possibleValues[field]) {\n\t\tfor (let constraint in possibleValues[field][value]) {\n\t\t\tpossibleValues[field][value][constraint] = arrToObj(possibleValues[field][value][constraint]);\n\t\t}\n\t}\n}\n\n// Turn an object of form {\"a\": {\"c\":x},...} into {\"a\": {\"c\": {}}}\nfunction oneDeep(obj) {\n\tlet y = {};\n\tfor (let x in obj) {\n\t\ty[x] = arrToObj(Object.keys(obj[x]));\n\t}\n\treturn y;\n}\n\nlet oneDeepPossibleValues = oneDeep(possibleValues)\n\n// fill missing values\nfor (let field in possibleValues) {\n\tfor (let value in possibleValues[field]) {\n\t\tpossibleValues[field][value] = {\n\t\t\t...oneDeepPossibleValues,\n\t\t\t...possibleValues[field][value]\n\t\t}\n\t}\n}\n\n\nexport { arrToObj };\nexport default possibleValues;","import React, { Component } from 'react';\nimport { Typography, Divider } from '@material-ui/core/';\nimport Field from '../../components/Field';\nimport { cloneDeep } from \"lodash\";\nimport possibleValues from \"./educationConstraints\"\n\nclass EducationData extends Component {\n\n\treducedChoices = null;\n\treduceChoices = () => {\n\t\tlet autoFilledUser = { ...this.props.user };\n\t\tlet CONS = cloneDeep(possibleValues);\n\t\tfor (let i = 0; i < 5; i++) {\n\t\t\tfor (let field in possibleValues) {\n\t\t\t\tlet userValue = CONS[field][autoFilledUser[field]];\n\t\t\t\tif (userValue != null) {\n\t\t\t\t\tfor (let constraint in userValue) {\n\t\t\t\t\t\tCONS[constraint] = this.intersection(CONS[constraint], userValue[constraint]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (let field in possibleValues) {\n\t\t\t\tif (Object.keys(CONS[field]).length === 1) {\n\t\t\t\t\tautoFilledUser[field] = Object.keys(CONS[field])[0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.reducedChoices = CONS;\n\t}\n\n\tintersection = (o1, o2) => {\n\t\treturn Object.keys(o1)\n\t\t\t.concat(Object.keys(o2))\n\t\t\t.sort()\n\t\t\t.reduce(function (r, a, i, aa) {\n\t\t\t\tif (i && aa[i - 1] === a) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...r,\n\t\t\t\t\t\t[a]: o1[a]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn r;\n\t\t\t}, {});\n\t}\n\n\tgetField = (field) => {\n\t\tlet value = this.props.user[field];\n\t\tlet options = Object.keys(this.reducedChoices[field]);\n\t\tlet editable = this.props.editableUser;\n\t\tif (options == null || options.length === 0) {\n\t\t\tconsole.error(this.props.user);\n\t\t\tconsole.error(\"INVALID EDUCATION DATA STATE ON FIELD \" + field);\n\t\t\toptions = Object.keys(possibleValues[field]);\n\t\t}\n\t\tif (options.length === 1) {\n\t\t\tvalue = options[0];\n\t\t\teditable = false;\n\t\t}\n\t\tif (options.indexOf(value) === -1) {\n\t\t\tvalue = \"\";\n\t\t}\n\t\tif (field === \"school\") {\n\t\t\teditable = this.props.editableAdmin;\n\t\t}\n\t\treturn <Field\n\t\t\tvalue={value}\n\t\t\teditable={editable}\n\t\t\tonChange={(value) => this.props.onChange(field, value)}\n\t\t\tlayout={{\n\t\t\t\ttd: true,\n\t\t\t\tarea: true,\n\t\t\t}}\n\t\t\tvalidate={{\n\t\t\t\tnotEmpty: true,\n\t\t\t}}\n\t\t\tstyle={{\n\t\t\t\tmargin: \"none\",\n\t\t\t}}\n\t\t\toptions={options}\n\t\t/>\n\t}\n\n\trender() {\n\t\tconst p = this.props;\n\t\tthis.reduceChoices();\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Typography variant=\"h6\" color=\"secondary\">\n\t\t\t\t\tSchool gegevens\n\t\t\t\t</Typography>\n\t\t\t\t<table>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tvalue=\"School\"\n\t\t\t\t\t\t\t\tlayout={{ td: true }}\n\t\t\t\t\t\t\t\tstyle={{ margin: \"none\" }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{this.getField(\"school\")}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tvalue=\"Hoofdrol\"\n\t\t\t\t\t\t\t\tlayout={{ td: true }}\n\t\t\t\t\t\t\t\tstyle={{ margin: \"none\" }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tvalue={p.user.role}\n\t\t\t\t\t\t\t\tstyle={{ margin: \"none\" }}\n\t\t\t\t\t\t\t\teditable={p.editableAdmin}\n\t\t\t\t\t\t\t\tlayout={{ td: true, area: true }}\n\t\t\t\t\t\t\t\tonChange={(value) => p.onChange(\"role\", value)}\n\t\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t\t{ label: \"Administrator\", value: \"admin\" },\n\t\t\t\t\t\t\t\t\t{ label: \"Leerling\", value: \"student\" },\n\t\t\t\t\t\t\t\t\t{ label: \"Expert\", value: \"teacher\" },\n\t\t\t\t\t\t\t\t\t{ label: \"Contactpersoon\", value: \"grade_admin\" },\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tvalue=\"Schoolemail\"\n\t\t\t\t\t\t\t\tlayout={{ td: true }}\n\t\t\t\t\t\t\t\tstyle={{ margin: \"none\" }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tvalue={p.user.email}\n\t\t\t\t\t\t\t\tstyle={{ margin: \"none\" }}\n\t\t\t\t\t\t\t\tlayout={{ td: true, area: true }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t\t<Divider />\n\t\t\t\t<table>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tvalue=\"Opleidingsniveau\"\n\t\t\t\t\t\t\t\tlayout={{ td: true }}\n\t\t\t\t\t\t\t\tstyle={{ margin: \"none\" }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{this.getField(\"level\")}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tvalue=\"Schoollocatie\"\n\t\t\t\t\t\t\t\tlayout={{ td: true }}\n\t\t\t\t\t\t\t\tstyle={{ margin: \"none\" }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{this.getField(\"schoolLocation\")}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tvalue=\"Leerjaar\"\n\t\t\t\t\t\t\t\tlayout={{ td: true }}\n\t\t\t\t\t\t\t\tstyle={{ margin: \"none\" }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{this.getField(\"year\")}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tvalue={\"Profiel\"}\n\t\t\t\t\t\t\t\tlayout={{ td: true }}\n\t\t\t\t\t\t\t\tstyle={{ margin: \"none\" }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{this.getField(\"profile\")}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default EducationData;","import React, { Component } from \"react\";\nimport { connect } from 'react-redux';\nimport { Typography, Button, Dialog, DialogTitle, DialogContent, DialogActions } from \"@material-ui/core/\";\nimport { Add } from \"@material-ui/icons\";\nimport {\n\tgetSubjects,\n} from \"../../store/actions\";\nimport Field from \"../../components/Field\";\nimport { map } from \"lodash\";\n\nclass ExamSubjects extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tisDialogOpen: false,\n\t\t\tnewSubjectId: null,\n\t\t\tnewSubjectProfile: null,\n\t\t\tisValid: false,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.getSubjects();\n\t}\n\n\ttoggleDialog = () => {\n\t\tthis.setState({\n\t\t\tisDialogOpen: !this.state.isDialogOpen,\n\t\t})\n\t}\n\n\tonChange = (field, value) => {\n\t\tlet newState = {\n\t\t\t...this.props.state,\n\t\t\t[field]: value,\n\t\t}\n\t\tif (newState.newSubjectId && newState.newSubjectProfile) {\n\t\t\tnewState.isValid = true;\n\t\t}\n\t\tthis.setState(newState);\n\t}\n\n\tupdateExamSubjects = () => {\n\t\tthis.props.onChange(\"examSubjects\", JSON.stringify([\n\t\t\t...this.props.examSubjects,\n\t\t\t{ id: this.state.newSubjectId, inProfile: this.state.newSubjectProfile === \"T\" }\n\t\t]));\n\n\t\tthis.setState({\n\t\t\tisDialogOpen: false,\n\t\t\tnewSubjectId: null,\n\t\t\tnewSubjectProfile: null,\n\t\t\tisValid: false,\n\t\t})\n\t}\n\n\tgetExamSubjectListItem = ({ id, name, inProfile }) => {\n\t\treturn <tr key={id} className=\"examSubjectListItem\">\n\t\t\t<th>\n\t\t\t\t{name}\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t{inProfile ? \"(in profiel deel)\" : \"(in vrije deel)\"}\n\t\t\t</td>\n\t\t</tr>\n\t}\n\n\trender() {\n\t\tconst p = this.props;\n\t\tconst examSubjectComponents =\n\t\t\tp.examSubjects\n\t\t\t\t.filter(({ id }) => p.subjects[id])\n\t\t\t\t.map(({ id, inProfile }) => { return { id, inProfile, name: p.subjects[id].name } })\n\t\t\t\t.map(this.getExamSubjectListItem);\n\t\tconst availableSubjects = map(p.subjects, (x) => { return { ...x } })\n\t\t\t.filter(({ canDoExam }) => canDoExam)\n\t\t\t.filter(({ id }) => { return p.examSubjects.filter((x) => x.id + \"\" === id + \"\").length === 0 })\n\t\t\t.map(({ id, name }) => { return { label: name, value: id } });\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Typography variant=\"h6\" color=\"secondary\">\n\t\t\t\t\tExamen vakken\n\t\t\t\t</Typography>\n\t\t\t\t<Typography>\n\t\t\t\t\tIn deze vakken wil ik bij de Q-Highschool examen doen:\n\t\t\t\t</Typography>\n\t\t\t\t<table>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{examSubjectComponents}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t\t{this.props.editableUser &&\n\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" startIcon={<Add />} onClick={this.toggleDialog} >\n\t\t\t\t\t\tNieuw examenvak\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t\t<Dialog onClose={this.toggleDialog} aria-labelledby=\"customized-dialog-title\" open={this.state.isDialogOpen}>\n\t\t\t\t\t<DialogTitle id=\"customized-dialog-title\" onClose={this.toggleDialog}>\n\t\t\t\t\t\tNieuw examenvak\n        \t</DialogTitle>\n\t\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t\t<Typography gutterBottom>\n\t\t\t\t\t\t\tIn welk vak wil je examen doen?\n          \t</Typography>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\teditable\n\t\t\t\t\t\t\tlabel=\"Nieuw examenvak\"\n\t\t\t\t\t\t\tvalue={this.state.newSubjectId}\n\t\t\t\t\t\t\toptions={availableSubjects}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tmargin: \"dense\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tlayout={{\n\t\t\t\t\t\t\t\tarea: true,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonChange={(value) => this.onChange(\"newSubjectId\", value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Typography gutterBottom>\n\t\t\t\t\t\t\tVolg je dit vak binnen je profiel of in het vrije deel?\n          \t</Typography>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\teditable\n\t\t\t\t\t\t\tvalue={this.state.newSubjectProfile}\n\t\t\t\t\t\t\toptions={[{ label: \"In profiel\", value: \"T\" }, { label: \"In vrije deel\", value: \"F\" }]}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tmargin: \"dense\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tlayout={{\n\t\t\t\t\t\t\t\tarea: true,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonChange={(value) => this.onChange(\"newSubjectProfile\", value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button onClick={this.toggleDialog}>\n\t\t\t\t\t\t\tAnnuleren\n          </Button>\n\t\t\t\t\t\t<Button autoFocus onClick={this.updateExamSubjects} color=\"primary\" disabled={this.state.isValid}>\n\t\t\t\t\t\t\tOpslaan\n          \t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state, ownProps) {\n\treturn {\n\t\tsubjects: state.subjects || [],\n\t\texamSubjects: (ownProps.user.examSubjects || \"\").length > 2 ? JSON.parse(ownProps.user.examSubjects) : [],\n\t\t...ownProps,\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tgetSubjects: () => dispatch(getSubjects()),\n\t}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ExamSubjects);","import React, { Component } from \"react\";\nimport { Typography, Checkbox, FormControlLabel } from \"@material-ui/core/\";\n\nclass Remarks extends Component {\n\n\trender() {\n\t\tconst p = this.props;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{/* <Typography variant=\"h6\" color=\"secondary\">\n\t\t\t\t\tOpmerkingen\n\t\t\t\t</Typography>\n\t\t\t\t{!p.isStudent &&\n\t\t\t\t\t<Typography>\n\t\t\t\t\t\tLet op: Dit veld is ook voor leerlingen zichtbaar!\n\t\t\t\t\t</Typography>\n\t\t\t\t}\n\t\t\t\t<Field\n\t\t\t\t\tvalue={p.user.remarks}\n\t\t\t\t\tstyle={{ minHeight: \"200px\" }}\n\t\t\t\t\tlayout={{ area: true }}\n\t\t\t\t\teditable={p.isAdmin}\n\t\t\t\t\tonChange={(value) => p.onChange(\"remarks\", value)}\n\t\t\t\t/> */}\n\t\t\t\t{p.isAdmin &&\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Typography variant=\"h6\" color=\"secondary\">\n\t\t\t\t\t\t\tVerzoek profiel update\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\tchecked={p.user.needsProfileUpdate}\n\t\t\t\t\t\t\t\t\tdisabled={!p.editableUser}\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tonChange={({ target: { checked } }) => p.onChange(\"needsProfileUpdate\", checked)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlabel=\"Deze leerling moet zijn gegevens bijwerken\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\nexport default Remarks;","import { Component } from \"react\";\nimport queryString from \"query-string\";\nimport { withRouter } from 'react-router-dom';\nimport { setSecureLogin, getCookie } from \"../store/actions\"\nimport { connect } from \"react-redux\";\n\nclass LoginProvider extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {}\n\t}\n\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\tlet s = queryString.parse(nextProps.location.search);\n\t\tif (s.secureLogin != null) {\n\t\t\tnextProps.setSecureLogin(s.secureLogin);\n\t\t}\n\t\tif (s.from === \"login\" && nextProps.user != null && nextProps.role !== \"student\") {\n\t\t\tconst beforeLoginPath = getCookie(\"beforeLoginPath\");\n\t\t\tnextProps.history.push(beforeLoginPath);\n\t\t}\n\t\treturn prevState;\n\t}\n\n\trender() {\n\t\treturn this.props.children;\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tsetSecureLogin: (secureLogin) => dispatch(setSecureLogin(secureLogin)),\n\t};\n}\n\n\nexport default withRouter(connect(null, mapDispatchToProps)(LoginProvider));","import React, { Component } from \"react\";\nimport { Button, Paper } from \"@material-ui/core/\";\nimport EnsureSecureLogin from \"../components/EnsureSecureLogin\";\nimport PageLeaveWarning from \"../components/PageLeaveWarning\";\nimport \"./Saveable.css\"\n\nclass Saveable extends Component {\n\n\trender() {\n\t\tconst onSave = this.props.onSave;\n\t\tconst hasChanged = this.props.hasChanged;\n\t\tconst editIfSecure = this.props.editIfSecure;\n\t\tconst isSecure = this.props.isSecure;\n\t\tconst showBanner = hasChanged || (editIfSecure && !isSecure);\n\t\treturn <div>\n\t\t\t{this.props.children}\n\t\t\t{showBanner &&\n\t\t\t\t<Paper className=\"SaveBanner\">\n\t\t\t\t\t{(editIfSecure && !isSecure) &&\n\t\t\t\t\t\t<EnsureSecureLogin dense>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t</EnsureSecureLogin>\n\t\t\t\t\t}\n\t\t\t\t\t{hasChanged &&\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Button color=\"primary\" variant=\"outlined\" onClick={onSave}>\n\t\t\t\t\t\t\t\tOpslaan\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button color=\"default\" onClick={onSave}>\n\t\t\t\t\t\t\t\tAnnuleren\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t<PageLeaveWarning giveWarning={hasChanged} />\n\t\t\t\t</Paper>\n\t\t\t}\n\t\t</div>\n\t}\n}\n\n\nexport default Saveable;","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Page from '../Page';\nimport { Typography, Divider } from '@material-ui/core/';\nimport { PriorityHigh } from \"@material-ui/icons\";\nimport Progress from \"../../components/Progress\"\n\nimport PersonalData from \"./PersonalData\"\nimport EducationData from \"./EducationData\"\nimport ExamSubjects from \"./ExamSubjects\"\nimport Remarks from \"./Other\"\nimport LoginProvider from '../../lib/LoginProvider';\nimport \"./Profile.css\";\nimport Saveable from '../../components/Saveable';\nimport { setUser, setFullUser, setSecureLogin, getCookie } from '../../store/actions';\nimport queryString from \"query-string\";\nimport { withRouter } from 'react-router-dom';\n\nclass Profile extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tuser: {}\n\t\t}\n\t}\n\n\tonChange = (field, value) => {\n\t\tthis.setState({\n\t\t\tuser: {\n\t\t\t\t...this.state.user,\n\t\t\t\t[field]: value,\n\t\t\t}\n\t\t})\n\t}\n\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\tlet s = queryString.parse(nextProps.location.search);\n\t\tif (s.secureLogin != null && s.secureLogin !== \"undefined\") {\n\t\t\tnextProps.setSecureLogin(s.secureLogin);\n\t\t}\n\t\tif (s.from === \"login\" && nextProps.user != null && nextProps.role !== \"student\") {\n\t\t\tconst beforeLoginPath = getCookie(\"beforeLoginPath\");\n\t\t\tnextProps.history.push(beforeLoginPath);\n\t\t}\n\t\treturn {\n\t\t\torgUser: nextProps.user,\n\t\t\tuser: {\n\t\t\t\t...nextProps.user,\n\t\t\t\t...prevState.user,\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\tconst user = this.state.user;\n\t\tconst hasChanged = JSON.stringify(this.props.user) !== JSON.stringify(user);\n\t\tconst p = { ...this.props, user }\n\n\t\tif (user == null || user === {}) {\n\t\t\treturn <LoginProvider>\n\t\t\t\t<Page>\n\t\t\t\t\t<Progress />\n\t\t\t\t</Page>\n\t\t\t</LoginProvider>\n\t\t}\n\t\treturn (\n\t\t\t<LoginProvider>\n\t\t\t\t<Page className=\"Profile\">\n\t\t\t\t\t<Saveable\n\t\t\t\t\t\thasChanged={hasChanged || (user.needsProfileUpdate && user.role === \"student\")}\n\t\t\t\t\t\tonSave={() => {\n\t\t\t\t\t\t\tif (this.props.editableAdmin) {\n\t\t\t\t\t\t\t\tthis.props.saveFull(user)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst U = {\n\t\t\t\t\t\t\t\t\t...user,\n\t\t\t\t\t\t\t\t\tneedsProfileUpdate: false,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.props.save(U)\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\tuser: U,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\teditIfSecure={this.props.isAdmin}\n\t\t\t\t\t\tisSecure={this.props.isSecure}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Typography variant=\"h4\" color=\"primary\">\n\t\t\t\t\t\t\t{user.displayName}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t{user.needsProfileUpdate &&\n\t\t\t\t\t\t\t< div className=\"NeedsProfileUpdate\">\n\t\t\t\t\t\t\t\t<PriorityHigh color=\"secondary\" />\n\t\t\t\t\t\t\t\t<Typography variant=\"button\" color=\"secondary\">\n\t\t\t\t\t\t\t\t\tControleer de onderstaande gegevens\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<PersonalData {...p} onChange={this.onChange} />\n\t\t\t\t\t\t\t<EducationData  {...p} onChange={this.onChange} />\n\t\t\t\t\t\t\t{this.props.isStudent &&\n\t\t\t\t\t\t\t\t<ExamSubjects {...p} onChange={this.onChange} />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<Remarks {...p} onChange={this.onChange} />\n\t\t\t\t\t\t\t<div style={{ height: \"300px\" }} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Saveable>\n\t\t\t\t</Page>\n\t\t\t</LoginProvider >\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state, ownProps) {\n\tconst isOwn = true;\n\tconst isAdmin = state.role === \"admin\"\n\tconst isStudent = state.role === \"student\"\n\tconst isSecure = state.secureLogin != null;\n\treturn {\n\t\tisAdmin,\n\t\tisSecure,\n\t\tisStudent,\n\t\tisOwn,\n\t\tuser: state.users[state.userId],\n\t\teditableUser: (isOwn && !isAdmin) || (isSecure && isAdmin),\n\t\teditableAdmin: isSecure && isAdmin,\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tsetSecureLogin: (secureLogin) => dispatch(setSecureLogin(secureLogin)),\n\t\tsave: (user) => dispatch(setUser(user)),\n\t\tsaveFull: (user) => dispatch(setFullUser(user)),\n\t};\n}\n\n\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Profile));","import React, { Component } from \"react\";\nimport { getEnrolLments, getParticipatingGroups, getSubjects } from \"../store/actions\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { translateAssessment } from \"./group/Evaluation\";\nimport jspdf from \"jspdf\"\nimport Page from \"../pages/Page\"\nimport Progress from \"../components/Progress\"\n\nclass Certificate extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\t// Keep track whether we have already generated a pdf.\n\t\tthis.state = {\n\t\t\tgeneratedPdf: false,\n\t\t\timages: {\n\t\t\t\tbackground: \"jpg\",\n\t\t\t\tcourse_header: \"png\",\n\t\t\t\tportfolio_header: \"png\",\n\t\t\t\tsignature: \"png\",\n\t\t\t\tquadraam_logo: \"png\"\n\t\t\t}\n\t\t};\n\n\t\t// Load all the images in the state.\n\t\tObject.keys(this.state.images).forEach(key => {\n\t\t\tlet imageData = new Image();\n\t\t\timageData.src = \"/images/certificate/\" + key + \".\" + this.state.images[key];\n\t\t\timageData.onload = () => {\n\t\t\t\tthis.state.images[key] = imageData;\n\t\t\t}\n\t\t});\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.getSubjects();\n\t}\n\n\t/**\n\t\t* Adds a page to an existing pdf, or generates a base\n\t\t* pdf to work with. This new page has all the images pre-applied.\n\t\t*\n\t\t* @param pdf A pdf object (optional)\n\t\t* @returns A pdf object.\n\t\t*/\n\tmakeBase(pdf = new jspdf({\n\t\torientation: \"p\",\n\t\tunit: \"mm\",\n\t\tformat: \"a4\",\n\t\tputOnlyUsedFonts: true,\n\t\tfloatPrecision: 16\n\t})) {\n\t\t// Add a page count.\n\t\tif (!pdf.hasOwnProperty(\"page_count\")) {\n\t\t\tpdf.page_count = 1;\n\t\t} else {\n\t\t\tpdf.addPage();\n\t\t\tpdf.page_count++;\n\t\t}\n\n\t\t// Setup some formatting stuff.\n\t\tpdf.setFontSize(12);\n\t\tpdf.setFont(\"helvetica\", \"normal\");\n\n\t\t// Image has a ratio of 0.7:1\n\t\tpdf.addImage(this.state.images.background, \"jpg\", 0, 0, 210, 300);\n\t\t// Image has a ratio of 2.54:1\n\t\tpdf.addImage(this.state.images.signature, \"png\", 45, 190, 120, 47);\n\t\t// Image has a ratio of 3.43:1\n\t\tpdf.addImage(this.state.images.quadraam_logo, \"png\", 70, 240, 70, 20);\n\n\t\treturn pdf;\n\t}\n\n\t/**\n\t\t* Grabs the data using the groupId provided and\n\t\t* puts that as first page in the pdf certificate.\n\t\t*\n\t\t* @param groupId The id of the group to generate a certificate for.\n\t\t* @param pdf The pdf object.\n\t\t*/\n\taddModule(groupId, pdf) {\n\t\tif (!this.props.groups) {\n\t\t\tconsole.log(\"No groups found\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.props.groups.hasOwnProperty(groupId + \"\")) {\n\t\t\tconsole.log(\"That group id cannot be found!\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.props.groups[groupId].hasOwnProperty(\"evaluation\")) {\n\t\t\tconsole.log(\"That module has no evaluation!\");\n\t\t\treturn;\n\t\t}\n\n\t\t// Fetch the data.\n\t\tlet data = this.props.groups[groupId];\n\n\t\t// Image has a ratio of 3.66:1\n\t\tpdf.addImage(this.state.images.course_header, \"png\", 20, 0, 150, 41);\n\n\t\t// Add the text.\n\t\tpdf.text(\"Hierbij verklaart Quadraam dat\", 105, 60, { align: \"center\" });\n\n\t\tpdf.setFontStyle(\"bold\");\n\t\tpdf.setFontSize(25);\n\t\tpdf.text(data.evaluation.displayName, 105, 70, { align: \"center\", maxWidth: 175 });\n\t\tpdf.setFontSize(12);\n\t\tpdf.setFontStyle(\"normal\");\n\n\t\tpdf.text(\"de Q-Highschool module\", 105, 87, { align: \"center\" });\n\n\t\tpdf.setFontStyle(\"bold\");\n\t\tpdf.setFontSize(28);\n\t\tpdf.text(data.courseName, 105, 100, { align: \"center\", maxWidth: 175 });\n\t\tpdf.setFontSize(12);\n\t\tpdf.setFontStyle(\"normal\");\n\n\t\tpdf.text(\"van \" + data.studyTime.toString() + \" studie-uren en onderdeel van het parcours informatica successvol heeft afgesloten met de beoordeling\", 105, 125, { align: \"center\", maxWidth: 120 });\n\n\t\tpdf.setFontStyle(\"bold\");\n\t\tpdf.setFontSize(28);\n\t\tpdf.text(translateAssessment(data.evaluation), 105, 145, { align: \"center\" });\n\t\tpdf.setFontSize(12);\n\t\tpdf.setFontStyle(\"normal\");\n\n\t\tlet date = data.evaluation.hasOwnProperty(\"date\") ? data.evaluation.date.toString() : data.schoolYear.toString();\n\t\tpdf.text(date, 105, 168, { align: \"center\" });\n\t}\n\n\t/**\n\t * Adds default text to a new portfolio page.\n\t *\n\t * @param pdf The pdf to add the text to.\n\t * @param name Name of the student for the header.\n\t */\n\tportfolioBasePage(pdf, subjectId) {\n\t\t// Set the name header.\n\t\tpdf.text(\"Hierbij verklaart Quadraam dat\", 80, 50);\n\n\t\tpdf.setFontSize(25);\n\t\tpdf.setFontStyle(\"bold\");\n\t\tpdf.text(this.props.user.displayName, 107, 60, { align: \"center\" });\n\n\t\tpdf.setFontSize(12);\n\t\tpdf.setFontStyle(\"normal\");\n\t\tpdf.text(`binnen het parcours ${this.props.subjects[subjectId].name} de volgende Q-highschoolmodules heeft afgerond:`, 105, 70, { align: \"center\", maxWidth: 100 });\n\n\t\tpdf.addImage(this.state.images.portfolio_header, \"png\", 20, 0, 150, 41);\n\n\t\tthis.addPortfolioTableHeader(pdf,100)\n\t}\n\n\n\taddPortfolioTableHeader(pdf, height) {\n\t\t// Make the header for the portfolio table.\n\t\tpdf.setFontStyle(\"bold\");\n\t\tpdf.text(\"Naam module\", 20, height);\n\t\tpdf.text(\"Studietijd\", 130, height);\n\t\tpdf.text(\"Schooljaar\", 170, height);\n\t\tpdf.setFontStyle(\"normal\");\n\t}\n\n\t/**\n\t\t* Gathers data for the portfolio page(s) in the certificate,\n\t\t* then adds the data in a nicely formatted way to the\n\t\t* certificate.\n\t\t*\n\t\t* @param pdf The pdf object.\n\t\t*/\n\taddPortfolio(pdf, subjectId) {\n\t\tif (!this.props.groups)\n\t\t\treturn;\n\n\t\t// Construct the portfolio table.\n\t\tlet heightOffset = 0;\n\t\tlet page = 0;\n\t\tpdf.setFontStyle(\"normal\");\n\t\tObject.keys(this.props.groups).forEach((key) => {\n\t\t\tlet val = this.props.groups[key];\n\t\t\tlet data = {};\n\n\t\t\tlet maxLines = page === 1 ? 5 : 9;\n\n\t\t\tif (val.subjectId + \"\" !== subjectId + \"\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!val.hasOwnProperty(\"evaluation\"))\n\t\t\t\treturn;\n\n\t\t\t// Get the module name.\n\t\t\tif (val.hasOwnProperty(\"courseName\"))\n\t\t\t\tdata.name = val.courseName.toString();\n\t\t\telse\n\t\t\t\treturn;\n\n\t\t\t// Get the grade data.\n\t\t\tif (val.evaluation.hasOwnProperty(\"assesment\") && val.evaluation.assesment.length > 0)\n\t\t\t\tdata.grade = translateAssessment(val.evaluation)\n\t\t\telse\n\t\t\t\treturn;\n\n\t\t\t// Add another page if there are too many modules.\n\t\t\tif (heightOffset % maxLines === 0) {\n\t\t\t\tif (page === 0) {\n\t\t\t\t\tthis.portfolioBasePage(pdf, subjectId);\n\t\t\t\t} else {\n\t\t\t\t\tthis.makeBase(pdf);\n\t\t\t\t\tthis.addPortfolioTableHeader(pdf,60);\n\t\t\t\t\tpdf.addImage(this.state.images.portfolio_header, \"png\", 20, 0, 150, 41);\n\t\t\t\t}\n\t\t\t\theightOffset = 0;\n\t\t\t\tpage += 1;\n\t\t\t}\n\n\t\t\tlet topHeight = page === 1 ? 113 : 75;\n\n\t\t\t// Get the study credits.\n\t\t\tif (val.hasOwnProperty(\"studyTime\"))\n\t\t\t\tdata.time = val.studyTime.toString();\n\t\t\telse\n\t\t\t\tdata.time = \"-\";\n\n\t\t\t// Get the date of evaluation.\n\t\t\tif (val.evaluation.hasOwnProperty(\"date\"))\n\t\t\t\tdata.date = val.evaluation.date.toString();\n\t\t\telse\n\t\t\t\tdata.date = val.hasOwnProperty(\"schoolYear\") ? val.schoolYear : \"Niet bekend.\";\n\n\t\t\t// Construct a pdf row.\n\t\t\tlet height = heightOffset * 13 + topHeight;\n\t\t\tpdf.text(data.name, 20, height, { maxWidth: 70 });\n\n\t\t\t// Set the color to Quadraam orange and make the text bold.\n\t\t\t// After putting the text down, revert to original settings.\n\t\t\tpdf.setTextColor(\"#F0831F\");\n\t\t\tpdf.setFontStyle(\"bold\");\n\t\t\tpdf.text(data.grade, 90, height);\n\t\t\tpdf.setFontStyle(\"normal\");\n\t\t\tpdf.setTextColor(\"#000000\");\n\n\t\t\tpdf.text(data.time + \" uur\", 130, height);\n\t\t\tpdf.text(data.date, 170, height);\n\t\t\theightOffset += 1;\n\t\t});\n\t}\n\n\t/**\n\t\t* Fixes the page count to be even by adding\n\t\t* a page when the current count is odd.\n\t\t* @param pdf The pdf object.\n\t\t*/\n\tfixPageCount(pdf) {\n\t\tif (pdf.hasOwnProperty(\"page_count\") && pdf.page_count % 2 !== 0) {\n\t\t\tpdf.addPage();\n\t\t\tpdf.page_count++;\n\t\t}\n\t}\n\n\t/**\n\t\t* Generate a certificate based on the url given.\n\t\t* If a groupId is specified, then use that to get a\n\t\t* module specific certificate.\n\t\t*\n\t\t* In all cases add the portfolio and make sure the\n\t\t* amount of pages is even.\n\t\t*/\n\tdoGenerate() {\n\t\tif (this.state.generatedPdf)\n\t\t\treturn;\n\n\t\tif (!this.props.groups) {\n\t\t\tthis.props.getParticipatingGroups();\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.props.enrollmentIds) {\n\t\t\tthis.props.getEnrollments();\n\t\t\treturn;\n\t\t}\n\n\t\t// Make the base pdf.\n\t\tlet pdf = this.makeBase();\n\n\t\t// Add a single module if requested.\n\t\tlet isModuleCertificate = this.props.match.params.hasOwnProperty(\"groupId\") && this.props.match.params.groupId !== null;\n\t\tif (isModuleCertificate) {\n\t\t\tthis.addModule(this.props.match.params.groupId, pdf);\n\t\t} else {\n\t\t\t// Add the portfolio page(s).\n\t\t\tthis.addPortfolio(pdf,this.props.match.params.subjectId);\n\n\t\t\t// Make sure the page count is always even in case we're printing a portfolio.\n\t\t\tthis.fixPageCount(pdf);\n\t\t}\n\n\t\t// Open the pdf in this window.\n\t\t// window.location = pdf.output(\"bloburi\", \"Certificaat Q-Highschool.pdf\");\n\n\t\t// Save the pdf\n\t\tif (isModuleCertificate) {\n\t\t\tpdf.save(\"Certificaat Q-Highschool.pdf\");\n\t\t} else {\n\t\t\tpdf.save(`Portfolio Q-Highschool ${this.props.user.displayName}.pdf`);\n\t\t}\n\n\t\t// Make sure we do not generate the pdf multiple times.\n\t\tlet newState = this.state;\n\t\tnewState.generatedPdf = true;\n\t\tthis.setState(newState);\n\t}\n\n\t/**\n\t\t* Render the page.\n\t\t* @returns a JSX page.\n\t\t*/\n\trender() {\n\t\t// Generate the pdf.\n\t\tthis.doGenerate();\n\n\t\t// Go back if the certificate is generated,\n\t\tif (this.state.generatedPdf) {\n\t\t\treturn (\n\t\t\t\t<Page>\n\t\t\t\t\t<p>Certificaat is klaar!</p>\n\t\t\t\t</Page>\n\t\t\t)\n\t\t} else {\n\t\t\treturn (<Page>\n\t\t\t\t<p>Een moment geduld a.u.b. </p>\n\t\t\t\t<Progress />\n\t\t\t</Page>)\n\t\t}\n\t}\n}\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\tgroups: state.groups,\n\t\tparticipatingGroupIds: state.users[state.userId].participatingGroupIds,\n\t\tenrollmentIds: state.users[state.userId].enrollmentIds,\n\t\trole: state.role,\n\t\tschoolYear: state.schoolYear,\n\t\tcurrentPeriod: state.currentPeriod,\n\t\tuserId: state.userId,\n\t\tuser: state.users[state.userId],\n\t\tsubjects: state.subjects,\n\t};\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tgetSubjects: () => dispatch(getSubjects()),\n\t\tgetEnrollments: () => dispatch(getEnrolLments()),\n\t\tgetParticipatingGroups: () => dispatch(getParticipatingGroups())\n\t};\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)((Certificate)));","import React, {Component} from \"react\";\nimport {Redirect, Route, Switch, withRouter,} from 'react-router-dom';\nimport {connect} from 'react-redux';\n\nimport {addNotification, getSelf} from './store/actions';\n\nimport Login from \"./pages/Login\";\nimport CourseSelect from \"./pages/CourseSelect\";\nimport Group from \"./pages/group/Group\";\nimport User from \"./pages/user/User\";\nimport DataPage from \"./pages/DataPage\";\nimport Taxi from \"./pages/Taxi\";\n\nimport Header from \"./components/Header\";\nimport NotificationBar from \"./components/NotificationBar\";\nimport Menu from \"./components/Menu\";\nimport Portfolio from \"./pages/Portfolio\";\nimport ControlPanel from \"./pages/ControlPanel\";\nimport Profile from \"./pages/profile/Profile\";\nimport Certificate from \"./pages/Certificate\";\n\n\nclass App extends Component {\n\n    componentDidMount() {\n        this.props.getSelf();\n    }\n\n    componentDidUpdate() {\n        if (this.props.user != null && this.props.user.needsProfileUpdate && this.props.role === \"student\" && this.props.location.pathname !== \"/profiel\") {\n            this.props.history.push(\"/profiel\");\n        }\n    }\n\n    handleShowMenu() {\n        let showMenu = this.state.showMenu;\n        this.setState({\n            showMenu: !showMenu,\n        });\n    }\n\n    getStartPage(role) {\n        switch (role) {\n            case \"student\":\n                return \"/aanbod\";\n            case \"grade_admin\":\n                return \"/gegevens\";\n            default:\n                return \"/groepen\";\n        }\n    }\n\n    render() {\n        if (!this.props.role && this.props.location.pathname !== \"/login\") {\n            return <div/>;\n        }\n        const startPage = this.getStartPage(this.props.role);\n        return (\n            <div className=\"App\">\n                <NotificationBar/>\n                {this.props.showMenu && <Menu/>}\n                <Header/>\n                <Switch>\n                    <Route path=\"/login\" component={Login}/>\n                    <Route path=\"/aanbod\" component={CourseSelect}/>\n                    <Route path=\"/groep/:groupId\" component={Group}/>\n                    <Route path=\"/gebruiker/:userId\" component={User}/>\n                    <Route path=\"/profiel/\" component={Profile}/>\n                    <Route path=\"/portfolio/\" component={Portfolio}/>\n                    <Route path=\"/groepen/\" component={Portfolio}/>\n                    <Route path=\"/gegevens/\" component={DataPage}/>\n                    <Route path=\"/taxi/\" component={Taxi}/>\n                    <Route path=\"/beheer/\" component={ControlPanel}/>\n                    <Route path=\"/certificaat/gebruiker/:userId/groep/:groupId\" component={Certificate}/>\n                    <Route path=\"/certificaat/gebruiker/:userId/parcours/:subjectId\" component={Certificate}/>\n                    <Redirect push to={startPage}/>\n                </Switch>\n            </div>\n        );\n    }\n\n}\n\nfunction mapStateToProps(state) {\n    return {\n        showMenu: state.showMenu,\n        userId: state.userId,\n        role: state.role,\n        user: state.userId ? state.users[state.userId] : null,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        getSelf: () => dispatch(getSelf()),\n        addNotification: (notification) => dispatch(addNotification(notification)),\n    };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App));\n","import React, { Component } from \"react\";\n\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\n\nimport theme from './MuiTheme';\nimport App from '../App';\n\nclass GlobalProvider extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<Provider store={this.props.store}>\n\t\t\t\t<MuiThemeProvider theme={theme}>\n\t\t\t\t\t<BrowserRouter>\n\t\t\t\t\t\t<App />\n\t\t\t\t\t</BrowserRouter>\n\t\t\t\t</MuiThemeProvider>\n\t\t\t</Provider>\n\t\t);\n\t}\n}\n\nexport default GlobalProvider;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, applyMiddleware, compose as reduxCompose } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport reducer from './store/mainReducer';\nimport GlobalProvider from './lib/GlobalProvider';\nimport \"./layout.css\";\nrequire('typeface-roboto');\n\nconst compose = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || reduxCompose;\nconst store = createStore(\n  reducer,\n  compose(\n    applyMiddleware(thunk),\n  ),\n);\n\nReactDOM.render(\n\t<GlobalProvider store={store} />,\n\tdocument.getElementById('root'));\n"],"sourceRoot":""}