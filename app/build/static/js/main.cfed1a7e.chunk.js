(this.webpackJsonpqhighschool=this.webpackJsonpqhighschool||[]).push([[0],{503:function(e,t,n){},504:function(e,t,n){},577:function(e,t){},579:function(e,t){},588:function(e,t){},590:function(e,t){},616:function(e,t){},618:function(e,t){},619:function(e,t){},624:function(e,t){},626:function(e,t){},645:function(e,t){},657:function(e,t){},660:function(e,t){},797:function(e,t,n){},798:function(e,t,n){},799:function(e,t,n){},800:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(21),o=n.n(a),s=n(110),i=n(366),c=n(25),l=n(3),u={};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_USERS":var n=e;for(var r in t.users)n[r]=Object(l.a)(Object(l.a)({},n[r]),t.users[r]);return n;case"CHANGE_USER":return Object(l.a)(Object(l.a)({},e),{},{[t.user.id]:Object(l.a)(Object(l.a)({},e[t.user.id]),t.user)});case"CHANGE_ENROLLMENTS":if("ADD"===t.action)return Object(l.a)(Object(l.a)({},e),{},{[t.userId]:Object(l.a)(Object(l.a)({},e[t.userId]),{},{enrollmentIds:(e[t.userId].enrollmentIds||[]).concat(t.groupId)})});if("REMOVE"===t.action){var a=e[t.userId].enrollmentIds.indexOf(t.groupId);return Object(l.a)(Object(l.a)({},e),{},{[t.userId]:Object(l.a)(Object(l.a)({},e[t.userId]),{},{enrollmentIds:[].concat(Object(c.a)(e[t.userId].enrollmentIds.slice(0,a)),Object(c.a)(e[t.userId].enrollmentIds.slice(a+1)))})})}return Object(l.a)(Object(l.a)({},e),{},{[t.userId]:Object(l.a)(Object(l.a)({},e[t.userId]),{},{enrollmentIds:t.enrollmentIds})});default:return e}},d={};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_GROUPS":var n=Object(l.a)({},e);for(var r in t.groups)n[r]=Object(l.a)(Object(l.a)({},n[r]),t.groups[r]);return n;case"CHANGE_GROUP":return Object(l.a)(Object(l.a)({},e),{},{[t.group.id]:Object(l.a)(Object(l.a)({},e[t.group.id]),t.group)});case"CHANGE_PRESENCE_USER_STATUS":return Object(l.a)(Object(l.a)({},e),{},{[t.groupId]:Object(l.a)(Object(l.a)({},e[t.groupId]),{},{lessons:Object(l.a)(Object(l.a)({},e[t.groupId].lessons),{},{[t.lessonId]:Object(l.a)(Object(l.a)({},e[t.groupId].lessons[t.lessonId]),{},{userStatus:t.userStatus})})})});default:return e}},b={currentPeriod:3,enrollmentPeriod:4,schoolYear:"2020/2021",possibleYears:function(e){for(var t=parseInt(e.split("/")[0])+5,n=[],r=2016;r<t;r++)n.push(r+"/"+(r+1));return n}("2020/2021"),userId:null,enrollableGroups:null,subjects:null,groups:null,users:null,showMenu:!0,notifications:[],hasFetched:[]};var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SELF":return Object(l.a)(Object(l.a)({},e),{},{userId:t.user.id,role:t.user.role,notifications:[].concat(Object(c.a)(e.notifications),Object(c.a)(t.user.notifications)),users:Object(l.a)({[t.user.id]:t.user},e.users)});case"SET_SECURE_LOGIN":return Object(l.a)(Object(l.a)({},e),{},{secureLogin:t.secureLogin});case"ADD_NOTIFICATION":return Object(l.a)(Object(l.a)({},e),{},{notifications:[].concat(Object(c.a)(e.notifications),[t.notification])});case"REMOVE_NOTIFICATION":var n=e.notifications.indexOf(t.notification);return Object(l.a)(Object(l.a)({},e),{},{notifications:[].concat(Object(c.a)(e.notifications.slice(0,n)),Object(c.a)(e.notifications.slice(n+1)))});case"TOGGLE_MENU":return null!=t.menuState?Object(l.a)(Object(l.a)({},e),{},{showMenu:t.menuState}):Object(l.a)(Object(l.a)({},e),{},{showMenu:!e.showMenu});case"HAS_FETCHED":return Object(l.a)(Object(l.a)({},e),{},{hasFetched:[].concat(Object(c.a)(e.hasFetched),[{call:t.call,method:t.method,data:t.data}])});case"CHANGE_SUBJECTS":return Object(l.a)(Object(l.a)({},e),{},{subjects:Object(l.a)(Object(l.a)({},e.subjects),t.subjects)});default:return Object(l.a)(Object(l.a)({},e),{},{users:p(e.users,t),groups:h(e.groups,t)})}},g=n(8),f=n(9),O=n(11),x=n(10),v=n(880),m=n(46),y=n(14),k=n(387),C=Object(k.a)({breakpoints:{keys:["xs","sm","md","lg","xl"],values:{xs:0,sm:600,md:960,lg:1280,xl:1920}},direction:"ltr",mixins:{toolbar:{minHeight:56,"@media (min-width:0px) and (orientation: landscape)":{minHeight:48},"@media (min-width:600px)":{minHeight:64}}},overrides:{},palette:{common:{black:"#000",white:"#fff"},type:"light",primary:{main:"#1FB2FF",contrastText:"#fff",light:"rgb(10, 252, 254)",dark:"rgb(5, 140, 174)"},secondary:{main:"#c4112f",contrastText:"#fff",light:"#cf4058",dark:"#890b20"},error:{light:"#f89e4c",main:"#f78620",dark:"#ac5d16",contrastText:"#fff"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},contrastThreshold:3,tonalOffset:.2,text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:"#fff",default:"#fafafa"},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.08)",hoverOpacity:.08,selected:"rgba(0, 0, 0, 0.14)",disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)"}},props:{},shadows:["none","0px 1px 3px 0px rgba(0, 0, 0, 0.2),0px 1px 1px 0px rgba(0, 0, 0, 0.14),0px 2px 1px -1px rgba(0, 0, 0, 0.12)","0px 1px 5px 0px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 3px 1px -2px rgba(0, 0, 0, 0.12)","0px 1px 8px 0px rgba(0, 0, 0, 0.2),0px 3px 4px 0px rgba(0, 0, 0, 0.14),0px 3px 3px -2px rgba(0, 0, 0, 0.12)","0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0, 0, 0, 0.12)","0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 5px 8px 0px rgba(0, 0, 0, 0.14),0px 1px 14px 0px rgba(0, 0, 0, 0.12)","0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0, 0, 0, 0.12)","0px 4px 5px -2px rgba(0, 0, 0, 0.2),0px 7px 10px 1px rgba(0, 0, 0, 0.14),0px 2px 16px 1px rgba(0, 0, 0, 0.12)","0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0, 0, 0, 0.12)","0px 5px 6px -3px rgba(0, 0, 0, 0.2),0px 9px 12px 1px rgba(0, 0, 0, 0.14),0px 3px 16px 2px rgba(0, 0, 0, 0.12)","0px 6px 6px -3px rgba(0, 0, 0, 0.2),0px 10px 14px 1px rgba(0, 0, 0, 0.14),0px 4px 18px 3px rgba(0, 0, 0, 0.12)","0px 6px 7px -4px rgba(0, 0, 0, 0.2),0px 11px 15px 1px rgba(0, 0, 0, 0.14),0px 4px 20px 3px rgba(0, 0, 0, 0.12)","0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0, 0, 0, 0.12)","0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 13px 19px 2px rgba(0, 0, 0, 0.14),0px 5px 24px 4px rgba(0, 0, 0, 0.12)","0px 7px 9px -4px rgba(0, 0, 0, 0.2),0px 14px 21px 2px rgba(0, 0, 0, 0.14),0px 5px 26px 4px rgba(0, 0, 0, 0.12)","0px 8px 9px -5px rgba(0, 0, 0, 0.2),0px 15px 22px 2px rgba(0, 0, 0, 0.14),0px 6px 28px 5px rgba(0, 0, 0, 0.12)","0px 8px 10px -5px rgba(0, 0, 0, 0.2),0px 16px 24px 2px rgba(0, 0, 0, 0.14),0px 6px 30px 5px rgba(0, 0, 0, 0.12)","0px 8px 11px -5px rgba(0, 0, 0, 0.2),0px 17px 26px 2px rgba(0, 0, 0, 0.14),0px 6px 32px 5px rgba(0, 0, 0, 0.12)","0px 9px 11px -5px rgba(0, 0, 0, 0.2),0px 18px 28px 2px rgba(0, 0, 0, 0.14),0px 7px 34px 6px rgba(0, 0, 0, 0.12)","0px 9px 12px -6px rgba(0, 0, 0, 0.2),0px 19px 29px 2px rgba(0, 0, 0, 0.14),0px 7px 36px 6px rgba(0, 0, 0, 0.12)","0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 20px 31px 3px rgba(0, 0, 0, 0.14),0px 8px 38px 7px rgba(0, 0, 0, 0.12)","0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 21px 33px 3px rgba(0, 0, 0, 0.14),0px 8px 40px 7px rgba(0, 0, 0, 0.12)","0px 10px 14px -6px rgba(0, 0, 0, 0.2),0px 22px 35px 3px rgba(0, 0, 0, 0.14),0px 8px 42px 7px rgba(0, 0, 0, 0.12)","0px 11px 14px -7px rgba(0, 0, 0, 0.2),0px 23px 36px 3px rgba(0, 0, 0, 0.14),0px 9px 44px 8px rgba(0, 0, 0, 0.12)","0px 11px 15px -7px rgba(0, 0, 0, 0.2),0px 24px 38px 3px rgba(0, 0, 0, 0.14),0px 9px 46px 8px rgba(0, 0, 0, 0.12)"],typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500,h1:{fontFamily:'"Avenir-Black", "Roboto", "Helvetica", "Arial", sans-serif',letterSpacing:"0.01em"},display4:{fontSize:"7rem",fontWeight:300,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',letterSpacing:"-.04em",lineHeight:"1.14286em",marginLeft:"-.04em",color:"rgba(0, 0, 0, 0.54)"},display3:{fontSize:"3.5rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',letterSpacing:"-.02em",lineHeight:"1.30357em",marginLeft:"-.02em",color:"rgba(0, 0, 0, 0.54)"},display2:{fontSize:"2.8125rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.06667em",marginLeft:"-.02em",color:"rgba(0, 0, 0, 0.54)"},display1:{fontSize:"2.125rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.20588em",color:"rgba(0, 0, 0, 0.54)"},headline:{fontSize:"1.5rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.35417em",color:"rgba(0, 0, 0, 0.87)"},title:{fontSize:"1.3125rem",fontWeight:500,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.16667em",color:"rgba(0, 0, 0, 0.87)"},subheading:{fontSize:"1rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.5em",color:"rgba(0, 0, 0, 0.87)"},body2:{fontSize:"0.875rem",fontWeight:500,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.71429em",color:"rgba(0, 0, 0, 0.87)"},body1:{fontSize:"0.875rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.46429em",color:"rgba(0, 0, 0, 0.87)"},caption:{fontSize:"0.75rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.375em",color:"rgba(0, 0, 0, 0.54)"},button:{fontSize:"0.875rem",textTransform:"uppercase",fontWeight:500,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',color:"rgba(0, 0, 0, 0.87)"}},transitions:{easing:{easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration:{shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195}},spacing:8,zIndex:{mobileStepper:1e3,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500}}),S=n(22),I=n(39),w=n.n(I),N=n(111),E=n(99),P=n.n(E),A=n(70),D=n.n(A),G=n(372),L=n.n(G),T=n(34),M=n.n(T);function F(e,t){return function(n){var r=n.responseJSON;throw"user/self"!==e&&t({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"high",type:"bar",message:r&&r.error?r.error:"Er is iets mis gegaan",scope:"."}}),r}}function H(e,t,n,r,a,o){return R.apply(this,arguments)}function R(){return(R=Object(N.a)(w.a.mark((function e(t,n,r,a,o,s){var i,c,u;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i={call:t,method:n,data:r},c=0;c<o().hasFetched.length;c++)(u=o().hasFetched[c]).data===i.data&&u.call===i.call&&u.method===i.method&&console.error("Duplicate api call: ".concat(n," ").concat(t));return a(Object(l.a)(Object(l.a)({},i),{},{type:"HAS_FETCHED"})),e.abrupt("return",D.a.ajax({url:"/api/"+t,type:n,data:Object(l.a)(Object(l.a)({},r),{},{secureLogin:o().secureLogin}),dataType:"json"}).then((function(e){return"put"!==n&&"patch"!==n&&"delete"!==n||a({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"low",type:"bar",message:"Opgeslagen",scope:""}}),Array.isArray(e)&&!0!==s?L()(e,"id"):e})).catch(F(t,a)));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return function(e,t){H("subject/list","get",null,e,t).then((function(t){e({type:"CHANGE_SUBJECTS",subjects:t})})).catch((function(){}))}}function z(){return function(e,t){H("group/list","get",null,e,t).then((function(t){e({type:"CHANGE_GROUPS",groups:t})})).catch((function(){}))}}function U(){return function(e,t){H("user/groups","get",null,e,t).then((function(t){e({type:"CHANGE_GROUPS",groups:t})})).catch((function(){}))}}function V(e){/MSIE|Trident/.test(window.navigator.userAgent)&&e({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"high",type:"bar",message:"Deze website ondersteunt Internet Explorer niet. Gebruik een moderne browser zoals Firefox of Chrome",sticky:!0,scope:""}})}function B(){return function(e,t){H("user/enrollments","get",null,e,t).then((function(n){e({type:"CHANGE_GROUPS",groups:n}),e({type:"CHANGE_ENROLLMENTS",userId:t().userId,enrollmentIds:Object.keys(n)})})).catch((function(){}))}}function W(){return function(e,t){H("user/list","get",null,e,t).then((function(t){e({type:"CHANGE_USERS",users:t})})).catch((function(){}))}}function Y(e){return{type:"ADD_NOTIFICATION",notification:e}}function J(e){return{type:"REMOVE_NOTIFICATION",notification:e}}function Z(e){return{type:"TOGGLE_MENU",menuState:e}}function $(e){return{type:"SET_SECURE_LOGIN",secureLogin:e}}function q(e,t){return function(n,r){return H("subject","put",{name:e,description:t},n,r).then((function(){n({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"low",type:"bar",message:"Vak aangemaakt, refresh om te zien",scope:"beheer"}})}))}}function K(e,t){return function(n,r){return H("course","put",{name:e,subjectId:t},n,r).then((function(){n({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"low",type:"bar",message:"Module aangemaakt, refresh om te zien",scope:"beheer"}})}))}}function Q(e,t){return function(n,r){return H("group","put",{courseId:e,mainTeacherId:t},n,r).then((function(){n({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"low",type:"bar",message:"Groep aangemaakt, refresh om te zien",scope:"beheer"}})}))}}function X(e,t,n){var r=new Date;r.setTime(r.getTime()+60*n*60*1e3);var a="expires="+r.toUTCString();document.cookie=e+"="+t+";"+a+";path=/"}function ee(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),r=0;r<n.length;r++){for(var a=n[r];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""}function te(){X("beforeLoginPath",window.location.pathname+window.location.search,24),document.location.href="/auth/login?secure=true"}var ne=n(846),re=n(389),ae=n(91),oe=n(1),se=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).state={},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.generateEmail.bind(this)(),this.interval=setInterval(this.generateEmail.bind(this),1500)}},{key:"generateEmail",value:function(){var e=this.state.school,t=this.state.schoolShort,n=this.state.studentNumber;switch(Math.floor(14*Math.random())){case 0:e="beekdallyceum",t="BD";break;case 1:e="candea",t="CC";break;case 2:e="quadraam",t="CB";break;case 3:e="lyceumelst",t="LE";break;case 4:e="liemerscollege",t="LC";break;case 5:e="lorentzlyceum",t="LL";break;case 6:e="maartenvanrossem",t="MvR";break;case 7:e="montessoriarnhem",t="MC";break;case 8:e="olympuscollege",t="OC";break;case 9:e="produsarnhem",t="PD";break;case 10:e="gymnasiumarnhem",t="SGA";break;case 11:e="symbion",t="SY";break;case 12:e="vmbo-venster",t="VE";break;case 13:default:e="hetwesteraam",t="HW"}for(var r=(n=Math.floor(999999*Math.random())+"").length;r<6;r++)n="0"+n;this.setState({school:e,schoolShort:t,studentNumber:n})}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"login",value:function(){document.location.href="/auth/login"}},{key:"generateColoredEmail",value:function(e,t,n){return Object(oe.jsxs)(ae.a,{variant:"subtitle1",style:{fontFamily:"'Courier New', Courier, monospace",overflow:"hidden"},children:[Object(oe.jsx)("span",{style:{color:C.palette.secondary.light,fontWeight:"bold"},children:e}),Object(oe.jsx)("span",{style:{color:C.palette.secondary.dark,fontWeight:"bolder"},children:t}),Object(oe.jsx)("span",{style:{fontWeight:"bold"},children:"@ll."}),Object(oe.jsx)("span",{style:{color:C.palette.secondary.light,fontWeight:"bold"},children:n}),Object(oe.jsx)("span",{style:{fontWeight:"bold"},children:".nl"})]})}},{key:"render",value:function(){return null!=this.props.userId?(this.props.history.push("/"),this.props.toggleMenu(!0)):this.props.toggleMenu(!1),Object(oe.jsx)(re.a,{elevation:8,className:"Login",style:{minHeight:"330px"},children:Object(oe.jsxs)("div",{style:{padding:"20px"},children:[Object(oe.jsx)(ae.a,{gutterBottom:!0,variant:"body1",color:"primary",children:"Log in"}),Object(oe.jsx)(ae.a,{variant:"subtitle1",children:"Gebruik je school-email om in te loggen:"}),Object(oe.jsx)("br",{}),Object(oe.jsx)("br",{}),Object(oe.jsxs)("center",{children:[this.generateColoredEmail("schoolafkorting","leerlingnummer","school"),this.generateColoredEmail(this.state.schoolShort,this.state.studentNumber,this.state.school)]}),Object(oe.jsx)("br",{}),Object(oe.jsx)("br",{}),Object(oe.jsx)(ne.a,{type:"submit",variant:"contained",size:"large",color:"primary",fullWidth:!0,onClick:this.login,children:"Login met je Microsoft school account"})]})})}}]),n}(r.Component);var ie=Object(S.h)(Object(y.b)((function(e){return{userId:e.userId}}),(function(e){return{login:function(t,n){e(Z(!0))},toggleMenu:function(t){e(Z(t))}}}))(se)),ce=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.className;return this.props.showMenu?e+=" menuShown":e+=" menuHidden",Object(oe.jsx)("div",{className:"Page "+e,children:this.props.children})}}]),n}(r.Component);var le=Object(y.b)((function(e){return{showMenu:e.showMenu}}))(ce),ue=n(847),pe=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).state={isShowing:!1},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.timeout=setTimeout((function(){return e.setState({isShowing:!0})}),200)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){return this.state.isShowing?Object(oe.jsx)(ue.a,Object(l.a)({},this.props)):null}}]),n}(r.Component),de=n(860),he=n(169),be=n.n(he),je=n(887),ge=n(848),fe=n(849),Oe=n(850),xe=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).getRemarkPage=function(){var e=r.props.group.remarks;return Object(oe.jsxs)(je.a,{open:!0,keepMounted:!0,children:[Object(oe.jsx)(ge.a,{children:"Opmerkingen"}),Object(oe.jsx)(fe.a,{children:Object(oe.jsx)(ae.a,{children:e})}),Object(oe.jsxs)(Oe.a,{children:[Object(oe.jsx)(ne.a,{color:"default",children:"Annuleren"}),Object(oe.jsx)(ne.a,{onClick:function(){r.props.preventPopupClose(!0),r.setState({page:"hasChosenDay"})},color:"primary",children:"Verder"})]})]})},r.state={},r}return Object(f.a)(n,[{key:"getDuplicatePage",value:function(){var e=this;return Object(oe.jsxs)(je.a,{open:!0,keepMounted:!0,children:[Object(oe.jsxs)(fe.a,{children:[Object(oe.jsx)(ae.a,{color:"error",style:{fontSize:"16px"},children:"Je hebt al een module gekozen voor "+this.props.group.day+"!"}),"Je hebt je op deze dag al voor de module\xa0",Object(oe.jsx)(ae.a,{color:"primary",variant:"button",children:this.props.chosenDayGroupName}),"\xa0ingeschreven. Wil je je ook voor\xa0",Object(oe.jsx)(ae.a,{color:"primary",variant:"button",children:this.props.group.courseName}),"\xa0inschrijven?"]}),Object(oe.jsxs)(Oe.a,{children:[Object(oe.jsx)(ne.a,{color:"primary",variant:"contained",onClick:function(){e.props.handlePopup(!0)},children:"Toch inschrijven"}),Object(oe.jsx)(ne.a,{color:"default",children:"Annuleren"})]})]})}},{key:"getCancelPage",value:function(){var e=this;return Object(oe.jsxs)(je.a,{open:!0,keepMounted:!0,children:[Object(oe.jsx)(ge.a,{children:"Uitschrijven"}),Object(oe.jsxs)(fe.a,{children:["Weet je zeker dat je wilt uitschrijven voor de module\xa0",Object(oe.jsx)(ae.a,{color:"primary",variant:"button",children:this.props.group.courseName})," ","\xa0?"]}),Object(oe.jsxs)(Oe.a,{children:[Object(oe.jsx)(ne.a,{color:"default",children:"Annuleren"}),Object(oe.jsxs)(ne.a,{onClick:function(){return e.props.handlePopup(!0)},color:"primary",children:["Uitschrijven",Object(oe.jsx)(be.a,{})]})]})]})}},{key:"getConfirmPage",value:function(){var e=this;return Object(oe.jsxs)(je.a,{open:!0,keepMounted:!0,children:[Object(oe.jsx)(ge.a,{children:"Inschrijven"}),Object(oe.jsxs)(fe.a,{children:["Weet je zeker dat je wilt inschrijven voor de module\xa0",Object(oe.jsx)(ae.a,{color:"primary",variant:"button",children:this.props.group.courseName}),"\xa0?"]}),Object(oe.jsxs)(Oe.a,{children:[Object(oe.jsx)(ne.a,{color:"default",children:"Annuleren"}),Object(oe.jsx)(ne.a,{onClick:function(){e.props.handlePopup(!0)},variant:"contained",color:"primary",children:"Inschrijven"})]})]})}},{key:"render",value:function(){this.props.preventPopupClose(!1);var e=this.state.page;return"cancel"===e?this.getCancelPage():"remarks"===e&&null!=this.props.group.remarks&&this.props.group.remarks.length>1?this.getRemarkPage():"hasChosenDay"===e&&this.props.hasChosenDay?this.getDuplicatePage():this.getConfirmPage()}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Object(l.a)({page:e.hasChosen?"cancel":"remarks"},t)}}]),n}(r.Component),ve=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).preventPopupClose=function(e){r.preventClose=e},r.handlePopup=function(e){e&&r.props.toggleEnrollment(r.props.group),r.preventClose||r.setState({dialogOpen:!r.state.dialogOpen})},r.props.getEnrolLments(),r.state={dialogOpen:!1},r}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=this.state.dialogOpen?Object(oe.jsx)(xe,{group:t.group,hasChosen:t.hasChosen,handlePopup:this.handlePopup,hasChosenDay:t.hasChosenDay,chosenDayGroupName:t.chosenDayGroupName,preventPopupClose:this.preventPopupClose}):null;return t.loading?Object(oe.jsx)(pe,{size:30}):t.hasChosen?Object(oe.jsxs)(ne.a,{color:"primary",onClick:function(){return e.handlePopup(!1)},style:t.style,children:["Ingeschreven",Object(oe.jsx)(be.a,{}),n]}):this.props.canChoose?Object(oe.jsxs)(ne.a,{color:"primary",variant:"contained",onClick:function(){return e.handlePopup(!1)},style:this.props.style,children:["Inschrijven"+(this.props.hasChosenDay?"*":""),n]}):t.group.period<this.props.enrollmentPeriod?Object(oe.jsxs)(ne.a,{disabled:!0,color:"primary",style:t.style,children:["Inschrijfperiode verlopen",n]}):Object(oe.jsxs)(ne.a,{disabled:!0,color:"primary",style:t.style,children:["Coming Soon",n]})}}]),n}(r.Component);var me=Object(y.b)((function(e,t){if(null==e.users[e.userId].enrollmentIds)return{loading:!0};var n=-1;return e.users[e.userId].enrollmentIds.forEach((function(r){var a=e.groups[r];a.day===t.group.day&&a.period===t.group.period&&(n=a.courseName)})),{canChoose:t.group.enrollable,hasChosen:-1!==e.users[e.userId].enrollmentIds.indexOf(t.group.id),hasChosenDay:-1!==n,chosenDayGroupName:n,enrollmentPeriod:e.enrollmentPeriod}}),(function(e){return{toggleEnrollment:function(t){return e(function(e){return function(t,n){-1===n().users[n().userId].enrollmentIds.indexOf(e.id)?H("user/enrollments","put",{groupId:e.id},t,n).then((function(){t({type:"CHANGE_ENROLLMENTS",action:"ADD",userId:n().userId,groupId:e.id})})):H("user/enrollments","delete",{groupId:e.id},t,n).then((function(){t({type:"CHANGE_ENROLLMENTS",action:"REMOVE",userId:n().userId,groupId:e.id})}))}}(t))},getEnrolLments:function(){return e(B())}}}))(ve),ye=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){if(!1!==this.props.active&&null==this.props.secureLogin){var e=Object(oe.jsxs)("div",{children:[Object(oe.jsx)(ae.a,{children:"Log opnieuw in om toegang te krijgen"}),Object(oe.jsx)(ne.a,{color:"primary",variant:"contained",onClick:te,children:"Inloggen"})]});return this.props.dense?e:Object(oe.jsx)(re.a,{style:{padding:"20px",marginTop:"25px"},children:e})}return this.props.children}}]),n}(r.Component);var ke=Object(y.b)((function(e){return{secureLogin:e.secureLogin}}),null)(ye),Ce=n(859),Se=n(891),Ie=n(851),we=n(888);function Ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[e];switch(t.type){case"phoneNumber":var r=/(^\+[0-9]{2}|^\+[0-9]{2}\(0\)|^\(\+[0-9]{2}\)\(0\)|^00[0-9]{2}|^0)([0-9]{9}$|[0-9\-\s]{10}$)/i;if(!r.test(e))return!1;break;case"email":var a=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/g;if(!a.test(e))return!1;break;case"integer":if(!/^\+?[1-9][\d]*$/i.test(e))return!1;break;case"float":if(isNaN(e))return!1;break;case"time":return/^\d\d:\d\d$/g.test(e);case"decimalGrade":if(null==e)return!1;var o=e.replace(/\./g,"_$comma$_").replace(/,/g,".").replace(/_\$comma\$_/g,",");if("ND"===o)return!0;if(isNaN(o))return!1}return!(t.min&&parseFloat(e)<t.min)&&(!(t.max&&parseFloat(e)>t.max)&&((!t.notEmpty||null!=e&&""!==e&&" "!==e&&-1!==n.indexOf(e))&&!(t.maxLength&&null!=e&&e.length>t.maxLength)))}var Ee=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.children,t=Object(l.a)({flex:"1"},this.props.style);return this.props.td?Object(oe.jsx)("td",{style:t,children:e}):Object(oe.jsx)("div",{style:t,children:e})}}]),n}(r.Component),Pe=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.value;null!=n&&""!==n||t.editable||!t.default||(n=t.default),null==n&&(n="");var r,a={InputProps:{},InputLabelProps:{},inputProps:{}};return a.error=!1!==t.editable&&!t.disabled&&!Ne(n,t.validate),a.disabled=t.disabled,a.value=n,a.label=t.label,a.variant=t.variant,a.multiline=t.multiline,a.fullWidth=!0,a.onChange=function(t){return e.props.onChange(t.target.value)},a.InputProps.disableUnderline=!1===t.editable,a.InputLabelProps.disabled=!0,t.unit&&(a.InputProps.endAdornment=Object(oe.jsx)(Ie.a,{position:"end",children:t.unit})),!1===t.editable&&(a.inputProps.readOnly="readonly"),r=!1===this.props.editable&&this.props.typograpyProps?Object(oe.jsx)(ae.a,Object(l.a)(Object(l.a)({},this.props.typograpyProps),{},{children:this.props.value})):Object(oe.jsx)(we.a,Object(l.a)({},a)),Object(oe.jsx)(Ee,Object(l.a)(Object(l.a)({},t),{},{children:r}))}}]),n}(r.Component),Ae=n(856),De=n(858),Ge=n(854),Le=n(890),Te=n(881),Me=n(885),Fe=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).renderValue=function(e){return(r.props.multiple?e:[e]).map((function(t){var n=r.state.options.filter((function(e){return e.value===t}));return n.length>0?n[0].category?Object(oe.jsxs)("div",{children:[Object(oe.jsx)(ae.a,Object(l.a)(Object(l.a)({},r.props.typograpyProps),{},{variant:"subtitle2",children:n[0].category})),Object(oe.jsx)(ae.a,Object(l.a)(Object(l.a)({},r.props.typograpyProps),{},{children:n[0].label}))]},n[0].value):n[0].label:e}))},r.getOptionsLabel=function(e){return(r.props.multiple?e:[e]).map((function(e){var t=r.state.options.filter((function(t){return t.value===e}));return t.length>0?(t[0].category,t[0].label):""})).join(", ")},r.getCategoryOf=function(e){return r.state.options.find((function(t){return t.value===e})).category},r.getAutocomplete=function(){return Object(oe.jsx)(Me.a,{value:r.state.value,disabled:r.props.disabled,freeSolo:r.props.freeSolo,autoSelect:!0,groupBy:r.getCategoryOf,options:r.state.options.map((function(e){e.label;return e.value})),getOptionLabel:r.getOptionsLabel,onChange:function(e,t){return r.props.onChange(t)},renderInput:function(e){return Object(oe.jsx)(we.a,Object(l.a)(Object(l.a)({},e),{},{label:r.props.label,variant:"outlined"}))}})},r.getCurtain=function(){return Object(oe.jsx)("div",{style:{width:"100%",height:"100%",position:"absolute",zIndex:10}})},r.renderMenuItems=function(){return null==r.props.children?r.state.options.reduce((function(e,t){var n=e[e.length-1];return null!=t.category&&null==n||null!=n&&n.category!==t.category?e.concat([{sep:!0,category:t.category,value:t.value},t]):e.concat([t])}),[]).map((function(e){var t=e.sep,n=e.label,r=e.value,a=e.category;return t?Object(oe.jsx)(Ae.a,{children:a},r+"_category"):Object(oe.jsx)(De.a,{value:r,children:n},r)})):r.props.children},r.getDropdown=function(){var e={};return!1===r.props.editable&&(e.disableUnderline=!0,e.IconComponent="div"),Object(oe.jsxs)(Ge.a,{fullWidth:!0,children:[r.props.label&&Object(oe.jsx)(Le.a,{disabled:!0,children:r.props.label}),Object(oe.jsx)(Te.a,Object(l.a)(Object(l.a)({multiple:r.props.multiple,fullWidth:!0,disabled:r.props.disabled,value:r.state.value,onChange:function(e){return r.props.onChange(e.target.value)}},e),{},{renderValue:function(e){return r.renderValue(e)},children:r.renderMenuItems()})),!1===r.props.editable&&r.getCurtain()]})},r.state={},r}return Object(f.a)(n,[{key:"render",value:function(){var e;return e=this.state.options.length>10&&!this.props.multiple&&this.props.editable?this.getAutocomplete():this.getDropdown(),Object(oe.jsx)(Ee,Object(l.a)(Object(l.a)({},this.props),{},{children:e}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=n.getNormalizedOptions(e.options);return!(r.filter((function(t){return t.value===e.value})).length>0)&&e.freeSolo&&r.push({label:e.value,value:e.value}),Object(l.a)(Object(l.a)({},t),{},{options:r,value:e.value||""})}}]),n}(r.Component);Fe.getNormalizedOptions=function(e){return e.length>0&&null==e[0].value&&(e=e.map((function(e){return{label:e,value:e}}))),e};var He=Fe,Re=[{label:"Gehaald",value:"passed"},{label:"Niet gehaald",value:"failed"},{label:"Niet deelgenomen",value:"ND"}],_e=[{label:"Onvoldoende",value:"O"},{label:"Voldoende",value:"V"},{label:"Goed",value:"G"},{label:"Niet deelgenomen",value:"ND"}],ze=[{label:"vink",value:"check",options:Re},{label:"trapsgewijs",value:"stepwise",options:_e},{label:"cijfer",value:"decimal",options:"decimal"}];function Ue(e){if("ND"===e.assesment||null==e.assesment)return"#673ab7";switch(e.type){case"stepwise":return"#3f51b5";case"check":return"#009688";case"decimal":return"#00bcd4";default:return"#673ab7"}}function Ve(e){var t=e.assesment,n=e.type;if("ND"===(t+"").toUpperCase())return"ND";switch(n){case"decimal":return(parseFloat((t+"").replace(",",".")).toFixed(1)+"").replace(".",",");case"stepwise":return _e.filter((function(e){e.label;return e.value===t}))[0].label;case"check":return Re.filter((function(e){e.label;return e.value===t}))[0].label;default:return"---"}}function Be(e){if(null!=e){var t=e.assesment+"";switch(e.type){case"decimal":return parseFloat(t.replace(/,/g,"."))>=6;case"stepwise":return"G"===t||"V"===t;case"check":return"passed"===t;default:return!1}}return!1}var We=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.evaluation;return"decimal"===e.type?Object(oe.jsx)(Pe,{validate:{min:1,max:10,type:"decimalGrade",notEmpty:!0},td:!0,name:e.userId,value:e.assesment?e.assesment:"",editable:this.props.editable,onChange:this.props.onChange}):Object(oe.jsx)(He,{name:e.userId,td:!0,value:e.assesment?e.assesment:"",options:ze.filter((function(t){return t.value===e.type}))[0].options,editable:this.props.editable,onChange:this.props.onChange})}}]),n}(r.Component),Ye=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=Ve(this.props.evaluation);return Object(oe.jsx)(ae.a,{variant:"h6",style:{color:"white"},children:e})}}]),n}(r.Component),Je=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).onSortChange=function(e){r.setState({sortValue:e,sortDirection:"desc"===r.state.sortDirection&&r.state.sortValue===e?"asc":"desc"})},r.handleSingleChange=function(e){var t=r.props.evaluations.map((function(t){return t.userId===e.userId?e:Object(l.a)({},t)}));r.props.handleChange(t)},r.sortEvaluations=function(){var e=r.props.evaluations,t=r.state.sortValue,n="asc"===r.state.sortDirection?"asc":"desc";return"name"===t?e.sort((function(e,t){var r=t.displayName<e.displayName;return"asc"===n?r:-r})):"evaluations"===t&&e.sort((function(e,t){e=e.assesment;var r=(null===(t=t.assesment))-(null==e)||+(e>t)||-(e<t);return"asc"===n?r:-r})),e},r.state={sortValue:"",sortDirection:""},r}return Object(f.a)(n,[{key:"handleEvaluationTypeChange",value:function(e){for(var t=[],n=0;n<this.props.evaluations.length;n++)t.push(Object(l.a)(Object(l.a)({},this.props.evaluations[n]),{},{type:e})),this.props.handleChange(t)}},{key:"render",value:function(){var e=this,t=this.state.sortValue,n="asc"===this.state.sortDirection?"asc":"desc",r={marginTop:"10px",alignItems:"center",paddingRight:"15px",paddingLeft:"15px",display:"flex"},a=this.props.evaluations;if(0===a.length)return"Er zijn nog geen beoordelingen beschikbaar";var o=this.sortEvaluations().map((function(t){return Object(oe.jsxs)(re.a,{style:r,component:"tr",children:[Object(oe.jsx)("td",{style:{flex:"1"},children:Object(oe.jsx)(ae.a,{variant:"h6",color:"primary",children:t.displayName})}),Object(oe.jsx)(We,{editable:e.props.editable,evaluation:t,onChange:function(n){return e.handleSingleChange(Object(l.a)(Object(l.a)({},t),{},{assesment:n}))}}),Object(oe.jsx)(Pe,{td:!0,label:"Uitleg",name:t.userId,value:t.explanation,editable:e.props.editable,onChange:function(n){return e.handleSingleChange(Object(l.a)(Object(l.a)({},t),{},{explanation:n}))},multiline:!0,style:{flex:"2"}})]},t.userId)}));return Object(oe.jsx)(ke,{active:this.props.editable,children:Object(oe.jsx)("table",{style:{width:"100%"},children:Object(oe.jsxs)("tbody",{children:[Object(oe.jsxs)(re.a,{style:Object(l.a)(Object(l.a)({},r),{},{backgroundColor:"#e0e0e0"}),component:"tr",children:[Object(oe.jsxs)("td",{style:{paddingLeft:"15px"},children:[Object(oe.jsx)(ae.a,{type:"title",color:"primary",style:{padding:"5px 0"},children:Object(oe.jsx)(Ce.a,{title:"Sorteer",enterDelay:300,placement:"bottom-start",children:Object(oe.jsx)(Se.a,{active:"evaluations"===t,onClick:function(){return e.onSortChange("evaluations")},direction:n,style:{color:"inherit",fontSize:"1.5rem"},children:"Beoordelingen"})})}),Object(oe.jsx)("div",{children:Object(oe.jsx)(Ce.a,{title:"Sorteer",enterDelay:300,placement:"bottom-start",children:Object(oe.jsx)(Se.a,{active:"name"===t,onClick:function(){return e.onSortChange("name")},direction:n,children:"Naam"})})})]}),Object(oe.jsx)("td",{style:{flex:"5"}}),Object(oe.jsx)("td",{style:{flex:"2"},children:Object(oe.jsx)(He,{label:"Beoordelingsformaat",value:a[0].type,options:ze,editable:this.props.editable,onChange:this.handleEvaluationTypeChange.bind(this)})})]}),o]})})})}}]),n}(r.Component),Ze=(n(503),function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).state={hover:!1},r}return Object(f.a)(n,[{key:"expand",value:function(){this.props.history.push("/groep/"+this.props.group.id)}},{key:"getBottomSection",value:function(e){return e?Object(oe.jsxs)("div",{className:"footer",style:{backgroundColor:Ue(this.props.group.evaluation)},children:[Object(oe.jsx)(ae.a,{variant:"h6",style:{color:"white"},children:"Beoordeling"}),Object(oe.jsx)(Ye,{evaluation:this.props.group.evaluation})]}):Object(oe.jsxs)("div",{className:"footer",children:[Object(oe.jsx)(ne.a,{color:"secondary",onClick:this.expand.bind(this),children:"Bekijken"}),"student"===this.props.role&&Object(oe.jsx)(me,{group:this.props.group})]})}},{key:"render",value:function(){var e=this,t=this.props.group,n=this.props.group.evaluation&&""!==this.props.group.evaluation.assesment&&null!==this.props.group.evaluation.assesment;return Object(oe.jsx)("div",{className:"GroupCard",children:Object(oe.jsx)(re.a,{elevation:this.state.hover?4:2,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})},children:Object(oe.jsx)(de.a,{color:"secondary",invisible:this.props.schoolYear===t.schoolYear,badgeContent:t.schoolYear,children:Object(oe.jsxs)("div",{className:"GroupCardInside",children:[Object(oe.jsx)(ae.a,{variant:"caption",color:"primary",style:{overflow:"hidden",maxHeight:"65px",cursor:"pointer"},onClick:function(){e.props.history.push("/groep/"+t.id)},children:t.subjectName+" - #M"+(t.courseId+"").padStart(4,"0")}),Object(oe.jsx)(ae.a,{variant:"h1",style:{overflow:"hidden",height:"64px",cursor:"pointer",textTransform:"uppercase",fontSize:"24px"},onClick:function(){e.props.history.push("/groep/"+t.id)},children:t.courseName}),Object(oe.jsxs)("div",{children:[Object(oe.jsx)(ae.a,{style:{display:"inline-block",fontWeight:"bold",float:"right"},children:"Blok "+t.period+" - "+t.day}),Object(oe.jsx)(ae.a,{style:{display:"inline-block",fontWeight:"bold"},children:t.enrollableFor||"Iedereen"})]}),n?Object(oe.jsxs)(ae.a,{style:{maxHeight:"164px",overflow:"hidden"},gutterBottom:!0,children:[Object(oe.jsx)("b",{children:"Uitleg beoordeling: "}),t.evaluation.explanation]}):Object(oe.jsx)(ae.a,{style:{maxHeight:"164px",overflow:"hidden"},gutterBottom:!0,children:t.courseDescription}),this.getBottomSection(n)]})})})})}}]),n}(r.Component)),$e=Object(S.h)(Ze),qe=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).createRow=function(t){var n=M()(e.props.lessons,(function(n,r){var a=P()(e.props.presence,(function(e){return e.lessonId===n.id&&e.userId===t}));return 1===a.length?e.createPresenceComponent(a[0],r):e.createPresenceComponent({id:Math.floor(1e5*-Math.random()),lessonId:n.id,userId:t,status:"present"},r)}));return Object(oe.jsxs)(re.a,{component:"tr",elevation:1,children:[Object(oe.jsx)(ae.a,{color:"primary",component:"td",children:e.props.users[t].displayName}),n]},"p"+t)},e.createLessonHeader=function(t){var n=M()(e.props.lessons,(function(e){return Object(oe.jsx)(ae.a,{component:"td",color:"primary",children:"Les "+e.numberInBlock},e.id)}));return Object(oe.jsxs)(re.a,{component:"tr",elevation:2,style:{backgroundColor:"#e0e0e0"},children:[Object(oe.jsx)(ae.a,{component:"td"}),n]},"l"+t)},e}return Object(f.a)(n,[{key:"createPresenceComponent",value:function(e,t){var n=this,r=[{label:"Actief",value:"present"},{label:"Niet actief",value:"absent"}];return this.props.editable||"absent"!==e.userStatus||(r[0].label="Afgemeld",r[1].label="Afgemeld"),Object(oe.jsx)(He,{value:e.status,options:r,label:"absent"===e.userStatus?"afgemeld":void 0,td:!0,editable:this.props.editable,onChange:function(t){n.props.handleChange(Object(l.a)(Object(l.a)({},e),{},{status:t}))}},t)}},{key:"render",value:function(){var e=this.props.participantIds.map(this.createRow);return e.unshift(this.createLessonHeader()),Object(oe.jsx)("table",{style:{width:"100%"},children:Object(oe.jsx)("tbody",{children:e})})}}]),n}(r.Component);var Ke=Object(y.b)((function(e,t){return Object(l.a)({users:e.users},t)}))(qe),Qe=(n(504),{role:{student:{level:["Praktijkschool","ISK","n.v.t.","Jan Ligthart","OPUS","MAVO","VMBO","HAVO","VWO","AGORA"]},teacher:{level:["-"],profile:["n.v.t."],year:["n.v.t."]},admin:{level:["-"],profile:["n.v.t."],year:["n.v.t."]},grade_admin:{level:["-"],profile:["n.v.t."],year:["n.v.t."]}},school:{"Beekdal Lyceum":{level:["HAVO","VWO","-"],schoolLocation:["Bernhardlaan 49, Arnhem"]},"Candea College":{level:["VMBO","MAVO","HAVO","VWO","-"],schoolLocation:["Eltensestraat 8, Duiven","Saturnus 1, Duiven"]},"Centraal Bureau":{level:["n.v.t.","-"],schoolLocation:["Saturnus 5, Duiven"],profile:["n.v.t."],year:["n.v.t."]},"Lyceum Elst":{level:["MAVO","HAVO","VWO","-"],schoolLocation:["Auditorium 3, Elst"]},"Liemers College":{level:["VMBO","MAVO","HAVO","VWO","-"],schoolLocation:["Dijksestraat 12, Didam","Stationspoort 36, Zevenaar","Heerenm\xe4ten 6, Zevenaar","Zonegge (AGORA) 07-09, Zevenaar","Zonegge 07-09, Zevenaar"]},"Lorentz Lyceum":{level:["HAVO","VWO","OPUS","n.v.t.","-"],schoolLocation:["Metamorfosenallee 100, Arnhem"]},"Maarten van Rossem":{level:["VMBO","-"],schoolLocation:["Groningensingel 1235, Arnhem"]},"Montessori College Arnhem":{level:["MAVO","HAVO","VWO","-"],schoolLocation:["Utrechtseweg 174, Arnhem"]},"Olympus College":{level:["Jan Ligthart","MAVO","HAVO","VWO","-"],schoolLocation:["Olympus 11, Arnhem"]},"Produs Praktijkonderwijs":{level:["Praktijkschool","-"],schoolLocation:["Leidenweg 60, Arnhem"]},"Stedelijk Gymnasium Arnhem":{level:["VWO","-"],schoolLocation:["Thorbeckestraat 17, Arnhem"]},Symbion:{level:["Praktijkschool","-"],schoolLocation:["Hoge Witteveld 2, Didam"]},"Vmbo 't Venster":{level:["ISK","VMBO","MAVO","-"],schoolLocation:["Thomas a Kempislaan 82, Arnhem"]},"Het Westeraam":{level:["VMBO","-"],schoolLocation:["Auditorium 6, Elst"]}},level:{"-":{},Praktijkschool:{year:["1","2","3","4","5","6"],profile:["n.v.t."]},ISK:{year:["n.v.t."],profile:["n.v.t."]},VMBO:{year:["1","2","3","4"],profile:["Bouwen, wonen en interieur","Dienstverlening en producten","Economie en ondernemen","Groen","Horeca, bakkerij en recreatie","Maritiem en techniek","Media, vormgeving en ICT","Mobiliteit en transport","Produceren, installeren en energie","Zorg en welzijn","n.v.t."]},MAVO:{year:["1","2","3","4"],profile:["Economie","Landbouw (Groen)","Techniek","Zorg en welzijn","n.v.t."]},HAVO:{year:["1","2","3","4","5"],profile:["Cultuur en Maatschappij","Economie en Maatschappij","Natuur en Gezondheid","Natuur en Techniek","Natuur en Techniek & Natuur en Gezondheid","Cultuur en Maatschappij & Economie en Maatschappij","n.v.t."]},VWO:{year:["1","2","3","4","5","6"],profile:["Cultuur en Maatschappij","Economie en Maatschappij","Natuur en Gezondheid","Natuur en Techniek","Natuur en Techniek & Natuur en Gezondheid","Cultuur en Maatschappij & Economie en Maatschappij","n.v.t."]},"Jan Ligthart":{year:["1"],profile:["n.v.t."]},AGORA:{},OPUS:{year:["1","2","3","4","5","6"],profile:["Cultuur en Maatschappij","Economie en Maatschappij","Natuur en Gezondheid","Natuur en Techniek","Natuur en Techniek & Natuur en Gezondheid","Cultuur en Maatschappij & Economie en Maatschappij","n.v.t."]},"n.v.t.":{year:["n.v.t."],profile:["n.v.t."]}},profile:{"Bouwen, wonen en interieur":{},"Dienstverlening en producten":{},"Economie en ondernemen":{},Groen:{},"Horeca, bakkerij en recreatie":{},"Maritiem en techniek":{},"Media, vormgeving en ICT":{},"Mobiliteit en transport":{},"Produceren, installeren en energie":{},Economie:{},"Landbouw (Groen)":{},Techniek:{},"Zorg en welzijn":{},"Cultuur en Maatschappij":{year:["4","5","6"]},"Economie en Maatschappij":{year:["4","5","6"]},"Natuur en Gezondheid":{year:["4","5","6"]},"Natuur en Techniek":{year:["4","5","6"]},"Natuur en Techniek & Natuur en Gezondheid":{year:["4","5","6"]},"Cultuur en Maatschappij & Economie en Maatschappij":{year:["4","5","6"]},"n.v.t.":{}},schoolLocation:{"Leidenweg 60, Arnhem":{},"Hoge Witteveld 2, Didam":{},"Thomas a Kempislaan 82, Arnhem":{},"Groningensingel 1235, Arnhem":{},"Auditorium 6, Elst":{},"Dijksestraat 12, Didam":{},"Stationspoort 36, Zevenaar":{},"Heerenm\xe4ten 6, Zevenaar":{},"Zonegge (AGORA) 07-09, Zevenaar":{},"Zonegge 07-09, Zevenaar":{},"Eltensestraat 8, Duiven":{level:["VMBO","MAVO"]},"Saturnus 1, Duiven":{level:["HAVO","VWO"]},"Thorbeckestraat 17, Arnhem":{},"Auditorium 3, Elst":{},"Utrechtseweg 174, Arnhem":{},"Olympus 11, Arnhem":{},"Metamorfosenallee 100, Arnhem":{},"Bernhardlaan 49, Arnhem":{},"Saturnus 5, Duiven":{}},year:{"n.v.t.":{},1:{profile:["n.v.t."]},2:{profile:["n.v.t."]},3:{},4:{},5:{},6:{}}});function Xe(e){return e.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{[t]:{}})}),{})}for(var et in Qe)for(var tt in Qe[et])for(var nt in Qe[et][tt])Qe[et][tt][nt]=Xe(Qe[et][tt][nt]);var rt=function(e){var t={};for(var n in e)t[n]=Xe(Object.keys(e[n]));return t}(Qe);for(var at in Qe)for(var ot in Qe[at])Qe[at][ot]=Object(l.a)(Object(l.a)({},rt),Qe[at][ot]);var st=Qe,it=n(79),ct=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).handleChange=function(e,t){r.props.handleChange(Object(l.a)(Object(l.a)({},r.props.lesson),{},{[e]:t}))},r.state={hover:!1},r}return Object(f.a)(n,[{key:"getWeekdayString",value:function(e){return["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"][e]}},{key:"render",value:function(){var e=this,t=this.props.lesson,n="niet van toepassing";if(t.date){var r=new Date(t.date);n="".concat(this.getWeekdayString(r.getDay())," ").concat(r.getDate(),"-").concat(r.getMonth()+1,"-").concat(r.getFullYear())}var a=Object(it.flatten)(Object(it.map)(st.school,(function(e,t){var n=e.schoolLocation;return Object.keys(n).map((function(e){return{value:e,label:e,category:t}}))})));return Object(oe.jsxs)(re.a,{elevation:this.state.hover?2:1,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})},component:"tr",className:"Lesson",children:[Object(oe.jsxs)("td",{children:[Object(oe.jsxs)("div",{children:[Object(oe.jsx)(ae.a,{color:"primary",variant:"button",children:"Les "+t.numberInBlock}),Object(oe.jsx)(ae.a,{color:"textSecondary",variant:"body1",children:n})]}),Object(oe.jsxs)("div",{className:"LocationRoom",children:[Object(oe.jsx)(He,{label:"Locatie",value:t.location,editable:this.props.editable,freeSolo:!0,options:a,onChange:function(t){return e.handleChange("location",t)}}),Object(oe.jsx)(Pe,{label:"Lokaal",value:t.room,editable:this.props.editable,onChange:function(t){return e.handleChange("room",t)}})]})]}),Object(oe.jsx)(Pe,{label:"Onderwerp",value:t.subject,editable:this.props.editable,multiline:!0,onChange:function(t){return e.handleChange("subject",t)},td:!0}),Object(oe.jsx)(Pe,{label:"Activiteiten",value:t.activities,editable:this.props.editable,multiline:!0,onChange:function(t){return e.handleChange("activities",t)},td:!0}),Object(oe.jsxs)("td",{style:{display:"flex",flexDirection:"column",verticleAlign:"top"},children:[Object(oe.jsx)(He,{label:"Soort les",value:t.kind,editable:this.props.editable,options:[{value:"fysiek",label:"Fysiek",category:"Centrale bijeenkomst"},{value:"online",label:"Online",category:"Centrale bijeenkomst"},{value:"hybride",label:"Hybride",category:"Centrale bijeenkomst"},{value:"groepswerk",label:"Groepswerk",category:"Geen centrale bijeenkomst"},{value:"zelfstudie",label:"Zelfstudie",category:"Geen centrale bijeenkomst"}],onChange:function(t){return e.handleChange("kind",t)}}),Object(oe.jsx)(He,{label:"Aanwezigheid",value:t.presence,editable:this.props.editable,onChange:function(t){return e.handleChange("presence",t)},options:[{label:"Sterk aanbevolen",value:"required"},{label:"Eigen keuze",value:"optional"}]})]})]})}}]),n}(r.Component);var lt=Object(y.b)(null,(function(e){return{setPresenceUserStatus:function(t,n,r){return e(function(e,t,n){return function(r,a){r({type:"CHANGE_PRESENCE_USER_STATUS",lessonId:e,userStatus:t,groupId:n}),H("group/userStatus","patch",{lessonId:e,userStatus:t},r,a)}}(t,n,r))}}}))(ct),ut=n(861),pt=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).state={hover:!1,style:{width:"100%",height:"auto",margin:"0px",padding:"10px"}},r}return Object(f.a)(n,[{key:"formatPhoneNumber",value:function(e){null==e&&(e="");var t=e.replace(/\D/g,"");if(10===t.length)return"6"===t[1]?t.substr(0,2)+" "+t.substr(2,8):t.substr(0,3)+" "+t.substr(3,7);var n=/(0031|31)0?(6)?([0-9]+)$/gm.exec(t);return n?n[2]?"+31 06 "+n[3]:"+31 "+n[3]:e}},{key:"render",value:function(){var e=this,t=Object(l.a)({},this.props.user),n=Object(l.a)({},this.state.style),r=t.preferedEmail||t.phoneNumber||t.email;return Object(oe.jsx)("tr",{children:Object(oe.jsxs)(re.a,{elevation:this.state.hover?2:1,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})},component:"td",style:n,children:[Object(oe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(oe.jsx)(ae.a,{variant:"button",color:"teacher"===t.role?"secondary":"primary",style:{flex:1},children:Object(oe.jsx)(ut.a,{href:"/gebruiker/".concat(t.id),onClick:function(n){n.preventDefault(),e.props.history.push("/gebruiker/".concat(t.id))},children:t.displayName})}),Object(oe.jsx)(ae.a,{variant:"subtitle1",style:{flex:1},children:t.school}),Object(oe.jsx)(ae.a,{variant:"body1",style:{flex:1},children:t.role}),Object(oe.jsx)(ae.a,{variant:"body1",style:{flex:1},children:t.id})]}),r?Object(oe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(oe.jsx)(ae.a,{variant:"body1",style:{flex:1},children:t.preferedEmail}),Object(oe.jsx)(ae.a,{variant:"body1",style:{flex:1},children:t.level+" - "+t.year}),Object(oe.jsx)(ae.a,{variant:"body1",style:{flex:1},children:t.profile}),Object(oe.jsx)(ae.a,{variant:"body1",style:{flex:1},children:this.formatPhoneNumber(t.phoneNumber)})]}):null,this.props.children]})},t.id)}}]),n}(r.Component);var dt=Object(S.h)(Object(y.b)((function(e,t){var n=t.userId,r=t.children;return{role:e.role,user:e.users[n],userId:n,children:r}}),(function(e){return{}}))(pt)),ht=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).onSortChange=function(e){r.setState({sortValue:e,sortDirection:"desc"===r.state.sortDirection&&r.state.sortValue===e?"asc":"desc"})},r.getHeader=function(){var e="admin"===r.props.role;return Object(oe.jsx)("tr",{children:Object(oe.jsxs)(re.a,{elevation:r.state.hover?2:1,onMouseEnter:function(){return r.setState({hover:!0})},onMouseLeave:function(){return r.setState({hover:!1})},component:"td",style:{width:"100%",height:"auto",margin:"0px",padding:"10px",backgroundColor:"#e0e0e0"},children:[Object(oe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.headerTitle("button","name","Naam"),r.headerTitle("subtitle1","school","School"),r.headerTitle("body1","role","Rol"),r.headerTitle("body1","id","Gebruikers ID")]}),e?Object(oe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.headerTitle("body1","preferedEmail","Voorkeurs email"),r.headerTitle("body1","levelAndYear","Niveau - Leerjaar"),r.headerTitle("body1","profile","Profiel"),r.headerTitle("body1","phoneNumber","Telefoonnummer")]}):null]})},"header")},r.getFilters=function(){return Object(oe.jsx)(Pe,{variant:"outlined",value:r.state.filter,td:!0,label:"Zoek",onChange:function(e){return r.setState({filter:e})}})},r.sortAndFilterIds=function(){var e=r.state.sortValue,t=r.state.sortDirection,n=r.props.users;return r.props.userIds.filter((function(e){if(null==n[e])return!1;var t=(n[e].displayName+"").toLowerCase(),a=r.state.filter.toLowerCase();return t.includes(a)})).sort((function(r,a){switch(e){case"name":r=n[r].displayName,a=n[a].displayName;break;case"levelAndYear":r=(n[r].level+n[r].year).toString(),a=(n[a].level+n[a].year).toString();break;default:r=n[r][e],a=n[a][e]}var o=(null==a)-(null==r)||+(r>a)||-(r<a);return"asc"===t?o:-o}))},r.state={hover:!1,filter:"",sortValue:"",sortDirection:""},r}return Object(f.a)(n,[{key:"headerTitle",value:function(e,t,n){var r=this,a=this.state.sortValue,o="asc"===this.state.sortDirection?"asc":"desc";return Object(oe.jsx)(ae.a,{variant:e,color:"button"===e?"primary":"initial",style:{flex:1},children:Object(oe.jsx)(Ce.a,{title:"Sorteer",enterDelay:300,placement:"bottom-start",children:Object(oe.jsx)(Se.a,{active:a===t,direction:o,onClick:function(){return r.onSortChange(t)},style:{color:"inherit"},children:n})})})}},{key:"render",value:function(){var e=this,t=this.getHeader(),n=this.sortAndFilterIds().map((function(t){return Object(oe.jsx)(dt,{userId:t,actions:e.props.actions},t)})),r=this.props.userIds.length>50?this.getFilters():null;return Object(oe.jsx)("table",{style:{width:"100%"},children:Object(oe.jsxs)("tbody",{children:[t,Object(oe.jsx)("tr",{children:r}),n]})})}}]),n}(r.Component);var bt=Object(y.b)((function(e,t){return{users:e.users,role:e.role,userIds:t.userIds}}))(ht),jt=n(863),gt=n(882),ft=n(864),Ot=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e="Weet je zeker dat je de pagina wilt verlaten? Er zijn nog niet-opgeslagen gegevens!";return this.props.giveWarning?window.onbeforeunload=function(t){return t.returnValue=e,e}:window.onbeforeunload=null,Object(oe.jsx)(S.a,{when:this.props.giveWarning,message:function(t){return e}})}}]),n}(r.Component),xt=n(862),vt=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).handleClickAway=function(){r.setState({anchorEl:null})},r.showTeacherCard=function(e){r.setState({anchorEl:e.currentTarget})},r.state={},r}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.editable,t=this.props.role,n=this.props.onChange,r=this.props.group,a="#M"+(this.props.group.courseId+"").padStart(4,"0");return Object(oe.jsxs)("div",{style:{position:"relative"},children:[Object(oe.jsxs)("div",{style:{display:"flex"},children:[Object(oe.jsx)(Pe,{value:r.courseName,onChange:function(e){return n("courseName",e)},editable:e,style:{flex:"5"},validate:{maxLength:50},typograpyProps:{variant:"h5",color:"primary"}}),Object(oe.jsx)(He,{value:r.subjectId,onChange:function(e){return n("subjectId",e)},editable:e,typograpyProps:{variant:"h5",color:"primary"},options:M()(this.props.subjects,(function(e){return{value:e.id,label:e.name}}))})]}),Object(oe.jsxs)("div",{style:{display:"flex"},className:"ColumnFlexDirectionOnMobile",children:[Object(oe.jsxs)("div",{style:{width:"30%",paddingRight:"15px",display:"flex",flexDirection:"column"},children:[Object(oe.jsxs)("div",{style:{display:"flex"},children:[Object(oe.jsx)(He,{value:r.period,onChange:function(e){return n("period",e)},editable:e&&"admin"===t,style:{flex:1},options:[{label:"Blok 1",value:1},{label:"Blok 2",value:2},{label:"Blok 3",value:3},{label:"Blok 4",value:4}]}),Object(oe.jsx)(He,{value:r.day,onChange:function(e){return n("day",e)},editable:e&&"admin"===t,style:{flex:1},options:["onbekend","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag","zondag","niet van toepassing"]}),Object(oe.jsx)(He,{value:r.schoolYear,editable:e&&"admin"===t,style:{flex:1},onChange:function(e){return n("schoolYear",e)},options:this.props.possibleYears})]}),Object(oe.jsx)(xt.a,{style:{margin:"15px"}}),Object(oe.jsx)(Pe,{value:r.enrollableFor,label:"Doelgroep",onChange:function(e){return n("enrollableFor",e)},default:"Iedereen",editable:e}),Object(oe.jsx)(Pe,{value:r.studyTime,label:"Studietijd",onChange:function(e){return n("studyTime",e)},default:"onbekend",editable:e,style:{width:"40%"},unit:"uur",validate:{type:"integer"}}),Object(oe.jsx)(Pe,{value:a,label:"Modulecode",editable:!1}),Object(oe.jsx)(Pe,{value:r.teacherName,editable:!1,label:"Hoofddocent"})]}),Object(oe.jsxs)("div",{style:{width:"100%"},children:[Object(oe.jsx)(Pe,{value:r.courseDescription,validate:{maxLength:440},label:"Omschrijving",onChange:function(e){return n("courseDescription",e)},multiline:!0,editable:e}),Object(oe.jsx)(Pe,{value:r.remarks,label:"Opmerkingen",onChange:function(e){return n("remarks",e)},default:"Geen voorkennis vereist",multiline:!0,editable:e}),Object(oe.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(oe.jsx)(Pe,{value:r.startTime,label:"Starttijd",onChange:function(e){return n("startTime",e)},default:"--:--",validate:{type:"time"},editable:e,style:{flex:"0.1 1 0%"}}),Object(oe.jsx)(Pe,{value:r.endTime,label:"Eindtijd",validate:{type:"time"},onChange:function(e){return n("endTime",e)},default:"--:--",editable:e,style:{flex:"0.1 1 0%"}})]})]})]}),Object(oe.jsx)("br",{})]})}}]),n}(r.Component),mt=n(40),yt=n.n(mt),kt=n(6),Ct={colorPrimary:{backgroundColor:C.palette.primary.main},colorSecondary:{backgroundColor:"#ff8c00"},colorError:{backgroundColor:C.palette.error.main}},St=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){for(var e=this.props.notifications,t=this.props.classes,n="primary",r=e.length>0?e[0].message:"",a=0;a<e.length;a++)if("medium"===e[a].priority||"high"===e[a].priority){n="secondary",r=e[a].message;for(var o=a;o<e.length;o++)if("high"===e[o].priority){n="error",r=e[o].message;break}break}return Object(oe.jsx)(Ce.a,{title:r,children:Object(oe.jsx)(de.a,{badgeContent:e.length,classes:t,color:n,children:this.props.children})})}}]),n}(r.Component);var It=Object(kt.a)(Ct)(Object(y.b)((function(e,t){return{notifications:e.notifications.filter((function(e){try{return"badge"===e.type&&RegExp(e.scope).test(t.scope)}catch(n){return!0}}))}}),null)(St)),wt=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.props.getAllUsers()}},{key:"render",value:function(){var e=M()(this.props.users,(function(e){return{label:e.displayName,value:e.id}}));return Object(oe.jsx)(He,{label:"Gebruiker",options:e,value:this.props.value,editable:!0,onChange:this.props.onChange})}}]),n}(r.Component);var Nt=Object(y.b)((function(e){return{users:e.users}}),(function(e){return{getAllUsers:function(){return e(W())}}}))(wt),Et=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;switch(Object(g.a)(this,n),(r=t.call(this,e)).acceptEnrollment=function(e){r.props.addParticipant(e,r.props.groupId,"student")},r.addNewParticipant=function(e){var t=r.state.newParticipant;r.props.addParticipant(t.userId,r.props.groupId,t.participatingRole),r.setState((function(e){return Object(l.a)(Object(l.a)({},e),{},{newParticipant:{participatingRole:e.newParticipant.participatingRole,userId:null}})}))},r.handleNewParticipantRoleChange=function(e){r.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{newParticipant:{participatingRole:e,userId:t.newParticipant.userId}})}))},r.handleNewParticipantIdChange=function(e){r.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{newParticipant:{userId:e,participatingRole:t.newParticipant.participatingRole}})}))},r.handleExternalGroupChange=function(e){r.state.editable||JSON.stringify(e)===JSON.stringify(r.state.group)||r.setState({group:e})},r.handleChange=function(e,t){r.setState({group:Object(l.a)(Object(l.a)({},r.state.group),{},{[e]:t})})},r.handleLessonChange=function(e){var t=r.state.group.lessons||r.props.group.lessons;r.setState({group:Object(l.a)(Object(l.a)({},r.state.group),{},{lessons:Object(l.a)(Object(l.a)({},t),{},{[e.id]:e})})})},r.handleEvaluationChange=function(e){r.setState({group:Object(l.a)(Object(l.a)({},r.state.group),{},{evaluations:e})})},r.handlePresenceChange=function(e){var t=r.state.group.presence||r.props.group.presence;r.setState({group:Object(l.a)(Object(l.a)({},r.state.group),{},{presence:Object(l.a)(Object(l.a)({},t),{},{[e.id]:e})})})},r.setEditable=function(){r.setState({editable:!0})},r.cancel=function(){r.setState({editable:!1,group:r.props.group})},r.save=function(){r.props.setGroup(r.state.group),r.setState({editable:!1})},r.handleTab=function(e,t){r.props.history.push({search:"tab="+r.state.tabs[t]})},r.openCertificate=function(){var e=r.props.group.id,t=r.props.userId;window.open("/certificaat/gebruiker/"+t.toString()+"/groep/"+e.toString(),"_blank")},r.state={editable:!1,group:r.props.group,newParticipant:{participatingRole:"student",userId:null}},r.props.role){case"student":r.props.userIsMemberOfGroup?r.state.tabs=["Lessen","Deelnemers"]:r.state.tabs=["Lessen"];break;case"teacher":r.props.userIsMemberOfGroup?r.state.tabs=["Lessen","Inschrijvingen","Deelnemers","Actief","Beoordeling"]:r.state.tabs=["Inschrijvingen","Deelnemers","Lessen"];break;case"admin":case"grade_admin":r.state.tabs=["Inschrijvingen","Lessen","Deelnemers","Actief","Beoordeling"]}return r}return Object(f.a)(n,[{key:"getCurrentTab",value:function(e){var t=this,n=this.state.group,r=this.props.group.enrollmentIds,a=this.state.group.lessons,o=this.state.group.participantIds,s=this.state.group.evaluations,i=this.state.group.presence,c=this.state.newParticipant;switch(e){case"Inschrijvingen":return null==r?Object(oe.jsx)(pe,{}):0===r.length?"Er zijn geen inschrijvingen":Object(oe.jsx)(bt,{userIds:r,actions:"admin"===this.props.role&&this.state.editable?[{label:"Goedkeuren",onClick:this.acceptEnrollment}]:[]});case"Lessen":return null==a?Object(oe.jsx)(pe,{}):0===a.length?"Er zijn nog geen lessen bekend":Object(oe.jsx)("table",{style:{width:"100%",tableLayout:"fixed"},children:Object(oe.jsx)("tbody",{children:M()(a,(function(e){return Object(oe.jsx)(lt,{lesson:e,role:t.props.role,userIsMemberOfGroup:t.props.userIsMemberOfGroup,editable:t.state.editable,handleChange:t.handleLessonChange},e.id)}))})});case"Deelnemers":if(null==o)return Object(oe.jsx)(pe,{});var l=!o.includes(c.userId)&&!(null!=r&&r.includes(c.userId))&&c.userId,u=l?"":c.userId?"Deze gebruiker heeft zich al ingeschreven of is al een deelnemer":"Vul een deelnemer in";return Object(oe.jsxs)("div",{children:["admin"===this.props.role&&this.state.editable&&Object(oe.jsxs)("div",{children:[Object(oe.jsx)(ae.a,{variant:"button",color:"primary",style:{margin:"18px 12px"},children:"Nieuwe deelnemer:"}),Object(oe.jsx)("br",{}),Object(oe.jsxs)("div",{style:{display:"inline-flex"},children:[Object(oe.jsx)(Nt,{onChange:this.handleNewParticipantIdChange,value:c.userId}),Object(oe.jsx)(He,{editable:!0,label:"Rol",value:c.participatingRole,options:[{value:"student",label:"Leerling"},{value:"teacher",label:"Expert"}],onChange:this.handleNewParticipantRoleChange}),Object(oe.jsx)(Ce.a,{title:u,placement:"bottom-start",children:Object(oe.jsx)("div",{children:Object(oe.jsx)(ne.a,{variant:"contained",disabled:!l,color:"primary",style:{marginTop:"22px"},onClick:this.addNewParticipant,children:"Voeg toe"})})})]}),Object(oe.jsx)(xt.a,{}),Object(oe.jsx)("br",{})]}),0===o.length?"Er zijn nog geen deelnemers toegevoegd":Object(oe.jsx)(bt,{userIds:o})]});case"Actief":return null==o||null==a||null==i?Object(oe.jsx)(pe,{}):Object(oe.jsx)(Ke,{participantIds:o,lessons:a,presence:i,editable:this.state.editable,handleChange:this.handlePresenceChange});case"Beoordeling":return null==o||null==s?Object(oe.jsx)(pe,{}):Object(oe.jsx)(Je,{evaluations:s,groupId:n.id,editable:this.state.editable,handleChange:this.handleEvaluationChange});default:return null}}},{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(){this.getData(),this.handleExternalGroupChange(this.props.group)}},{key:"getData",value:function(){var e=this.state.group,t=this.state.group.enrollmentIds,n=this.state.group.lessons,r=this.state.group.participantIds,a=this.state.group.evaluations,o=this.state.group.presence;switch(this.state.currentTab){case"Inschrijvingen":null==t&&this.props.getGroupEnrollments(e.id);break;case"Lessen":null==n&&this.props.getGroupLessons(e.id);break;case"Deelnemers":null==r&&this.props.getGroupParticipants(e.id);break;case"Actief":null==r&&this.props.getGroupParticipants(e.id),null==n&&this.props.getGroupLessons(e.id),null==o&&this.props.getGroupPresence(e.id);break;case"Beoordeling":null==a&&this.props.getGroupEvaluations(e.id),null==r&&this.props.getGroupParticipants(e.id)}}},{key:"render",value:function(){var e=this.state.editable,t=this.props.role,n=this.state.group;return Object(oe.jsxs)(le,{children:[Object(oe.jsx)(vt,Object(l.a)(Object(l.a)({},this.props),{},{editable:e,group:n,onChange:this.handleChange})),Object(oe.jsx)(xt.a,{}),Object(oe.jsxs)("div",{style:{display:"flex"},children:["student"===t&&Object(oe.jsx)(me,{group:n,style:{margin:"20px"}}),("teacher"===t||"admin"===t)&&!e&&Object(oe.jsx)(ne.a,{color:"secondary",variant:"contained",style:{margin:"20px"},onClick:this.setEditable,children:"Bewerken"}),e&&Object(oe.jsx)(ne.a,{color:"secondary",variant:"contained",style:{margin:"20px"},onClick:this.save,children:"Opslaan"}),e&&Object(oe.jsx)(ne.a,{color:"default",style:{margin:"20px"},onClick:this.cancel,children:"Annuleren"}),Object(oe.jsx)("div",{style:{flex:"2"}}),Be(n.evaluation)&&Object(oe.jsx)(ne.a,{color:"primary",variant:"contained",style:{margin:"20px"},onClick:this.openCertificate,children:"student"===t?"Certificaat":"Certificaten"})]}),Object(oe.jsx)(jt.a,{position:"static",color:"default",children:Object(oe.jsx)(gt.a,{value:this.state.tabs.indexOf(this.state.currentTab),onChange:this.handleTab,indicatorColor:"primary",textColor:"primary",variant:"fullWidth",centered:!0,children:this.state.tabs.map((function(e){return Object(oe.jsx)(ft.a,{label:Object(oe.jsx)(It,{scope:"groep/"+(n.id||"")+"?tab="+e,style:{paddingLeft:"100px"},children:e})},e)}))})}),Object(oe.jsx)("br",{}),Object(oe.jsx)("div",{style:{width:"98%",margin:"auto"},children:this.getCurrentTab(this.state.currentTab)}),Object(oe.jsx)(Ot,{giveWarning:this.state.editable})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=yt.a.parse(e.location.search);return Object(l.a)(Object(l.a)({},t),{},{group:Object(l.a)(Object(l.a)({},e.group),t.group),currentTab:n.tab?n.tab:t.tabs[0]})}}]),n}(r.Component),Pt=Object(S.h)(Et),At=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this.props;null==e.subjects&&e.getSubjects(),null!=e.group||e.notExists||e.getGroup(e.groupId)}},{key:"render",value:function(){if(null==this.props.group)return"page"===this.props.display&&this.props.notExists?Object(oe.jsx)(le,{children:"De opgevraagde groep bestaat niet"}):this.props.notExists?null:Object(oe.jsx)(pe,{});switch(this.props.display){case"page":return Object(oe.jsx)(Pt,Object(l.a)({},this.props));case"card":default:return Object(oe.jsx)($e,Object(l.a)({},this.props))}}}]),n}(r.Component);var Dt=Object(S.h)(Object(y.b)((function(e,t){var n=(t.match.params.groupId||t.groupId)+"",r=t.display||"page",a=!1,o=null,s=-1!==e.users[e.userId].participatingGroupIds.indexOf(n);return null==e.groups||null==e.groups[n]?null!=n&&-1===e.hasFetched.indexOf("Group.get("+n+")")||(a=!0):o=e.groups[n],{group:o,notExists:a,display:r,role:e.role,groupId:n,subjects:e.subjects,userId:e.userId,userIsMemberOfGroup:s,schoolYear:e.schoolYear,possibleYears:e.possibleYears}}),(function(e){return{setGroup:function(t){return e(function(e){return function(t,n){function r(e){return{courseId:e.courseId,subjectId:e.subjectId,name:e.courseName,description:e.courseDescription,studyTime:e.studyTime,remarks:e.remarks}}function a(e){return{courseId:e.courseId,groupId:e.id,day:e.day,schoolYear:e.schoolYear,enrollableFor:e.enrollableFor,period:e.period,startTime:e.startTime,endTime:e.endTime}}var o=r(n().groups[e.id]),s=r(e),i=a(n().groups[e.id]),c=a(e),l=n().groups[e.id].lessons,u=e.lessons,p=n().groups[e.id].presence,d=e.presence,h=n().groups[e.id].evaluations,b=e.evaluations;if(JSON.stringify(o)!==JSON.stringify(s)&&H("course","patch",s,t,n),JSON.stringify(i)!==JSON.stringify(c)&&H("group","patch",c,t,n),JSON.stringify(p)!==JSON.stringify(d)){var j=P()(d,(function(e){return JSON.stringify(e)!==JSON.stringify(p[e.id])}));H("group/presence","patch",{presence:JSON.stringify(M()(j,(function(e){return e}))),groupId:e.id},t,n)}if(null!=u&&JSON.stringify(l)!==JSON.stringify(u)&&H("group/lessons","patch",{lessons:JSON.stringify(M()(u,(function(e){return e})))},t,n),JSON.stringify(h)!==JSON.stringify(b)){for(var g=[],f=0;f<b.length;f++){var O=b[f];JSON.stringify(h[f])!==JSON.stringify(O)&&g.push(O)}H("group/evaluations","patch",{evaluations:JSON.stringify(g),groupId:e.id},t,n)}t({type:"CHANGE_GROUP",group:e})}}(t))},getGroup:function(t){return e(function(e){return function(t,n){H("group","post",{groupId:e},t,n).then((function(n){t({type:"CHANGE_GROUPS",groups:{[e]:n}})})).catch((function(){}))}}(t))},getGroupEnrollments:function(t){return e(function(e){return function(t,n){H("group/enrollments","post",{groupId:e},t,n).then((function(n){t({type:"CHANGE_GROUP",group:{id:e,enrollmentIds:Object.keys(n).map((function(e){return parseInt(e,10)}))}}),t({type:"CHANGE_USERS",users:n})})).catch((function(){}))}}(t))},getGroupLessons:function(t){return e(function(e){return function(t,n){H("group/lessons","post",{groupId:e},t,n).then((function(n){t({type:"CHANGE_GROUP",group:{id:e,lessons:n}})}))}}(t))},getGroupParticipants:function(t){return e(function(e){return function(t,n){H("group/participants","post",{groupId:e},t,n).then((function(n){t({type:"CHANGE_GROUP",group:{id:e,participantIds:Object.keys(n).map((function(e){return parseInt(e,10)}))}}),t({type:"CHANGE_USERS",users:n})}))}}(t))},getGroupEvaluations:function(t){return e(function(e){return function(t,n){H("group/evaluations","post",{groupId:e},t,n,!0).then((function(n){t({type:"CHANGE_GROUP",group:{id:e,evaluations:n}})}))}}(t))},getGroupPresence:function(t){return e(function(e){return function(t,n){H("group/presence","post",{groupId:e},t,n).then((function(n){t({type:"CHANGE_GROUP",group:{id:e,presence:n}})}))}}(t))},getSubjects:function(){return e(_())},addParticipant:function(t,n,r){return e(function(e,t,n){return function(r,a){return H("group/participants","patch",{userId:e,groupId:t,participatingRole:n},r,a).then((function(){var n=a().groups[t].enrollmentIds.indexOf(e);r({type:"CHANGE_GROUP",group:{id:t,enrollmentIds:[].concat(Object(c.a)(a().groups[t].enrollmentIds.slice(0,n)),Object(c.a)(a().groups[t].enrollmentIds.slice(n+1)))}}),r({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"low",type:"bar",message:"Deelnemer toegevoegd, refresh om te zien",scope:"*"}})}))}}(t,n,r))},addNotification:function(t){return e(Y(t))}}}))(At)),Gt=n(866),Lt=n(855),Tt=n(806),Mt=n(865),Ft=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).handleSortChange=function(e){r.props.history.push({search:"vak=".concat(e,"&blok=").concat(r.state.period,"&leerjaar=").concat(r.state.schoolYear)})},r.handlePeriodChange=function(e){r.props.history.push({search:"vak=".concat(r.state.subject,"&blok=").concat(e,"&leerjaar=").concat(r.state.schoolYear)})},r.handleYearChange=function(e){r.props.history.push({search:"vak=".concat(r.state.subject,"&blok=").concat(r.state.period,"&leerjaar=").concat(e)})},r.state={period:e.currentPeriod,leerjaar:e.schoolYear,subject:null},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.props.getSubjects(),this.props.getGroups()}},{key:"getGroupsPerSubject",value:function(e){return P()(this.props.groups,(function(t){return e===t.subjectName}))}},{key:"getMenuItem",value:function(e,t){var n=this,r=this.state.subject===t?"primary":"initial";return Object(oe.jsx)(Tt.a,{button:!0,onClick:function(){return n.handleSortChange(t)},children:Object(oe.jsx)(Mt.a,{children:Object(oe.jsx)(ae.a,{variant:"button",color:r,style:{minWidth:"150px"},children:e})})},e)}},{key:"getMenuItems",value:function(){var e=this,t=this.props.role,n=M()(this.props.subjects,(function(e){return e}));"admin"!==t&&(n=n.filter((function(e){return"@"!==e.name[0]})));var r=n.map((function(t){return e.getMenuItem(t.name,t.name)}));return"student"===t&&r.unshift(this.getMenuItem("Ingeschreven","enrolled")),r}},{key:"render",value:function(){var e,t=this;return"enrolled"===this.state.subject?null==this.props.enrolledGroupsIds?(e=Object(oe.jsx)(pe,{}),this.props.getEnrolLments()):(e=this.props.enrolledGroupsIds.map((function(e){return Object(oe.jsx)(Dt,{groupId:e,display:"card"},e)})),0===this.props.enrolledGroupsIds.length&&(e=Object(oe.jsx)("div",{style:{margin:"15px"},children:"Je hebt je nog niet ingeschreven."}))):(null!=this.props.subjects&&null!=this.props.groups&&this.props.enrolledGroups!==[]||(e=Object(oe.jsx)(pe,{})),e=this.getGroupsPerSubject(this.state.subject).filter((function(e){return null!=e})).filter((function(e){return"all"===t.state.period||e.period+""===t.state.period})).filter((function(e){return"all"===t.state.schoolYear||e.schoolYear+""===t.state.schoolYear})).sort((function(e,t){return e.period-t.period})).map((function(e){return Object(oe.jsx)(Dt,{groupId:e.id,display:"card"},e.id)}))),Object(oe.jsxs)(le,{children:[Object(oe.jsx)(re.a,{style:{position:"relative"},children:Object(oe.jsxs)(Gt.a,{style:{display:"flex"},children:[Object(oe.jsx)(ae.a,{variant:"subtitle1",color:"textSecondary",style:{flex:"2 1 auto"},children:"Schrijf je in voor modules"}),Object(oe.jsx)(He,{label:"blok",value:this.state.period,options:[{label:"Alle",value:"all"},{label:"Blok 1",value:"1"},{label:"Blok 2",value:"2"},{label:"Blok 3",value:"3"},{label:"Blok 4",value:"4"}],onChange:this.handlePeriodChange}),Object(oe.jsx)(He,{value:this.state.schoolYear,label:"schooljaar",options:[{label:"Alle",value:"all"}].concat(Object(c.a)(this.props.possibleYears.map((function(e){return{label:e,value:e}})))),style:{flex:"1",marginLeft:"20px"},onChange:this.handleYearChange})]})}),Object(oe.jsxs)("div",{style:{display:"flex"},className:"ColumnFlexDirectionOnMobile",children:[Object(oe.jsx)(re.a,{children:Object(oe.jsx)(Lt.a,{component:"nav",style:{flex:1},children:this.getMenuItems()})}),Object(oe.jsx)("div",{style:{padding:"12px"},children:e})]}),Object(oe.jsx)("br",{}),Object(oe.jsx)("br",{}),Object(oe.jsx)("br",{})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=yt.a.parse(e.location.search),r=n.blok,a=n.vak,o=n.leerjaar;a||null==e.subjects||(a=P()(e.subjects,(function(e){return"@"!==e.name[0]}))[0].name);return r||(r=e.enrollmentPeriod+""),o||(o=e.schoolYear),Object(l.a)(Object(l.a)({},t),{},{period:r,subject:a,schoolYear:o})}}]),n}(r.Component);var Ht=Object(y.b)((function(e){return{role:e.role,enrollmentPeriod:e.enrollmentPeriod,enrollableGroups:e.enrollableGroups,groups:e.groups,subjects:e.subjects,schoolYear:e.schoolYear,enrolledGroupsIds:e.users[e.userId].enrollmentIds,possibleYears:e.possibleYears}}),(function(e){return{getSubjects:function(){return e(_())},getGroups:function(){return e(z())},getEnrolLments:function(){return e(B())}}}))(Ft),Rt=n(867),_t=n(868),zt=n(869),Ut=n(870),Vt=n(871),Bt=n(857),Wt=n(872),Yt=n(374),Jt=n.n(Yt),Zt={users:"Hoofdrol",evaluations:"Groepcode",enrollments:"Inschrijfperiode",courseIds:"Niet splitsen"},$t=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).handleShowData=function(){r.setState({hasFetched:!0});var e=Zt[r.state.data];r.fetchData(r.state.data).then((function(t){return r.setState({splitOn:e,tables:r.splitTable(t,e),tableSortColumns:Array(t.length)})}))},r.handleFilterChange=function(e){r.props.history.push({search:"data="+e})},r.handleSplitChange=function(e){var t=r.state.tables,n=[r.state.tables[0][0]].concat(Object(c.a)(t.map((function(e){return e.slice(1,e.length)})).flat(1)));r.setState({splitOn:e,tables:r.splitTable(n,e)})},r.sort=function(e){var t=r.state.tables[e],n=r.state.tableSortColumns[e],a=r.state.tableSortDirections[e];t=[t[0]].concat(t.slice(1,t.length).sort((function(e,t){e=e[n];var r=(null==(t=t[n]))-(null==e)||+(e>t)||-(e<t);return"asc"===a?r:-r}))),r.setState((function(n){return{tables:[].concat(Object(c.a)(n.tables.slice(0,e)),[t],Object(c.a)(n.tables.slice(e+1)))}}))},r.handleSortChange=function(e,t){var n=r.state;r.setState({tableSortColumns:Object(l.a)(Object(l.a)({},n.tableSortColumns),{},{[e]:t}),tableSortDirections:Object(l.a)(Object(l.a)({},n.tableSortDirections),{},{[e]:"desc"===n.tableSortDirections[e]&&n.tableSortColumns[e]===t?"asc":"desc"})},(function(){return r.sort(e)}))},r.splitTable=function(e,t){var n=e[0].findIndex((function(e){return e===t}));if(n<0)return[e];for(var r=[[e[0],e[1]]],a=function(t){var a=r.findIndex((function(r){return r[1][n]===e[t][n]}));a<0&&(r.push([e[0]]),a=r.length-1),r[a].push(e[t])},o=2;o<e.length;o++)a(o);return r},r.fetchData=function(e){return D.a.ajax({url:"api/function/data",type:"post",data:{table:e,secureLogin:r.props.secureLogin},dataType:"json"})},r.downloadTables=function(){for(var e=r.state.tables,t=new Jt.a.Workbook,n=e[0][0].findIndex((function(e){return e===r.state.splitOn})),a=0;a<e.length;a++){var o=r.getValidWorksheetName(e[a][1][n]),s=t.addWorksheet(o);s.addRows(e[a]);for(var i=1;i<=e[a][0].length;i++)s.getColumn(i).width=e[a][0][i-1].length<10?10:e[a][0][i-1].length+2}var c={users:"Gebruikers ",enrollments:"Inschrijvingen ",evaluations:"Beoordelingen ",courseIds:"Modulecodes "}[r.state.data]+""+(new Date).toLocaleDateString()+".xlsx";r.downloadWorkbook(t,c)},r.getValidWorksheetName=function(e){(e+="").length>31&&(e=e.substring(0,30),console.log("Worksheet name length cannot exceed 31 characters. Name has been shortened."));var t=/(\\|\/|\*|\?|:|\[|\])/g;return t.test(e)&&(e=e.replace(t,"_"),console.log("Worksheet name cannot include one of the following chracters: \\, /, *, ?, :, [, ]. \n Illegal characters have been changed to _ ")),null!=e&&""!==e||(e="_leeg_"),e},r.downloadWorkbook=function(e,t){e.xlsx.writeBuffer({base64:!0}).then((function(e){var n=document.createElement("a"),r=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=URL.createObjectURL(r);n.href=a,n.download=t,document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(a)}),0)})).catch((function(e){console.log("Something went wrong with downloading the excel file: "+e.message)}))},r.forceCellWidth=function(e){switch(e){case"Vaknaam":case"Weergavenaam":return"200px";case"Modulenaam":return"300px";case"Uitleg beoordeling":return"200px";default:return"auto"}},r.state={tables:null,tableSortColumns:{},tableSortDirections:{},data:"enrollments",hasFetched:!1,splitOn:"Niet splitsen"},r}return Object(f.a)(n,[{key:"render",value:function(){var e,t=this;return e=null==this.state.tables?this.state.hasFetched?Object(oe.jsx)(pe,{style:{marginTop:"100px"}}):Object(oe.jsx)(ae.a,{variant:"body1",style:{marginTop:"100px"},children:'Klik op "Laad gegevens" om de gegevens te tonen'}):this.state.tables.map((function(e,n){return Object(oe.jsxs)(Rt.a,{style:{marginTop:"100px"},children:[Object(oe.jsx)(_t.a,{children:Object(oe.jsx)(zt.a,{style:{height:"auto"},children:e[0].map((function(e,r){return Object(oe.jsx)(Ut.a,{style:{color:"black",backgroundColor:"#e0e0e0",fontSize:13,top:0},children:Object(oe.jsx)(Ce.a,{title:"Sorteer",enterDelay:300,placement:"bottom-start",children:Object(oe.jsx)(Se.a,{active:t.state.tableSortColumns[n]===r,direction:t.state.tableSortDirections[n],onClick:function(e){return t.handleSortChange(n,r)},style:{zIndex:0},children:Object(oe.jsx)("span",{style:{width:t.forceCellWidth(e)},children:e})})})},r)}))},0)}),Object(oe.jsx)(Vt.a,{children:e.filter((function(e,t){return t>0})).map((function(e,t){return Object(oe.jsx)(zt.a,{style:{height:"auto"},children:e.map((function(e,t){return Object(oe.jsx)(Ut.a,{children:e},t)}))},t+1)}))})]},n)})),Object(oe.jsx)(le,{children:Object(oe.jsxs)(ke,{children:[Object(oe.jsx)(re.a,{elevation:2,style:{zIndex:1,position:"absolute",width:"85%"},children:Object(oe.jsxs)(Gt.a,{style:{display:"flex"},children:[Object(oe.jsx)(ae.a,{variant:"subtitle1",color:"textSecondary",style:{flex:"6",margin:"5px"},children:"Gegevens"}),Object(oe.jsx)(He,{label:"Gegevens van",value:this.state.data,editable:!0,options:[{label:"Beoordelingen",value:"evaluations"},{label:"Gebruikers",value:"users"},{label:"Inschrijvingen",value:"enrollments"},{label:"Module codes",value:"courseIds"}],style:{flex:"3",margin:"5px"},onChange:this.handleFilterChange}),Object(oe.jsx)(ne.a,{variant:"outlined",onClick:this.handleShowData,style:{flex:"2",margin:"5px"},children:"Laad gegevens"}),Object(oe.jsx)(He,{value:this.state.splitOn,label:"Splits op",options:this.state.tables?[].concat(Object(c.a)(this.state.tables[0][0]),["Niet splitsen"]):["Niet splitsen"],editable:this.state.hasFetched,onChange:this.handleSplitChange,style:{flex:"3",margin:"5px"}}),Object(oe.jsx)(Bt.a,{onClick:this.downloadTables,children:Object(oe.jsx)(Wt.a,{})})]})}),e]})})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=yt.a.parse(e.location.search);return Object(l.a)(Object(l.a)({},t),{data:n.data?n.data:"enrollments"})}}]),n}(r.Component);var qt=Object(S.h)(Object(y.b)((function(e){return{secureLogin:e.secureLogin}}),null)($t)),Kt=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).handleFilterChange=function(e){r.props.history.push({search:"week="+e}),r.fetchSchedules(e)},r.state={schedules:null},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.fetchSchedules(this.state.week)}},{key:"fetchSchedules",value:function(e){var t=this;return D.a.ajax({url:"api/function/taxi",type:"post",data:{week:e},dataType:"json"}).then((function(e){return t.setState({schedules:e})}))}},{key:"render",value:function(){var e;return e=null==this.state.schedules?Object(oe.jsx)(pe,{}):this.state.schedules.map((function(e,t){return Object(oe.jsx)("div",{style:{width:"80%",margin:"auto"},className:"taxiScheduleHolder",dangerouslySetInnerHTML:{__html:e}},t)})),Object(oe.jsxs)(le,{children:[Object(oe.jsx)(re.a,{elevation:2,style:{position:"relative"},children:Object(oe.jsxs)(Gt.a,{style:{display:"flex"},children:[Object(oe.jsx)(ae.a,{variant:"subtitle1",color:"textSecondary",style:{flex:"2 1 auto"},children:"Taxischema"}),Object(oe.jsx)(He,{label:"week",value:this.state.week,options:[0,1,2,3,4,5,6,7,8].map((function(e){return{label:0===e?"Basisrooster":"Week "+e,value:e+""}})),onChange:this.handleFilterChange})]})}),e]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=yt.a.parse(e.location.search);return Object(l.a)(Object(l.a)({},t),{week:n.week?n.week:"0"})}}]),n}(r.Component),Qt=n(375),Xt=n.n(Qt),en=n(172),tn=n.n(en),nn=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).logoClick=function(){e.props.history.push("/")},e}return Object(f.a)(n,[{key:"render",value:function(){return Object(oe.jsx)(jt.a,{className:"Header",children:Object(oe.jsxs)(Gt.a,{children:[Object(oe.jsx)(Bt.a,{color:"inherit","aria-label":"Menu",onClick:this.props.toggleMenu,style:{position:"absolute"},children:Object(oe.jsx)(Xt.a,{})}),Object(oe.jsx)("img",{src:"/images/logo_qhighschool_white.svg",alt:"QHighschool Logo",style:{height:"60%",margin:"auto",maxHeight:"40px",cursor:"pointer"},onClick:this.logoClick}),Object(oe.jsxs)(Lt.a,{color:"inherit",style:{right:20,position:"absolute"},onClick:this.handleClick,children:[Object(oe.jsx)(tn.a,{style:{transform:"scale(1.5)",marginRight:"10px",float:"left"}}),Object(oe.jsx)("span",{className:"HiddenOnMobile",children:this.props.displayName})]})]})})}}]),n}(r.Component);var rn=Object(S.h)(Object(y.b)((function(e){return null!=e.userId?{displayName:e.users[e.userId].displayName,userId:e.userId}:{displayName:"",userId:e.userId}}),(function(e){return{toggleMenu:function(){return e(Z())}}}))(nn)),an=n(892),on=n(873),sn=n(376),cn=n.n(sn),ln=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).removeNotification=function(t){e.props.removeNotification(e.props.notifications[t])},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.props.notifications.map((function(t,n){var r;switch(t.priority){case"high":r=C.palette.error.main;break;case"medium":r="#ff8c00";break;case"low":default:r=C.palette.primary.main}return Object(oe.jsx)(an.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:!0,style:{position:"relative"},TransitionProps:{direction:"left"},children:Object(oe.jsx)(on.a,{style:{background:r,marginBottom:"4px"},message:Object(oe.jsx)("span",{id:"message-id",children:t.message}),action:t.sticky?[]:[Object(oe.jsx)(Bt.a,{onClick:function(){e.removeNotification(n)},children:Object(oe.jsx)(cn.a,{})},"close")]})},n)}));return Object(oe.jsx)("div",{style:{position:"fixed",bottom:0,right:0,width:"auto",zIndex:10},children:t})}}]),n}(r.Component);var un=Object(S.h)(Object(y.b)((function(e,t){return{notifications:e.notifications.filter((function(e){try{return"bar"===e.type&&new RegExp(e.scope).test(t.location.pathname)}catch(n){return!0}}))}}),(function(e){return{removeNotification:function(t){return e(J(t))}}}))(ln)),pn=n(874),dn=n(379),hn=n.n(dn),bn=n(377),jn=n.n(bn),gn=n(378),fn=n.n(gn),On=n(382),xn=n.n(On),vn=n(383),mn=n.n(vn),yn=n(384),kn=n.n(yn),Cn=n(380),Sn=n.n(Cn),In=n(381),wn=n.n(In),Nn=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;switch(Object(g.a)(this,n),(r=t.call(this,e)).state={},r.props.role){case"student":r.state.pages=["aanbod","portfolio","profiel","loguit"];break;case"teacher":r.state.pages=["aanbod","groepen","profiel","loguit"];break;case"admin":r.state.pages=["groepen","aanbod","profiel","gegevens","gebruikers","beheer","loguit"];break;case"grade_admin":r.state.pages=["aanbod","groepen","gegevens","gebruikers","profiel","loguit"];break;default:r.state.pages=["aanbod","profiel","loguit"]}return r}return Object(f.a)(n,[{key:"logout",value:function(){return D.a.ajax({url:"/auth/logout",type:"get",dataType:"json"}).then((function(){document.location.reload()}))}},{key:"onClick",value:function(e){"loguit"===e?this.logout():this.props.history.push("/"+e)}},{key:"getIcon",value:function(e,t){var n="black";switch(C.palette[t]&&(n=C.palette[t].main),e){case"Assignment":return Object(oe.jsx)(jn.a,{style:{color:n}});case"Group":return Object(oe.jsx)(fn.a,{style:{color:n}});case"Assessment":return Object(oe.jsx)(hn.a,{style:{color:n}});case"Person":return Object(oe.jsx)(tn.a,{style:{color:n}});case"TableChart":return Object(oe.jsx)(Sn.a,{style:{color:n}});case"Contacts":return Object(oe.jsx)(wn.a,{style:{color:n}});case"Exit":return Object(oe.jsx)(xn.a,{color:"secondary"});case"Taxi":return Object(oe.jsx)(mn.a,{style:{color:n}});case"Beheer":return Object(oe.jsx)(kn.a,{style:{color:n}});default:return null}}},{key:"getItem",value:function(e,t){var n=this,r="/"+e.id===this.props.location.pathname,a={};e.bottom&&(a.position="absolute",a.bottom="0px");var o=r?"primary":"inherit",s=Object(oe.jsx)(pn.a,{children:Object(oe.jsx)(It,{scope:e.id,children:this.getIcon(e.icon,o)})});return Object(oe.jsxs)(Tt.a,{button:!0,onClick:function(){return n.onClick(e.id)},style:a,children:[s,Object(oe.jsx)(ae.a,{variant:"button",color:o,className:"HiddenOnMobile",children:e.title})]},t)}},{key:"render",value:function(){var e=this,t=[{id:"aanbod",title:"Aanbod",icon:"Assignment"},{id:"groepen",title:"Mijn groepen",icon:"Group"},{id:"portfolio",title:"Portfolio",icon:"Assessment"},{id:"gegevens",title:"Gegevens",icon:"TableChart"},{id:"taxi",title:"Taxi",icon:"Taxi"},{id:"beheer",title:"Beheer",icon:"Beheer"},{id:"gebruikers",title:"Gebruikers",icon:"Contacts"}].filter((function(t){return-1!==e.state.pages.indexOf(t.id)})).map(this.getItem.bind(this)),n=[{id:"profiel",title:"Profiel",icon:"Person"},{id:"loguit",title:"Log uit",icon:"Exit"}].filter((function(t){return-1!==e.state.pages.indexOf(t.id)})).map(this.getItem.bind(this));return Object(oe.jsx)(re.a,{elevation:8,className:"Menu",children:Object(oe.jsxs)(Lt.a,{component:"nav",style:{height:"100%"},children:[t,Object(oe.jsx)("div",{style:{position:"absolute",bottom:"20px",width:"100%"},children:n})]})})}}]),n}(r.Component);var En=Object(S.h)(Object(y.b)((function(e){return null!=e.userId?{displayName:e.users[e.userId].displayName,userId:e.userId,role:e.role}:{displayName:"",userId:e.userId,role:e.role}}),null)(Nn)),Pn=n(385),An=n.n(Pn),Dn=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).handlePeriodChange=function(e){r.props.history.push({search:"blok=".concat(e,"&leerjaar=").concat(r.state.leerjaar)})},r.handleYearChange=function(e){r.props.history.push({search:"blok=".concat(r.state.period,"&leerjaar=").concat(e)})},r.openCertificate=function(){window.open("/certificaat/gebruiker/"+r.props.userId.toString(),"_blank")},r.state={period:e.currentPeriod+"",leerjaar:"student"===e.role?"all":e.schoolYear},r}return Object(f.a)(n,[{key:"orderGroups",value:function(e,t){var n={};return An()(e,(function(e){n[t(e)]||(n[t(e)]=[]),n[t(e)].push(e)})),M()(n,this.getOrder)}},{key:"getOrder",value:function(e,t){return e=M()(e,(function(e){return Object(oe.jsx)(Dt,{groupId:e.id,display:"card"},e.id)})),Object(oe.jsxs)("div",{style:{padding:"10px"},children:[Object(oe.jsx)(ae.a,{color:"secondary",variant:"h6",children:t}),e,Object(oe.jsx)(xt.a,{style:{marginTop:"20px"}})]},t)}},{key:"render",value:function(){var e=this;"student"===this.props.role&&[{label:"Alle",value:"all"},{label:"Blok 1",value:"period1"},{label:"Blok 2",value:"period2"},{label:"Blok 3",value:"period3"},{label:"Blok 4",value:"period4"}].splice(1,0,{label:"Ingeschreven",value:"enrolled"}),this.props.groups||this.props.getParticipatingGroups(),this.props.enrollmentIds||this.props.getEnrolLments();var t,n=this.props.enrollmentIds||[];if("enrolled"!==this.state.filter&&(n=this.props.participatingGroupIds.filter((function(e){return-1===n.indexOf(e)})).concat(n)),null==this.props.groups||0===Object.keys(this.props.groups).length)t=Object(oe.jsx)(pe,{});else{var r=n.map((function(t){return e.props.groups[t]})).filter((function(e){return null!=e})).filter((function(t){return"all"===e.state.period||t.period+""===e.state.period})).filter((function(t){return"all"===e.state.schoolYear||t.schoolYear+""===e.state.schoolYear}));t=this.orderGroups(r,(function(e){return e.subjectName}))}return Object(oe.jsxs)(le,{children:[Object(oe.jsx)(re.a,{elevation:2,style:{position:"relative"},children:Object(oe.jsxs)(Gt.a,{style:{display:"flex"},children:[Object(oe.jsx)(ae.a,{variant:"subtitle1",color:"textSecondary",style:{flex:"4 1 auto"},children:"student"===this.props.role?"Portfolio":"Mijn groepen"}),Object(oe.jsx)(He,{label:"blok",style:{flex:1},value:this.state.period,options:[{label:"Alle",value:"all"},{label:"Blok 1",value:"1"},{label:"Blok 2",value:"2"},{label:"Blok 3",value:"3"},{label:"Blok 4",value:"4"}],onChange:this.handlePeriodChange}),Object(oe.jsx)(He,{label:"schooljaar",style:{flex:1},value:this.state.schoolYear,options:[{label:"Alle",value:"all"}].concat(Object(c.a)(this.props.possibleYears.map((function(e){return{label:e,value:e}})))),onChange:this.handleYearChange})]})}),t]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=yt.a.parse(e.location.search),r=n.blok,a=n.leerjaar;return r||(r="student"===e.role?"all":e.currentPeriod+""),a||(a="student"===e.role?"all":e.schoolYear),Object(l.a)(Object(l.a)({},t),{},{period:r,schoolYear:a})}}]),n}(r.Component);var Gn=Object(y.b)((function(e){return{groups:e.groups,participatingGroupIds:e.users[e.userId].participatingGroupIds,enrollmentIds:e.users[e.userId].enrollmentIds,role:e.role,schoolYear:e.schoolYear,currentPeriod:e.currentPeriod,userId:e.userId,possibleYears:e.possibleYears}}),(function(e){return{getSubjects:function(){return e(_())},getGroups:function(){return e(z())},getEnrolLments:function(){return e(B())},getParticipatingGroups:function(){return e(U())}}}))(Dn),Ln=["alias","vak","module","groep"],Tn=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).mapPageToListItem=function(e){return Object(oe.jsx)(Tt.a,{button:!0,onClick:function(){return r.handlePageChange(e)},children:Object(oe.jsx)(Mt.a,{children:Object(oe.jsx)(ae.a,{variant:"button",color:e===r.state.page?"primary":"initial",style:{minWidth:"150px"},children:e.charAt(0).toUpperCase()+e.slice(1)})})},e)},r.handlePageChange=function(e){r.props.history.push({search:"page="+e})},r.getContent=function(){switch(r.state.page){case"alias":return Object(oe.jsx)(Mn,{dispatch:r.props.dispatch});case"vak":return Object(oe.jsx)(Fn,{addSubject:r.props.addSubject});case"module":return Object(oe.jsx)(Hn,{addCourse:r.props.addCourse,subjects:r.props.subjects});case"groep":return Object(oe.jsx)(Rn,{addGroup:r.props.addGroup,courses:r.state.courses})}},r.state={courses:[]},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this;D.a.ajax({url:"api/course/list",type:"get",data:{},dataType:"json"}).then((function(t){e.setState({courses:t})})),this.props.getSubjects()}},{key:"render",value:function(){return Object(oe.jsx)(le,{children:Object(oe.jsxs)(ke,{children:[Object(oe.jsx)(re.a,{elevation:2,style:{position:"relative"},children:Object(oe.jsx)(Gt.a,{style:{display:"flex"},children:Object(oe.jsx)(ae.a,{variant:"subtitle1",color:"textSecondary",style:{flex:"2 1 auto"},children:"Beheer"})})}),Object(oe.jsxs)("div",{style:{display:"flex"},className:"ColumnFlexDirectionOnMobile",children:[Object(oe.jsx)(re.a,{elevation:2,children:Object(oe.jsx)(Lt.a,{component:"nav",style:{flex:1},children:Ln.map(this.mapPageToListItem)})}),Object(oe.jsx)("div",{style:{padding:"12px",width:"50%"},children:this.getContent()})]})]})})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=yt.a.parse(e.location.search);return Object(l.a)(Object(l.a)({},t),{page:n.page?n.page:Ln[0]})}}]),n}(r.Component),Mn=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).state={aliasId:null},r}return Object(f.a)(n,[{key:"render",value:function(){var e=this;return Object(oe.jsxs)("div",{style:{margin:"10px 0"},children:[Object(oe.jsx)(Nt,{value:this.state.aliasId,onChange:function(t){return e.setState({aliasId:t})}}),Object(oe.jsx)("br",{}),Object(oe.jsx)(ne.a,{variant:"contained",color:"primary",disabled:null==this.state.aliasId,onClick:function(){return e.props.dispatch((t=e.state.aliasId,function(e,n){H("function/alias","post",{userId:t},e,n).then((function(){document.location.reload()}))}));var t},children:"Login in met alias"})]})}}]),n}(r.Component),Fn=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).state={name:"",description:""},r}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.state;return Object(oe.jsxs)("div",{children:[Object(oe.jsx)(Pe,{label:"Naam",value:t.name,onChange:function(t){return e.setState({name:t})},editable:!0,validate:{maxLength:50}}),Object(oe.jsx)("br",{}),Object(oe.jsx)(Pe,{label:"Omschrijving",value:t.description,onChange:function(t){return e.setState({description:t})},editable:!0,validate:{maxLength:440},multiline:!0}),Object(oe.jsx)(ne.a,{variant:"contained",color:"primary",style:{height:"37px",margin:"12px"},onClick:function(){e.props.addSubject(t.name,t.description).then(te)},children:"Voeg toe"})]})}}]),n}(r.Component),Hn=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).state={name:"",subjectId:""},r}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.state;return Object(oe.jsxs)("div",{children:[Object(oe.jsx)(Pe,{label:"Naam",value:t.name,onChange:function(t){return e.setState({name:t})},editable:!0,validate:{maxLength:50}}),Object(oe.jsx)("br",{}),Object(oe.jsx)(He,{value:t.subjectId,label:"Vak",onChange:function(t){return e.setState({subjectId:t})},editable:!0,options:M()(this.props.subjects,(function(e){return{value:e.id,label:e.name}}))}),Object(oe.jsx)("br",{}),Object(oe.jsx)(ne.a,{variant:"contained",color:"primary",style:{height:"37px",margin:"12px"},onClick:function(){e.props.addCourse(t.name,t.subjectId).then(te)},children:"Voeg toe"})]})}}]),n}(r.Component),Rn=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).state={courseId:null,teacherId:null},r}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.state;return Object(oe.jsxs)("div",{children:[Object(oe.jsx)(He,{value:t.courseId,label:"Module",onChange:function(t){return e.setState({courseId:t})},editable:!0,search:!0,options:this.props.courses.map((function(e){return{label:e.name,value:e.id}})),style:{minWidth:"200px"}}),Object(oe.jsx)("br",{}),Object(oe.jsx)(Nt,{value:t.teacherId,onChange:function(t){return e.setState({teacherId:t})}}),Object(oe.jsx)("br",{}),Object(oe.jsx)(ne.a,{variant:"contained",color:"primary",style:{height:"37px",margin:"12px"},onClick:function(){e.props.addGroup(t.courseId,t.teacherId).then(te)},children:"Voeg toe"})]})}}]),n}(r.Component);var _n=Object(y.b)((function(e){return{subjects:e.subjects,groups:e.groups}}),(function(e){return{addSubject:function(){var t=Object(N.a)(w.a.mark((function t(n,r){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(q(n,r)));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),addCourse:function(){var t=Object(N.a)(w.a.mark((function t(n,r){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(K(n,r)));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),addGroup:function(){var t=Object(N.a)(w.a.mark((function t(n,r){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(Q(n,r)));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),addNotification:function(t){return e(Y(t))},getSubjects:function(){return e(_())},dispatch:e}}))(Tn),zn=n(879),Un=n(886),Vn=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user;return Object(oe.jsxs)("div",{children:[Object(oe.jsx)(ae.a,{variant:"h6",color:"secondary",children:"Persoonlijke gegevens"}),Object(oe.jsx)("table",{children:Object(oe.jsxs)("tbody",{children:[Object(oe.jsxs)("tr",{children:[Object(oe.jsx)(ae.a,{component:"td",children:"Naam"}),Object(oe.jsx)(Pe,{value:t.displayName,editable:e.editableAdmin,onChange:function(t){return e.onChange("displayName",t)},td:!0})]}),e.isAdmin&&Object(oe.jsxs)("tr",{children:[Object(oe.jsx)(ae.a,{component:"td",children:"Authenticatie email"}),Object(oe.jsx)(Pe,{value:t.email,editable:e.editableAdmin,onChange:function(t){return e.onChange("email",t)},td:!0})]}),Object(oe.jsxs)("tr",{children:[Object(oe.jsx)(ae.a,{component:"td",children:"Voorkeursemail"}),Object(oe.jsx)(Pe,{validate:{type:"email"},value:t.preferedEmail,editable:e.editableUser,onChange:function(t){return e.onChange("preferedEmail",t)},td:!0}),Object(oe.jsx)("td",{children:!Ne(t.preferedEmail,{type:"email"})&&Object(oe.jsx)(Un.a,{severity:"warning",children:"Als je geen ander email invult, gaan onze berichten naar je school e-mailadres!"})})]}),Object(oe.jsxs)("tr",{children:[Object(oe.jsx)(ae.a,{component:"td",children:"Mobiel nummer"}),Object(oe.jsx)(Pe,{validate:{type:"phoneNumber"},value:"06 "+(t.phoneNumber?t.phoneNumber.replace(/^06[ ]*/,""):""),td:!0,editable:e.editableUser,onChange:function(t){return e.onChange("phoneNumber",t.slice(0,11))}}),Object(oe.jsx)("td",{children:!Ne(t.phoneNumber,{type:"phoneNumber"})&&Object(oe.jsx)(Un.a,{severity:"warning",children:"Zonder mobiele nummer kunnen we je niet snel bereiken!"})})]})]})})]})}}]),n}(r.Component),Bn=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).reducedChoices=null,e.reduceChoices=function(){for(var t=Object(l.a)({},e.props.user),n=Object(it.cloneDeep)(st),r=0;r<5;r++){for(var a in st){var o=n[a][t[a]];if(null!=o)for(var s in o)n[s]=e.intersection(n[s],o[s])}for(var i in st)1===Object.keys(n[i]).length&&(t[i]=Object.keys(n[i])[0])}e.reducedChoices=n},e.intersection=function(e,t){return Object.keys(e).concat(Object.keys(t)).sort().reduce((function(t,n,r,a){return r&&a[r-1]===n?Object(l.a)(Object(l.a)({},t),{},{[n]:e[n]}):t}),{})},e.getField=function(t){var n=e.props.user[t],r=Object.keys(e.reducedChoices[t]),a=e.props.editableUser;return null!=r&&0!==r.length||(console.error(e.props.user),console.error("INVALID EDUCATION DATA STATE ON FIELD "+t),r=Object.keys(st[t])),1===r.length&&(n=r[0],a=!1),-1===r.indexOf(n)&&(n=""),"school"===t&&(a=e.props.editableAdmin),Object(oe.jsx)(He,{value:n,editable:a,onChange:function(n){return e.props.onChange(t,n)},td:!0,validate:{notEmpty:!0},options:r})},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.props;return this.reduceChoices(),Object(oe.jsxs)("div",{children:[Object(oe.jsx)(ae.a,{variant:"h6",color:"secondary",children:"Schoolgegevens"}),Object(oe.jsx)("table",{children:Object(oe.jsxs)("tbody",{children:[Object(oe.jsxs)("tr",{children:[Object(oe.jsx)(ae.a,{component:"td",children:"School"}),this.getField("school")]}),Object(oe.jsxs)("tr",{children:[Object(oe.jsx)(ae.a,{component:"td",children:"Rollen"}),Object(oe.jsx)(He,{value:(t.user.availableRoles||"").split(","),multiple:!0,editable:t.editableAdmin,td:!0,options:["admin","student","teacher","grade_admin"],onChange:function(e){return t.onChange("availableRoles",e.join(","))}})]})]})}),Object(oe.jsx)(xt.a,{}),Object(oe.jsx)("table",{children:Object(oe.jsxs)("tbody",{children:[Object(oe.jsxs)("tr",{children:[Object(oe.jsx)(ae.a,{component:"td",children:"Opleidingsniveau"}),this.getField("level")]}),Object(oe.jsxs)("tr",{children:[Object(oe.jsx)(ae.a,{component:"td",children:"Schoollocatie"}),this.getField("schoolLocation")]}),Object(oe.jsxs)("tr",{children:[Object(oe.jsx)(ae.a,{component:"td",children:"Leerjaar"}),this.getField("year")]}),Object(oe.jsxs)("tr",{children:[Object(oe.jsx)(ae.a,{component:"td",children:"Profiel"}),this.getField("profile")]}),Object(oe.jsxs)("tr",{children:[Object(oe.jsx)(ae.a,{component:"td",children:"Extra toetsrechten"}),Object(oe.jsx)(He,{value:this.props.user.examRights?this.props.user.examRights.split(","):[],td:!0,editable:this.props.editableUser,onChange:function(t){return e.props.onChange("examRights",t.join(","))},multiple:!0,options:["Toetstijdverlenging","Gesproken toetsen","Gebruik van laptop","Gebruik van woordenboek","Geen extra rechten"]})]})]})})]})}}]),n}(r.Component),Wn=n(875),Yn=n(876),Jn=n(877),Zn=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).toggleDialog=function(){r.setState({isDialogOpen:!r.state.isDialogOpen,newSubjectId:"",newSubjectProfile:"",newSubjectStartYear:r.props.schoolYear,isEditDialog:!1})},r.onChange=function(e,t){var n=Object(l.a)(Object(l.a)({},r.state),{},{[e]:t});n.newSubjectId&&n.newSubjectProfile&&(n.isValid=!0),r.setState(n)},r.updateExamSubjects=function(){var e=r.props.examSubjects.filter((function(e){return e.id!==r.state.newSubjectId}));r.props.onChange("examSubjects",JSON.stringify([].concat(Object(c.a)(e),[{id:r.state.newSubjectId,inProfile:"T"===r.state.newSubjectProfile,startSchoolYear:r.state.newSubjectStartYear}]))),r.setState({isDialogOpen:!1})},r.removeExamSubject=function(e){var t=r.props.examSubjects.filter((function(t){return t.id!==e}));r.props.onChange("examSubjects",JSON.stringify(t))},r.editExamSubject=function(e){var t=r.props.examSubjects.filter((function(t){return t.id===e}))[0];r.setState({isDialogOpen:!0,newSubjectId:e,newSubjectProfile:t.inProfile?"T":"F",newSubjectStartYear:t.startSchoolYear,isValid:!0,isEditDialog:!0})},r.getExamSubjectListItem=function(e){var t=e.id,n=e.name,a=e.inProfile,o=e.startSchoolYear,s=void 0===o?"onbekend":o;return Object(oe.jsxs)("tr",{className:"examSubjectListItem",children:[Object(oe.jsx)("td",{children:n}),Object(oe.jsx)("td",{children:a?"(in profieldeel)":"(in vrije deel)"}),Object(oe.jsx)("td",{children:s}),r.props.editableAdmin&&Object(oe.jsxs)("td",{style:{textAlign:"right"},children:[Object(oe.jsx)(Bt.a,{onClick:function(){return r.editExamSubject(t)},children:Object(oe.jsx)(Wn.a,{})}),Object(oe.jsx)(Bt.a,{onClick:function(){return r.removeExamSubject(t)},children:Object(oe.jsx)(Yn.a,{})})]})]},t)},r.getDialog=function(){var e=r.props,t=Object(it.map)(e.subjects,(function(e){return e})).filter((function(e){return e.canDoExam}));return r.state.isEditDialog||(t=t.filter((function(t){var n=t.id;return 0===e.examSubjects.filter((function(e){return e.id+""===n+""})).length}))),Object(oe.jsxs)(je.a,{onClose:r.toggleDialog,open:r.state.isDialogOpen,children:[Object(oe.jsx)(ge.a,{onClose:r.toggleDialog,children:"Examenvak toevoegen"}),Object(oe.jsxs)(fe.a,{dividers:!0,children:[Object(oe.jsx)(ae.a,{gutterBottom:!0,children:"In welk vak wil je examen doen?"}),Object(oe.jsx)(He,{value:r.state.newSubjectId,options:t.map((function(e){var t=e.id;return{label:e.name,value:t}})),onChange:function(e){return r.onChange("newSubjectId",e)}}),Object(oe.jsx)(ae.a,{gutterBottom:!0,children:"Volg je dit vak binnen je profieldeel of in het vrije deel?"}),Object(oe.jsx)(He,{value:r.state.newSubjectProfile,options:[{label:"In profieldeel",value:"T"},{label:"In vrije deel",value:"F"}],onChange:function(e){return r.onChange("newSubjectProfile",e)}}),!r.props.isStudent&&Object(oe.jsxs)("div",{children:[Object(oe.jsx)(ae.a,{gutterBottom:!0,children:"Wat is je startcohort?"}),Object(oe.jsx)(He,{value:r.state.newSubjectStartYear,options:r.props.possibleYears,onChange:function(e){return r.onChange("newSubjectStartYear",e)}})]})]}),Object(oe.jsxs)(Oe.a,{children:[Object(oe.jsx)(ne.a,{onClick:r.toggleDialog,children:"Annuleren"}),Object(oe.jsx)(ne.a,{autoFocus:!0,onClick:r.updateExamSubjects,color:"primary",disabled:!r.state.isValid,children:"Opslaan"})]})]})},r.state={isDialogOpen:!1,isEditDialog:!1,newSubjectId:"",newSubjectProfile:"",newSubjectStartYear:r.props.schoolYear,isValid:!1},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.props.getSubjects()}},{key:"render",value:function(){var e=this.props,t=e.examSubjects.filter((function(t){var n=t.id;return e.subjects[n]})).map((function(t){var n=t.id,r=t.inProfile,a=t.startSchoolYear;return{id:n,inProfile:r,name:e.subjects[n].name,startSchoolYear:a}})).map(this.getExamSubjectListItem);return Object(oe.jsxs)("div",{children:[Object(oe.jsx)(ae.a,{variant:"h6",color:"secondary",children:"Examenvakken"}),Object(oe.jsx)(ae.a,{children:"In deze vakken wil ik bij de Q-highschool examen doen:"}),e.examSubjects!==[]?Object(oe.jsx)("table",{style:{marginTop:"10px"},children:Object(oe.jsxs)("tbody",{children:[Object(oe.jsxs)("tr",{className:"examSubjectListItem",children:[Object(oe.jsx)("th",{children:"Vak"}),Object(oe.jsx)("th",{}),Object(oe.jsx)("th",{children:"Start cohort"})]}),t]})}):null,this.props.editableUser&&Object(oe.jsx)(ne.a,{variant:"contained",color:"primary",startIcon:Object(oe.jsx)(Jn.a,{}),onClick:this.toggleDialog,children:"Examenvak toevoegen"}),this.getDialog()]})}}]),n}(r.Component);var $n=Object(y.b)((function(e,t){return Object(l.a)({subjects:e.subjects||[],examSubjects:(t.user.examSubjects||"").length>2?JSON.parse(t.user.examSubjects):[],schoolYear:e.schoolYear,possibleYears:e.possibleYears},t)}),(function(e){return{getSubjects:function(){return e(_())}}}))(Zn),qn=n(878),Kn=n(884),Qn=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).getRoleSwitchComponent=function(){var e=r.props.user,t=(e.availableRoles||"").split(",");return 1!==t.length&&r.props.isOwn?Object(oe.jsxs)("div",{children:[Object(oe.jsx)(ae.a,{variant:"h6",color:"secondary",children:"Rolwissel"}),Object(oe.jsx)(ke,{children:Object(oe.jsx)("table",{children:Object(oe.jsx)("tbody",{children:Object(oe.jsxs)("tr",{children:[Object(oe.jsx)(ae.a,{component:"td",children:"Huidige rol"}),Object(oe.jsx)(He,{value:r.state.newRole||e.role,editable:r.props.editableUser,options:t,onChange:function(e){return r.setState({newRole:e})},td:!0}),Object(oe.jsx)(ne.a,{variant:"contained",color:"primary",disabled:null==r.state.newRole,component:"td",onClick:function(){return r.props.dispatch((e=r.state.newRole,function(t,n){H("function/switchRole","post",{newRole:e},t,n).then((function(){document.location.reload()}))}));var e},children:"Verander rol"})]})})})})]}):null},r.getRequestProfileUpdateComponent=function(){var e=r.props;return e.isAdmin?Object(oe.jsxs)("div",{children:[Object(oe.jsx)(ae.a,{variant:"h6",color:"secondary",children:"Verzoek profiel update"}),Object(oe.jsx)(qn.a,{control:Object(oe.jsx)(Kn.a,{checked:e.user.needsProfileUpdate,disabled:!e.editableUser,color:"primary",onChange:function(t){var n=t.target.checked;return e.onChange("needsProfileUpdate",n)}}),label:"Deze gebruiker moet zijn gegevens bijwerken"})]}):null},r.state={newRole:null},r}return Object(f.a)(n,[{key:"render",value:function(){return Object(oe.jsxs)("div",{children:[this.getRoleSwitchComponent(),this.getRequestProfileUpdateComponent()]})}}]),n}(r.Component),Xn=Object(y.b)()(Qn),er=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).state={},r}return Object(f.a)(n,[{key:"render",value:function(){return this.props.children}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=yt.a.parse(e.location.search);if(null!=n.secureLogin&&e.setSecureLogin(n.secureLogin),"login"===n.from&&null!=e.user&&"student"!==e.role){var r=ee("beforeLoginPath");e.history.push(r)}return t}}]),n}(r.Component);var tr=Object(S.h)(Object(y.b)(null,(function(e){return{setSecureLogin:function(t){return e($(t))}}}))(er)),nr=(n(797),n(798),function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.onSave,t=this.props.hasChanged,n=this.props.editIfSecure,r=this.props.isSecure,a=t||n&&!r;return Object(oe.jsxs)("div",{children:[this.props.children,a&&Object(oe.jsxs)(re.a,{className:"SaveBanner",children:[n&&!r&&Object(oe.jsx)(ke,{dense:!0,children:Object(oe.jsx)("br",{})}),t&&Object(oe.jsxs)("div",{children:[Object(oe.jsx)(ne.a,{color:"primary",variant:"outlined",onClick:e,children:"Opslaan"}),Object(oe.jsx)(ne.a,{color:"default",onClick:function(){return window.location.reload(!1)},children:"Annuleren"})]}),Object(oe.jsx)(Ot,{giveWarning:t})]})]})}}]),n}(r.Component)),rr=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){null!=r.state.user&&r.props.isOwn||r.props.getUser(r.props.userId)},r.componentDidUpdate=function(){null==r.state.user&&r.props.getUser(r.props.userId)},r.onChange=function(e,t){console.log(e,t),r.setState({user:Object(l.a)(Object(l.a)({},r.state.user),{},{[e]:t})})},r.state={user:{}},r}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.state.user,n=JSON.stringify(this.props.user)!==JSON.stringify(t),r=Object(l.a)(Object(l.a)({},this.props),{},{user:t});return null==t||null==t.id?Object(oe.jsx)(tr,{children:Object(oe.jsx)(le,{children:Object(oe.jsx)(pe,{})})}):Object(oe.jsx)(tr,{children:Object(oe.jsx)(le,{className:"Profile",children:Object(oe.jsxs)(nr,{hasChanged:n||!0===t.needsProfileUpdate&&"student"===t.role,onSave:function(){if(e.props.editableAdmin)e.props.setUser(t);else{var n=Object(l.a)(Object(l.a)({},t),{},{needsProfileUpdate:!1});e.props.setSelf(n),e.setState({user:n})}},editIfSecure:!this.props.isStudent,isSecure:this.props.isSecure,children:[Object(oe.jsx)(ae.a,{variant:"h4",color:"primary",children:t.displayName}),Object(oe.jsx)(xt.a,{}),t.needsProfileUpdate&&Object(oe.jsxs)("div",{className:"NeedsProfileUpdate",children:[Object(oe.jsx)(zn.a,{color:"secondary"}),Object(oe.jsx)(ae.a,{variant:"button",color:"secondary",children:"Controleer de onderstaande gegevens"})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsx)(Vn,Object(l.a)(Object(l.a)({},r),{},{onChange:this.onChange})),Object(oe.jsx)(Xn,Object(l.a)(Object(l.a)({},r),{},{onChange:this.onChange})),Object(oe.jsx)(Bn,Object(l.a)(Object(l.a)({},r),{},{onChange:this.onChange})),"student"===t.role&&Object(oe.jsx)($n,Object(l.a)(Object(l.a)({},r),{},{onChange:this.onChange})),Object(oe.jsx)("div",{style:{height:"300px"}}),Object(oe.jsxs)(ae.a,{children:["In onze ",Object(oe.jsx)("a",{href:"https://www.quadraam.nl/privacy",children:"privacyverklaring"})," is meer te lezen over het gebruik van deze gegevens."]})]})]})})})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=yt.a.parse(e.location.search);if(null!=n.secureLogin&&"undefined"!==n.secureLogin&&e.setSecureLogin(n.secureLogin),"login"===n.from&&null!=e.user&&"student"!==e.role){var r=ee("beforeLoginPath");e.history.push(r)}return t.userId===e.userId?{orgUser:e.user,user:Object(l.a)(Object(l.a)({},e.user),t.user),userId:e.userId}:{orgUser:e.user,user:e.user,userId:e.userId}}}]),n}(r.Component);var ar=Object(S.h)(Object(y.b)((function(e,t){var n,r="student"===e.role,a="admin"===e.role,o="grade_admin"===e.role,s=null!=e.secureLogin,i=t.match.params.userId;null==i?(n=!0,i=e.userId):n=!1;var c=e.users[e.userId].school,l=e.users[i],u=s&&(a||l&&l.school===c&&o);return{isAdmin:a,isSecure:s,isStudent:r,isFull:n||a,user:l,editableUser:n&&r||n&&s||u,editableAdmin:u,userId:i,isOwn:n}}),(function(e,t,n){return{setSecureLogin:function(t){return e($(t))},setSelf:function(t){return e(function(e){return function(t,n){t({type:"CHANGE_USER",user:e}),H("user/self","patch",e,t,n)}}(t))},setUser:function(t){return e(function(e){return function(t,n){t({type:"CHANGE_USER",user:e}),H("user","patch",Object(l.a)({userId:e.id},e),t,n)}}(t))},getUser:function(t){return e(function(e){return function(t,n){H("user","post",{userId:e},t,n).then((function(e){t({type:"CHANGE_USER",user:e})}))}}(t))}}}))(rr)),or=n(386),sr=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).state={generatedPdf:!1,images:{background:"jpg",course_header:"png",portfolio_header:"png",signature:"png",quadraam_logo:"png"}},Object.keys(r.state.images).forEach((function(e){var t=new Image;t.src="/images/certificate/"+e+"."+r.state.images[e],t.onload=function(){r.state.images[e]=t}})),r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.props.getSubjects()}},{key:"makeBase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new or.a({orientation:"p",unit:"mm",format:"a4",putOnlyUsedFonts:!0,floatPrecision:16});return e.hasOwnProperty("page_count")?(e.addPage(),e.page_count++):e.page_count=1,e.setFontSize(12),e.setFont("helvetica","normal"),e.addImage(this.state.images.background,"jpg",0,0,210,300),e.addImage(this.state.images.signature,"png",45,190,120,47),e.addImage(this.state.images.quadraam_logo,"png",70,240,70,20),e}},{key:"addModule",value:function(e,t){if(this.props.groups)if(this.props.groups.hasOwnProperty(e+""))if(this.props.groups[e].hasOwnProperty("evaluation")){var n=this.props.groups[e];t.addImage(this.state.images.course_header,"png",20,0,150,41),t.text("Hierbij verklaart Quadraam dat",105,60,{align:"center"}),t.setFontStyle("bold"),t.setFontSize(25),t.text(n.evaluation.displayName,105,70,{align:"center",maxWidth:175}),t.setFontSize(12),t.setFontStyle("normal"),t.text("de Q-Highschool module",105,87,{align:"center"}),t.setFontStyle("bold"),t.setFontSize(28),t.text(n.courseName,105,100,{align:"center",maxWidth:175}),t.setFontSize(12),t.setFontStyle("normal"),t.text("van ".concat(n.studyTime," studie-uren en onderdeel van het parcours ").concat(n.subjectName," successvol heeft afgesloten met de beoordeling"),105,125,{align:"center",maxWidth:120}),t.setFontStyle("bold"),t.setFontSize(28),t.text(Ve(n.evaluation),105,145,{align:"center"}),t.setFontSize(12),t.setFontStyle("normal");var r=n.evaluation.hasOwnProperty("date")?n.evaluation.date.toString():n.schoolYear.toString();t.text(r,105,168,{align:"center"})}else console.log("That module has no evaluation!");else console.log("That group id cannot be found!");else console.log("No groups found")}},{key:"portfolioBasePage",value:function(e,t){e.text("Hierbij verklaart Quadraam dat",80,50),e.setFontSize(25),e.setFontStyle("bold"),e.text(this.props.user.displayName,107,60,{align:"center"}),e.setFontSize(12),e.setFontStyle("normal"),e.text("binnen het parcours ".concat(this.props.subjects[t].name," de volgende Q-highschoolmodules heeft afgerond:"),105,70,{align:"center",maxWidth:100}),e.addImage(this.state.images.portfolio_header,"png",20,0,150,41),this.addPortfolioTableHeader(e,100)}},{key:"addPortfolioTableHeader",value:function(e,t){e.setFontStyle("bold"),e.text("Naam module",20,t),e.text("Studietijd",130,t),e.text("Schooljaar",170,t),e.setFontStyle("normal")}},{key:"addPortfolio",value:function(e,t){var n=this;if(this.props.groups){var r=0,a=0;e.setFontStyle("normal"),Object.keys(this.props.groups).forEach((function(o){var s=n.props.groups[o],i={},c=1===a?5:9;if(s.subjectId+""===t+""&&s.hasOwnProperty("evaluation")&&s.hasOwnProperty("courseName")&&(i.name=s.courseName.toString(),s.evaluation.hasOwnProperty("assesment")&&s.evaluation.assesment.length>0&&"ND"!==(s.evaluation.assesment+"").toUpperCase())){i.grade=Ve(s.evaluation),r%c===0&&(0===a?n.portfolioBasePage(e,t):(n.makeBase(e),n.addPortfolioTableHeader(e,60),e.addImage(n.state.images.portfolio_header,"png",20,0,150,41)),r=0,a+=1);var l=1===a?113:75;s.hasOwnProperty("studyTime")?i.time=s.studyTime.toString():i.time="-",s.evaluation.hasOwnProperty("date")?i.date=s.evaluation.date.toString():i.date=s.hasOwnProperty("schoolYear")?s.schoolYear:"Niet bekend.";var u=13*r+l;e.text(i.name,20,u,{maxWidth:70}),e.setTextColor("#F0831F"),e.setFontStyle("bold"),e.text(i.grade,90,u),e.setFontStyle("normal"),e.setTextColor("#000000"),e.text(i.time+" uur",130,u),e.text(i.date,170,u),r+=1}}))}}},{key:"fixPageCount",value:function(e){e.hasOwnProperty("page_count")&&e.page_count%2!==0&&(e.addPage(),e.page_count++)}},{key:"doGenerate",value:function(){if(!this.state.generatedPdf)if(this.props.groups)if(this.props.enrollmentIds){var e=this.makeBase(),t=this.props.match.params.hasOwnProperty("groupId")&&null!==this.props.match.params.groupId,n=this.props.match.params.groupId,r=this.props.match.params.subjectId;t?this.addModule(n,e):(this.addPortfolio(e,r),this.fixPageCount(e)),t?e.save("Certificaat Q-Highschool.pdf"):e.save("Parcoursoverzicht ".concat(this.props.subjects[r].name," ").concat(this.props.user.displayName,".pdf"));var a=this.state;a.generatedPdf=!0,this.setState(a)}else this.props.getEnrollments();else this.props.getParticipatingGroups()}},{key:"render",value:function(){return this.doGenerate(),this.state.generatedPdf?Object(oe.jsx)(le,{children:Object(oe.jsx)("p",{children:"Certificaat is klaar!"})}):Object(oe.jsxs)(le,{children:[Object(oe.jsx)("p",{children:"Een moment geduld a.u.b. "}),Object(oe.jsx)(pe,{})]})}}]),n}(r.Component);var ir=Object(S.h)(Object(y.b)((function(e){return{groups:e.groups,participatingGroupIds:e.users[e.userId].participatingGroupIds,enrollmentIds:e.users[e.userId].enrollmentIds,role:e.role,schoolYear:e.schoolYear,currentPeriod:e.currentPeriod,userId:e.userId,user:e.users[e.userId],subjects:e.subjects}}),(function(e){return{getSubjects:function(){return e(_())},getEnrollments:function(){return e(B())},getParticipatingGroups:function(){return e(U())}}}))(sr)),cr=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.props.getAllUsers()}},{key:"render",value:function(){return Object(oe.jsxs)(le,{children:[Object(oe.jsx)(re.a,{style:{position:"relative"},children:Object(oe.jsx)(Gt.a,{style:{display:"flex"},children:Object(oe.jsx)(ae.a,{variant:"subtitle1",color:"textSecondary",style:{flex:"2 1 auto"},children:"Gebruikers"})})}),Object(oe.jsx)(bt,{userIds:this.props.userIds})]})}}]),n}(r.Component);var lr=Object(S.h)(Object(y.b)((function(e,t){return{userIds:Object(it.map)(e.users,(function(e){return e.id}))}}),(function(e){return{getAllUsers:function(){return e(W())}}}))(cr)),ur=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.props.getSelf()}},{key:"componentDidUpdate",value:function(){null!=this.props.user&&this.props.user.needsProfileUpdate&&"student"===this.props.role&&"/profiel"!==this.props.location.pathname&&this.props.history.push("/profiel")}},{key:"handleShowMenu",value:function(){var e=this.state.showMenu;this.setState({showMenu:!e})}},{key:"getStartPage",value:function(e){switch(e){case"student":return"/aanbod";case"grade_admin":return"/gegevens";default:return"/groepen"}}},{key:"render",value:function(){if(!this.props.role&&"/login"!==this.props.location.pathname)return Object(oe.jsx)("div",{});var e=this.getStartPage(this.props.role);return Object(oe.jsxs)("div",{className:"App",children:[Object(oe.jsx)(un,{}),this.props.showMenu&&Object(oe.jsx)(En,{}),Object(oe.jsx)(rn,{}),Object(oe.jsxs)(S.e,{children:[Object(oe.jsx)(S.c,{path:"/login",component:ie}),Object(oe.jsx)(S.c,{path:"/aanbod",component:Ht}),Object(oe.jsx)(S.c,{path:"/groep/:groupId",component:Dt}),Object(oe.jsx)(S.c,{path:"/gebruikers",component:lr}),Object(oe.jsx)(S.c,{path:"/gebruiker/:userId",component:ar}),Object(oe.jsx)(S.c,{path:"/profiel/",component:ar}),Object(oe.jsx)(S.c,{path:"/portfolio/",component:Gn}),Object(oe.jsx)(S.c,{path:"/groepen/",component:Gn}),Object(oe.jsx)(S.c,{path:"/gegevens/",component:qt}),Object(oe.jsx)(S.c,{path:"/taxi/",component:Kt}),Object(oe.jsx)(S.c,{path:"/beheer/",component:_n}),Object(oe.jsx)(S.c,{path:"/certificaat/gebruiker/:userId/groep/:groupId",component:ir}),Object(oe.jsx)(S.c,{path:"/certificaat/gebruiker/:userId/parcours/:subjectId",component:ir}),Object(oe.jsx)(S.b,{push:!0,to:e})]})]})}}]),n}(r.Component);var pr=Object(S.h)(Object(y.b)((function(e){return{showMenu:e.showMenu,userId:e.userId,role:e.role,user:e.userId?e.users[e.userId]:null}}),(function(e){return{getSelf:function(){return e((function(e,t){var n={id:-96,priority:"low",type:"bar",message:"Bezig met laden",scope:"."};e(Y(n)),H("user/self","get",null,e,t).then((function(t){V(e),e({type:"SET_SELF",user:t}),e(J(n))})).catch((function(t){V(e),e(J(n)),null!=t&&"Authentication Error"===t.error?"/login"!==window.location.pathname&&(X("beforeLoginPath",window.location.pathname+window.location.search,24),document.location.href="/login"):(e(Z(!1)),e(Y({id:-1,priority:"high",type:"bar",message:"Kan geen verbinding met de server maken"})))}))}))},addNotification:function(t){return e(Y(t))}}}))(ur)),dr=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return Object(oe.jsx)(y.a,{store:this.props.store,children:Object(oe.jsx)(v.a,{theme:C,children:Object(oe.jsx)(m.a,{children:Object(oe.jsx)(pr,{})})})})}}]),n}(r.Component),hr=(n(799),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.c),br=Object(s.d)(j,hr(Object(s.a)(i.a)));o.a.render(Object(oe.jsx)(dr,{store:br}),document.getElementById("root"))}},[[800,1,2]]]);
//# sourceMappingURL=main.cfed1a7e.chunk.js.map